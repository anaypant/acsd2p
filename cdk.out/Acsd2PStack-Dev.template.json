{
 "Description": "Development environment - Safe to deploy and test",
 "Resources": {
  "UserPool6BA7E5F2": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": false
    },
    "AutoVerifiedAttributes": [
     "email"
    ],
    "EmailVerificationMessage": "The verification code to your new account is {####}",
    "EmailVerificationSubject": "Verify your new account",
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 8,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": true,
      "RequireUppercase": true
     }
    },
    "Schema": [
     {
      "Mutable": true,
      "Name": "email",
      "Required": true
     }
    ],
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolName": "dev-UserPool",
    "UsernameAttributes": [
     "email"
    ],
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "The verification code to your new account is {####}",
     "EmailSubject": "Verify your new account",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/UserPool/Resource"
   }
  },
  "UserPoolClient2F5918F7": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AllowedOAuthFlows": [
     "implicit",
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "email",
     "openid",
     "profile"
    ],
    "CallbackURLs": [
     "http://localhost:3000/callback",
     "https://yourdomain.com/callback"
    ],
    "ClientName": "dev-UserPoolClient",
    "ExplicitAuthFlows": [
     "ALLOW_USER_PASSWORD_AUTH",
     "ALLOW_ADMIN_USER_PASSWORD_AUTH",
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "GenerateSecret": true,
    "SupportedIdentityProviders": [
     "COGNITO"
    ],
    "UserPoolId": {
     "Ref": "UserPool6BA7E5F2"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/UserPoolClient/Resource"
   }
  },
  "UserPoolClientDescribeCognitoUserPoolClient19F18FF0": {
   "Type": "Custom::DescribeCognitoUserPoolClient",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd22872D164C4C",
      "Arn"
     ]
    },
    "Create": {
     "Fn::Join": [
      "",
      [
       "{\"region\":\"us-west-1\",\"service\":\"CognitoIdentityServiceProvider\",\"action\":\"describeUserPoolClient\",\"parameters\":{\"UserPoolId\":\"",
       {
        "Ref": "UserPool6BA7E5F2"
       },
       "\",\"ClientId\":\"",
       {
        "Ref": "UserPoolClient2F5918F7"
       },
       "\"},\"physicalResourceId\":{\"id\":\"",
       {
        "Ref": "UserPoolClient2F5918F7"
       },
       "\"},\"logApiResponseData\":false}"
      ]
     ]
    },
    "Update": {
     "Fn::Join": [
      "",
      [
       "{\"region\":\"us-west-1\",\"service\":\"CognitoIdentityServiceProvider\",\"action\":\"describeUserPoolClient\",\"parameters\":{\"UserPoolId\":\"",
       {
        "Ref": "UserPool6BA7E5F2"
       },
       "\",\"ClientId\":\"",
       {
        "Ref": "UserPoolClient2F5918F7"
       },
       "\"},\"physicalResourceId\":{\"id\":\"",
       {
        "Ref": "UserPoolClient2F5918F7"
       },
       "\"},\"logApiResponseData\":false}"
      ]
     ]
    },
    "InstallLatestAwsSdk": false
   },
   "DependsOn": [
    "UserPoolClientDescribeCognitoUserPoolClientCustomResourcePolicy0204E3CD"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/Resource/Default"
   }
  },
  "UserPoolClientDescribeCognitoUserPoolClientCustomResourcePolicy0204E3CD": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "cognito-idp:DescribeUserPoolClient",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "UserPoolClientDescribeCognitoUserPoolClientCustomResourcePolicy0204E3CD",
    "Roles": [
     {
      "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/CustomResourcePolicy/Resource"
   }
  },
  "storage8D9329BE": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "dev-storage",
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/storage/Resource"
   }
  },
  "emailattachments34C069DE": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "dev-email-attachments",
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/email-attachments/Resource"
   }
  },
  "EmailProcessDLQ5A016F61": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "dev-EmailProcessDLQ"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/EmailProcessDLQ/Resource"
   }
  },
  "EmailProcessQueue10E28519": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "dev-EmailProcessQueue",
    "RedrivePolicy": {
     "deadLetterTargetArn": {
      "Fn::GetAtt": [
       "EmailProcessDLQ5A016F61",
       "Arn"
      ]
     },
     "maxReceiveCount": 3
    },
    "VisibilityTimeout": 300
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/EmailProcessQueue/Resource"
   }
  },
  "AllowCorsServiceRoleB3402641": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.325Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Allow-Cors/ServiceRole/Resource"
   }
  },
  "AllowCorsServiceRoleDefaultPolicy91D90412": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AllowCorsServiceRoleDefaultPolicy91D90412",
    "Roles": [
     {
      "Ref": "AllowCorsServiceRoleB3402641"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Allow-Cors/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AllowCors38326BB7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "3145bf60f472090dadb252de57907ee5a7dcd713aa696bf918f82c033dc18ad3.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Allow-Cors",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "AllowCorsServiceRoleB3402641",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.325Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "AllowCorsServiceRoleDefaultPolicy91D90412",
    "AllowCorsServiceRoleB3402641"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Allow-Cors/Resource",
    "aws:asset:path": "asset.3145bf60f472090dadb252de57907ee5a7dcd713aa696bf918f82c033dc18ad3",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AllowCorsLogGroup1121CCB7": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AllowCors38326BB7"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.325Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Allow-Cors/LogGroup/Resource"
   }
  },
  "APIAuthorizerServiceRole2482D84B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.333Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/API-Authorizer/ServiceRole/Resource"
   }
  },
  "APIAuthorizerServiceRoleDefaultPolicyA7126BC6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "APIAuthorizerServiceRoleDefaultPolicyA7126BC6",
    "Roles": [
     {
      "Ref": "APIAuthorizerServiceRole2482D84B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/API-Authorizer/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "APIAuthorizer3DA3485D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "530e0033c49a79d5a5e4190b4020709bb3fdeadbc4c3065959a8484a1cbf7c50.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "API-Authorizer",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "APIAuthorizerServiceRole2482D84B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.333Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "APIAuthorizerServiceRoleDefaultPolicyA7126BC6",
    "APIAuthorizerServiceRole2482D84B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/API-Authorizer/Resource",
    "aws:asset:path": "asset.530e0033c49a79d5a5e4190b4020709bb3fdeadbc4c3065959a8484a1cbf7c50",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "APIAuthorizerLogGroup5A673AB9": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "APIAuthorizer3DA3485D"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.333Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/API-Authorizer/LogGroup/Resource"
   }
  },
  "AuthorizeServiceRole397C1B2B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.338Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Authorize/ServiceRole/Resource"
   }
  },
  "AuthorizeServiceRoleDefaultPolicyC880FB24": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AuthorizeServiceRoleDefaultPolicyC880FB24",
    "Roles": [
     {
      "Ref": "AuthorizeServiceRole397C1B2B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Authorize/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AuthorizeD8507075": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "719a3cd50a6dcfe528399dfb84a933f66e2da886ecab87e9719dc98c7f85324a.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Authorize",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "AuthorizeServiceRole397C1B2B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.338Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "AuthorizeServiceRoleDefaultPolicyC880FB24",
    "AuthorizeServiceRole397C1B2B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Authorize/Resource",
    "aws:asset:path": "asset.719a3cd50a6dcfe528399dfb84a933f66e2da886ecab87e9719dc98c7f85324a",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AuthorizeLogGroupCAFBD4A3": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AuthorizeD8507075"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.338Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Authorize/LogGroup/Resource"
   }
  },
  "CheckDomainStatusServiceRole55503012": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.342Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Check-Domain-Status/ServiceRole/Resource"
   }
  },
  "CheckDomainStatusServiceRoleDefaultPolicy6279B8AE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CheckDomainStatusServiceRoleDefaultPolicy6279B8AE",
    "Roles": [
     {
      "Ref": "CheckDomainStatusServiceRole55503012"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Check-Domain-Status/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CheckDomainStatusF427753C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "fc11e697233a1660c9dc2ec691f85e254eb28bf74bccb7d730356a0cf452cb96.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Check-Domain-Status",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CheckDomainStatusServiceRole55503012",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.342Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "CheckDomainStatusServiceRoleDefaultPolicy6279B8AE",
    "CheckDomainStatusServiceRole55503012"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Check-Domain-Status/Resource",
    "aws:asset:path": "asset.fc11e697233a1660c9dc2ec691f85e254eb28bf74bccb7d730356a0cf452cb96",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CheckDomainStatusLogGroup48AD12AA": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CheckDomainStatusF427753C"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.342Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Check-Domain-Status/LogGroup/Resource"
   }
  },
  "CreateSESDkimRecordsServiceRole79BFACF5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.346Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Dkim-Records/ServiceRole/Resource"
   }
  },
  "CreateSESDkimRecordsServiceRoleDefaultPolicy8C13311B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateSESDkimRecordsServiceRoleDefaultPolicy8C13311B",
    "Roles": [
     {
      "Ref": "CreateSESDkimRecordsServiceRole79BFACF5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Dkim-Records/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateSESDkimRecordsF84541B9": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "650b56d3747d7b5fc84751a2194258f6536b1d303c6273def14a0b371f6925fd.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Create-SES-Dkim-Records",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CreateSESDkimRecordsServiceRole79BFACF5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.346Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "CreateSESDkimRecordsServiceRoleDefaultPolicy8C13311B",
    "CreateSESDkimRecordsServiceRole79BFACF5"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Dkim-Records/Resource",
    "aws:asset:path": "asset.650b56d3747d7b5fc84751a2194258f6536b1d303c6273def14a0b371f6925fd",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateSESDkimRecordsLogGroup2720B6FE": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CreateSESDkimRecordsF84541B9"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.346Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Dkim-Records/LogGroup/Resource"
   }
  },
  "CreateSESIdentityServiceRole886194D4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.355Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Identity/ServiceRole/Resource"
   }
  },
  "CreateSESIdentityServiceRoleDefaultPolicy361BD245": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateSESIdentityServiceRoleDefaultPolicy361BD245",
    "Roles": [
     {
      "Ref": "CreateSESIdentityServiceRole886194D4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Identity/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateSESIdentity4DA2E2EF": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "4895a78d74bfaf839d2c858747ba587c84a8cddf6808b34779835d59feb8066d.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Create-SES-Identity",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CreateSESIdentityServiceRole886194D4",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.355Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "CreateSESIdentityServiceRoleDefaultPolicy361BD245",
    "CreateSESIdentityServiceRole886194D4"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Identity/Resource",
    "aws:asset:path": "asset.4895a78d74bfaf839d2c858747ba587c84a8cddf6808b34779835d59feb8066d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateSESIdentityLogGroup6E42F9A1": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CreateSESIdentity4DA2E2EF"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.355Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Create-SES-Identity/LogGroup/Resource"
   }
  },
  "CreateNewSessionServiceRole68BEA7B4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.360Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/CreateNewSession/ServiceRole/Resource"
   }
  },
  "CreateNewSessionServiceRoleDefaultPolicy2C812C40": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateNewSessionServiceRoleDefaultPolicy2C812C40",
    "Roles": [
     {
      "Ref": "CreateNewSessionServiceRole68BEA7B4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/CreateNewSession/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateNewSession969BBFEA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "b5a5e1386ccf7ecc183b4609697bb9d87aa16334dcb9de908baf600b2d334b71.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "CreateNewSession",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CreateNewSessionServiceRole68BEA7B4",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.360Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "CreateNewSessionServiceRoleDefaultPolicy2C812C40",
    "CreateNewSessionServiceRole68BEA7B4"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/CreateNewSession/Resource",
    "aws:asset:path": "asset.b5a5e1386ccf7ecc183b4609697bb9d87aa16334dcb9de908baf600b2d334b71",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateNewSessionLogGroupEA6204E0": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CreateNewSession969BBFEA"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.360Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/CreateNewSession/LogGroup/Resource"
   }
  },
  "DBBatchSelectServiceRole52ED1AE5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.364Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBBatchSelect/ServiceRole/Resource"
   }
  },
  "DBBatchSelectServiceRoleDefaultPolicyA65DE8D5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBBatchSelectServiceRoleDefaultPolicyA65DE8D5",
    "Roles": [
     {
      "Ref": "DBBatchSelectServiceRole52ED1AE5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBBatchSelect/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBBatchSelect27E57951": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "330e9df57cd16076983a749f4d2a2fca4c781574fd9a9d3d7ee8fdfc30e51ebe.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "DBBatchSelect",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBBatchSelectServiceRole52ED1AE5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.364Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "DBBatchSelectServiceRoleDefaultPolicyA65DE8D5",
    "DBBatchSelectServiceRole52ED1AE5"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBBatchSelect/Resource",
    "aws:asset:path": "asset.330e9df57cd16076983a749f4d2a2fca4c781574fd9a9d3d7ee8fdfc30e51ebe",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBBatchSelectLogGroupA3D6B6FF": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBBatchSelect27E57951"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.364Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBBatchSelect/LogGroup/Resource"
   }
  },
  "DBDeleteServiceRole585C5822": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.369Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBDelete/ServiceRole/Resource"
   }
  },
  "DBDeleteServiceRoleDefaultPolicy9AE369A4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBDeleteServiceRoleDefaultPolicy9AE369A4",
    "Roles": [
     {
      "Ref": "DBDeleteServiceRole585C5822"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBDelete/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBDelete6FEA0FAC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "d1e11b2119d595de05590c59340353c8e1040a4fe981098563ed5752b534e5be.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "DBDelete",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBDeleteServiceRole585C5822",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.369Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "DBDeleteServiceRoleDefaultPolicy9AE369A4",
    "DBDeleteServiceRole585C5822"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBDelete/Resource",
    "aws:asset:path": "asset.d1e11b2119d595de05590c59340353c8e1040a4fe981098563ed5752b534e5be",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBDeleteLogGroup0F250869": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBDelete6FEA0FAC"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.369Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBDelete/LogGroup/Resource"
   }
  },
  "DBSelectServiceRole6D554165": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.373Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBSelect/ServiceRole/Resource"
   }
  },
  "DBSelectServiceRoleDefaultPolicy94A10E8F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBSelectServiceRoleDefaultPolicy94A10E8F",
    "Roles": [
     {
      "Ref": "DBSelectServiceRole6D554165"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBSelect/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBSelectE0E36FBC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "4dbb693cc9a76f9a61a46a023681a05f74018a1fddfcec1a98bcf0a3dd9f4a7c.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "DBSelect",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBSelectServiceRole6D554165",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.373Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "DBSelectServiceRoleDefaultPolicy94A10E8F",
    "DBSelectServiceRole6D554165"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBSelect/Resource",
    "aws:asset:path": "asset.4dbb693cc9a76f9a61a46a023681a05f74018a1fddfcec1a98bcf0a3dd9f4a7c",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBSelectLogGroup80E13F79": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBSelectE0E36FBC"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.373Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBSelect/LogGroup/Resource"
   }
  },
  "DBUpdateServiceRole27E63D0B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.377Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBUpdate/ServiceRole/Resource"
   }
  },
  "DBUpdateServiceRoleDefaultPolicyCBD6FD8E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBUpdateServiceRoleDefaultPolicyCBD6FD8E",
    "Roles": [
     {
      "Ref": "DBUpdateServiceRole27E63D0B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBUpdate/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBUpdate593A351B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "f337abbb6d9836e9e66a8c1202ba759cbdc7c6ec249a0d62a5601145a06c6755.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "DBUpdate",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBUpdateServiceRole27E63D0B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.377Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "DBUpdateServiceRoleDefaultPolicyCBD6FD8E",
    "DBUpdateServiceRole27E63D0B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBUpdate/Resource",
    "aws:asset:path": "asset.f337abbb6d9836e9e66a8c1202ba759cbdc7c6ec249a0d62a5601145a06c6755",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBUpdateLogGroup69D25CCF": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBUpdate593A351B"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.377Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DBUpdate/LogGroup/Resource"
   }
  },
  "DeleteUserSupabaseServiceRoleA2373C49": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.382Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DeleteUserSupabase/ServiceRole/Resource"
   }
  },
  "DeleteUserSupabaseServiceRoleDefaultPolicy63FC43D8": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteUserSupabaseServiceRoleDefaultPolicy63FC43D8",
    "Roles": [
     {
      "Ref": "DeleteUserSupabaseServiceRoleA2373C49"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DeleteUserSupabase/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DeleteUserSupabaseD4FF7308": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "df08010cee26be31a174b141db03eb40a576abfad6b1a0440bd1b8b5bf670330.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "DeleteUserSupabase",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DeleteUserSupabaseServiceRoleA2373C49",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.382Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "DeleteUserSupabaseServiceRoleDefaultPolicy63FC43D8",
    "DeleteUserSupabaseServiceRoleA2373C49"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DeleteUserSupabase/Resource",
    "aws:asset:path": "asset.df08010cee26be31a174b141db03eb40a576abfad6b1a0440bd1b8b5bf670330",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DeleteUserSupabaseLogGroup7472AC15": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DeleteUserSupabaseD4FF7308"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.382Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/DeleteUserSupabase/LogGroup/Resource"
   }
  },
  "GenerateEmailServiceRole0096CC1A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.386Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEmail/ServiceRole/Resource"
   }
  },
  "GenerateEmailServiceRoleDefaultPolicyB5241152": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GenerateEmailServiceRoleDefaultPolicyB5241152",
    "Roles": [
     {
      "Ref": "GenerateEmailServiceRole0096CC1A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEmail/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GenerateEmail27EC3141": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "9272dc705065e34aad34d35647ddbc42d81c60c19fe647b9660e5b9434538559.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "GenerateEmail",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GenerateEmailServiceRole0096CC1A",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.386Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "GenerateEmailServiceRoleDefaultPolicyB5241152",
    "GenerateEmailServiceRole0096CC1A"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEmail/Resource",
    "aws:asset:path": "asset.9272dc705065e34aad34d35647ddbc42d81c60c19fe647b9660e5b9434538559",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GenerateEmailLogGroup79B8C5E8": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GenerateEmail27EC3141"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.386Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEmail/LogGroup/Resource"
   }
  },
  "GenerateEVServiceRoleBAF34D8B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.392Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEV/ServiceRole/Resource"
   }
  },
  "GenerateEVServiceRoleDefaultPolicyF807BC2C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GenerateEVServiceRoleDefaultPolicyF807BC2C",
    "Roles": [
     {
      "Ref": "GenerateEVServiceRoleBAF34D8B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEV/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GenerateEV72CCC71B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "7fd754f9c71e1ce35bb4503015b17ec83c6bdf9542e555730af83735a40fac04.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "GenerateEV",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GenerateEVServiceRoleBAF34D8B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.392Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "GenerateEVServiceRoleDefaultPolicyF807BC2C",
    "GenerateEVServiceRoleBAF34D8B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEV/Resource",
    "aws:asset:path": "asset.7fd754f9c71e1ce35bb4503015b17ec83c6bdf9542e555730af83735a40fac04",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GenerateEVLogGroupDD7CB946": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GenerateEV72CCC71B"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.392Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GenerateEV/LogGroup/Resource"
   }
  },
  "GetCorsServiceRole23F04719": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.396Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Get-Cors/ServiceRole/Resource"
   }
  },
  "GetCorsServiceRoleDefaultPolicyDDCC3B73": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetCorsServiceRoleDefaultPolicyDDCC3B73",
    "Roles": [
     {
      "Ref": "GetCorsServiceRole23F04719"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Get-Cors/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetCorsE4E2D580": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "cb9875915c163f82a02d1325a3b3ab854a7f2f448a7654bbf22bb2a6f40a0203.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Get-Cors",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GetCorsServiceRole23F04719",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.396Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "GetCorsServiceRoleDefaultPolicyDDCC3B73",
    "GetCorsServiceRole23F04719"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Get-Cors/Resource",
    "aws:asset:path": "asset.cb9875915c163f82a02d1325a3b3ab854a7f2f448a7654bbf22bb2a6f40a0203",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetCorsLogGroup5AE2158A": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GetCorsE4E2D580"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.396Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Get-Cors/LogGroup/Resource"
   }
  },
  "getThreadAttrsServiceRole304BF294": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.401Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/getThreadAttrs/ServiceRole/Resource"
   }
  },
  "getThreadAttrsServiceRoleDefaultPolicy7E4B89E2": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "getThreadAttrsServiceRoleDefaultPolicy7E4B89E2",
    "Roles": [
     {
      "Ref": "getThreadAttrsServiceRole304BF294"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/getThreadAttrs/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "getThreadAttrs5DADDD09": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "e58f06622cf92ee06cd57d7a0d7dd2bab338d7138e0343414f0bb006203db86d.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "getThreadAttrs",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "getThreadAttrsServiceRole304BF294",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.401Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "getThreadAttrsServiceRoleDefaultPolicy7E4B89E2",
    "getThreadAttrsServiceRole304BF294"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/getThreadAttrs/Resource",
    "aws:asset:path": "asset.e58f06622cf92ee06cd57d7a0d7dd2bab338d7138e0343414f0bb006203db86d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "getThreadAttrsLogGroupF48E1AEA": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "getThreadAttrs5DADDD09"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.401Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/getThreadAttrs/LogGroup/Resource"
   }
  },
  "GetUserConversationsServiceRole6E5732CB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.404Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GetUserConversations/ServiceRole/Resource"
   }
  },
  "GetUserConversationsServiceRoleDefaultPolicyFB453B9E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetUserConversationsServiceRoleDefaultPolicyFB453B9E",
    "Roles": [
     {
      "Ref": "GetUserConversationsServiceRole6E5732CB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GetUserConversations/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetUserConversationsD05A38FF": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "11378a1ffde73836fa84321b9429dc2880b6eea1dde60fb57fdcd34d19b2b896.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "GetUserConversations",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GetUserConversationsServiceRole6E5732CB",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.404Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "GetUserConversationsServiceRoleDefaultPolicyFB453B9E",
    "GetUserConversationsServiceRole6E5732CB"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GetUserConversations/Resource",
    "aws:asset:path": "asset.11378a1ffde73836fa84321b9429dc2880b6eea1dde60fb57fdcd34d19b2b896",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetUserConversationsLogGroup340AF329": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GetUserConversationsD05A38FF"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.404Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/GetUserConversations/LogGroup/Resource"
   }
  },
  "LCPLlmResponseServiceRoleED62E2B9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.412Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LCPLlmResponse/ServiceRole/Resource"
   }
  },
  "LCPLlmResponseServiceRoleDefaultPolicy5103FF90": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LCPLlmResponseServiceRoleDefaultPolicy5103FF90",
    "Roles": [
     {
      "Ref": "LCPLlmResponseServiceRoleED62E2B9"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LCPLlmResponse/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LCPLlmResponse21157393": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "93329a1b5d09d4689f5ca7d71b8b6e369398b1007b39b26df00ac4b1a1b3352b.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "LCPLlmResponse",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "LCPLlmResponseServiceRoleED62E2B9",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.412Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "LCPLlmResponseServiceRoleDefaultPolicy5103FF90",
    "LCPLlmResponseServiceRoleED62E2B9"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LCPLlmResponse/Resource",
    "aws:asset:path": "asset.93329a1b5d09d4689f5ca7d71b8b6e369398b1007b39b26df00ac4b1a1b3352b",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "LCPLlmResponseLogGroupC2CE33A3": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "LCPLlmResponse21157393"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.412Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LCPLlmResponse/LogGroup/Resource"
   }
  },
  "LoginUserServiceRole423AD860": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.416Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LoginUser/ServiceRole/Resource"
   }
  },
  "LoginUserServiceRoleDefaultPolicyAB11DEB0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LoginUserServiceRoleDefaultPolicyAB11DEB0",
    "Roles": [
     {
      "Ref": "LoginUserServiceRole423AD860"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LoginUser/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LoginUserAD11EC26": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "3a7eaf2517d8c536d641fabd37fecf8433a4a0b8361bc852628d22cf8b2f7e6b.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "LoginUser",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "LoginUserServiceRole423AD860",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.416Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "LoginUserServiceRoleDefaultPolicyAB11DEB0",
    "LoginUserServiceRole423AD860"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LoginUser/Resource",
    "aws:asset:path": "asset.3a7eaf2517d8c536d641fabd37fecf8433a4a0b8361bc852628d22cf8b2f7e6b",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "LoginUserLogGroup8890D78D": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "LoginUserAD11EC26"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.416Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LoginUser/LogGroup/Resource"
   }
  },
  "OrganizationsCrudServiceRoleB7D4F296": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.420Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Crud/ServiceRole/Resource"
   }
  },
  "OrganizationsCrudServiceRoleDefaultPolicy32F22F54": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrganizationsCrudServiceRoleDefaultPolicy32F22F54",
    "Roles": [
     {
      "Ref": "OrganizationsCrudServiceRoleB7D4F296"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Crud/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OrganizationsCrud7ACB6109": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "79f0d1a742b3e17699028e9d6ea043933a9c25a12ae8bf9162b87cad66125470.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Organizations-Crud",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "OrganizationsCrudServiceRoleB7D4F296",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.420Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "OrganizationsCrudServiceRoleDefaultPolicy32F22F54",
    "OrganizationsCrudServiceRoleB7D4F296"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Crud/Resource",
    "aws:asset:path": "asset.79f0d1a742b3e17699028e9d6ea043933a9c25a12ae8bf9162b87cad66125470",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrganizationsCrudLogGroupDFACF237": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "OrganizationsCrud7ACB6109"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.420Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Crud/LogGroup/Resource"
   }
  },
  "OrganizationsMembersServiceRole7B651C6C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.423Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Members/ServiceRole/Resource"
   }
  },
  "OrganizationsMembersServiceRoleDefaultPolicy15F0DCF4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrganizationsMembersServiceRoleDefaultPolicy15F0DCF4",
    "Roles": [
     {
      "Ref": "OrganizationsMembersServiceRole7B651C6C"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Members/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OrganizationsMembersFAEEE244": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "b9c9a01821101631834d5f35fd9cd224ab0e763b8320e97b9e704860af2822ed.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Organizations-Members",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "OrganizationsMembersServiceRole7B651C6C",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.423Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "OrganizationsMembersServiceRoleDefaultPolicy15F0DCF4",
    "OrganizationsMembersServiceRole7B651C6C"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Members/Resource",
    "aws:asset:path": "asset.b9c9a01821101631834d5f35fd9cd224ab0e763b8320e97b9e704860af2822ed",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrganizationsMembersLogGroup55EC0D20": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "OrganizationsMembersFAEEE244"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.423Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Organizations-Members/LogGroup/Resource"
   }
  },
  "ParseEventServiceRole53F2EE86": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.426Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ParseEvent/ServiceRole/Resource"
   }
  },
  "ParseEventServiceRoleDefaultPolicyF2F8B67F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ParseEventServiceRoleDefaultPolicyF2F8B67F",
    "Roles": [
     {
      "Ref": "ParseEventServiceRole53F2EE86"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ParseEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ParseEvent487500D4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "da34e10f08cf6eb65ae8cc02780811bc593ac2e511af7bc7d63932e719e67817.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "ParseEvent",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "ParseEventServiceRole53F2EE86",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.426Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "ParseEventServiceRoleDefaultPolicyF2F8B67F",
    "ParseEventServiceRole53F2EE86"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ParseEvent/Resource",
    "aws:asset:path": "asset.da34e10f08cf6eb65ae8cc02780811bc593ac2e511af7bc7d63932e719e67817",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ParseEventLogGroupCC643B4F": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ParseEvent487500D4"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.426Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ParseEvent/LogGroup/Resource"
   }
  },
  "ProcessSQSQueuedEmailsServiceRoleB5F19AC6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.433Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Process-SQS-Queued-Emails/ServiceRole/Resource"
   }
  },
  "ProcessSQSQueuedEmailsServiceRoleDefaultPolicy06E420C7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ProcessSQSQueuedEmailsServiceRoleDefaultPolicy06E420C7",
    "Roles": [
     {
      "Ref": "ProcessSQSQueuedEmailsServiceRoleB5F19AC6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Process-SQS-Queued-Emails/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ProcessSQSQueuedEmailsA1F4C8CD": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "6425e3e71aa7dcf9734a918cf4b200aecc5647d67d3928b9e0ae4ea78611af61.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Process-SQS-Queued-Emails",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "ProcessSQSQueuedEmailsServiceRoleB5F19AC6",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.433Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "ProcessSQSQueuedEmailsServiceRoleDefaultPolicy06E420C7",
    "ProcessSQSQueuedEmailsServiceRoleB5F19AC6"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Process-SQS-Queued-Emails/Resource",
    "aws:asset:path": "asset.6425e3e71aa7dcf9734a918cf4b200aecc5647d67d3928b9e0ae4ea78611af61",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ProcessSQSQueuedEmailsLogGroup257D688F": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ProcessSQSQueuedEmailsA1F4C8CD"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.433Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Process-SQS-Queued-Emails/LogGroup/Resource"
   }
  },
  "ProcessNewUserSupabaseServiceRole548C2ED2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.436Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ProcessNewUserSupabase/ServiceRole/Resource"
   }
  },
  "ProcessNewUserSupabaseServiceRoleDefaultPolicy2B1E8C1A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ProcessNewUserSupabaseServiceRoleDefaultPolicy2B1E8C1A",
    "Roles": [
     {
      "Ref": "ProcessNewUserSupabaseServiceRole548C2ED2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ProcessNewUserSupabase/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ProcessNewUserSupabaseBC5B358F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "1fda529581499fc50365c40a1738a2bac02d48ce561923ac9486016cae0eedb6.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "ProcessNewUserSupabase",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "ProcessNewUserSupabaseServiceRole548C2ED2",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.436Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "ProcessNewUserSupabaseServiceRoleDefaultPolicy2B1E8C1A",
    "ProcessNewUserSupabaseServiceRole548C2ED2"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ProcessNewUserSupabase/Resource",
    "aws:asset:path": "asset.1fda529581499fc50365c40a1738a2bac02d48ce561923ac9486016cae0eedb6",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ProcessNewUserSupabaseLogGroupDC97039D": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ProcessNewUserSupabaseBC5B358F"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.436Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ProcessNewUserSupabase/LogGroup/Resource"
   }
  },
  "RateLimitAIServiceRole80785149": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.440Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAI/ServiceRole/Resource"
   }
  },
  "RateLimitAIServiceRoleDefaultPolicyAA9CDF3D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RateLimitAIServiceRoleDefaultPolicyAA9CDF3D",
    "Roles": [
     {
      "Ref": "RateLimitAIServiceRole80785149"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAI/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RateLimitAIB2954753": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "cc890be28a8a8506367201a310e91637eb24a5046daa4bf5d71710f02acc57fb.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "RateLimitAI",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "RateLimitAIServiceRole80785149",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.440Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "RateLimitAIServiceRoleDefaultPolicyAA9CDF3D",
    "RateLimitAIServiceRole80785149"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAI/Resource",
    "aws:asset:path": "asset.cc890be28a8a8506367201a310e91637eb24a5046daa4bf5d71710f02acc57fb",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RateLimitAILogGroup8AED4452": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "RateLimitAIB2954753"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.440Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAI/LogGroup/Resource"
   }
  },
  "RateLimitAWSServiceRole0CC2489B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.444Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAWS/ServiceRole/Resource"
   }
  },
  "RateLimitAWSServiceRoleDefaultPolicy8BE43E23": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RateLimitAWSServiceRoleDefaultPolicy8BE43E23",
    "Roles": [
     {
      "Ref": "RateLimitAWSServiceRole0CC2489B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAWS/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RateLimitAWSF1FD42E0": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "980b4dccb82bb9b8e1ac6899d05a508fde98853738864dd4a8491548d1be05a4.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "RateLimitAWS",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "RateLimitAWSServiceRole0CC2489B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.444Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "RateLimitAWSServiceRoleDefaultPolicy8BE43E23",
    "RateLimitAWSServiceRole0CC2489B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAWS/Resource",
    "aws:asset:path": "asset.980b4dccb82bb9b8e1ac6899d05a508fde98853738864dd4a8491548d1be05a4",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RateLimitAWSLogGroupF1570DDB": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "RateLimitAWSF1FD42E0"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.444Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/RateLimitAWS/LogGroup/Resource"
   }
  },
  "RetrieveThreadInformationServiceRole8DA946AB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.448Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Retrieve-Thread-Information/ServiceRole/Resource"
   }
  },
  "RetrieveThreadInformationServiceRoleDefaultPolicy0287A74C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RetrieveThreadInformationServiceRoleDefaultPolicy0287A74C",
    "Roles": [
     {
      "Ref": "RetrieveThreadInformationServiceRole8DA946AB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Retrieve-Thread-Information/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RetrieveThreadInformation724354D2": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "bfb93a5f5b5bc564220730eb94471e283b359103bd277c34aac3d20d82ffab8f.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Retrieve-Thread-Information",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "RetrieveThreadInformationServiceRole8DA946AB",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.448Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "RetrieveThreadInformationServiceRoleDefaultPolicy0287A74C",
    "RetrieveThreadInformationServiceRole8DA946AB"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Retrieve-Thread-Information/Resource",
    "aws:asset:path": "asset.bfb93a5f5b5bc564220730eb94471e283b359103bd277c34aac3d20d82ffab8f",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RetrieveThreadInformationLogGroupF595353E": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "RetrieveThreadInformation724354D2"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.448Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Retrieve-Thread-Information/LogGroup/Resource"
   }
  },
  "SendEmailServiceRole71BD9BE6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.452Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Send-Email/ServiceRole/Resource"
   }
  },
  "SendEmailServiceRoleDefaultPolicy9C77718E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SendEmailServiceRoleDefaultPolicy9C77718E",
    "Roles": [
     {
      "Ref": "SendEmailServiceRole71BD9BE6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Send-Email/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "SendEmailF3CD3574": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "36d9bde8b10be5f523228b309e7f0a9b7fa86cfe968f59ea0248d5adb66aa039.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Send-Email",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "SendEmailServiceRole71BD9BE6",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.452Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "SendEmailServiceRoleDefaultPolicy9C77718E",
    "SendEmailServiceRole71BD9BE6"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Send-Email/Resource",
    "aws:asset:path": "asset.36d9bde8b10be5f523228b309e7f0a9b7fa86cfe968f59ea0248d5adb66aa039",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "SendEmailLogGroup725E6C6D": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "SendEmailF3CD3574"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.452Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Send-Email/LogGroup/Resource"
   }
  },
  "TestSchedulerServiceRoleAF89168E": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.455Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Test-Scheduler/ServiceRole/Resource"
   }
  },
  "TestSchedulerServiceRoleDefaultPolicy830BF7F4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TestSchedulerServiceRoleDefaultPolicy830BF7F4",
    "Roles": [
     {
      "Ref": "TestSchedulerServiceRoleAF89168E"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Test-Scheduler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "TestSchedulerA5F4DF07": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "f5339963bde1aec253714a5487caaa9dd4123a6d1d57485c33f3276ff499b081.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "Test-Scheduler",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "TestSchedulerServiceRoleAF89168E",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.455Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "TestSchedulerServiceRoleDefaultPolicy830BF7F4",
    "TestSchedulerServiceRoleAF89168E"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Test-Scheduler/Resource",
    "aws:asset:path": "asset.f5339963bde1aec253714a5487caaa9dd4123a6d1d57485c33f3276ff499b081",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "TestSchedulerLogGroup0902EB2E": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "TestSchedulerA5F4DF07"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.455Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/Test-Scheduler/LogGroup/Resource"
   }
  },
  "utilsServiceRoleFC839C56": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.458Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/utils/ServiceRole/Resource"
   }
  },
  "utilsServiceRoleDefaultPolicyC5D717F1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "utilsServiceRoleDefaultPolicyC5D717F1",
    "Roles": [
     {
      "Ref": "utilsServiceRoleFC839C56"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/utils/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "utilsF6FC768D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "23e8ba92ec920c9c82a8c81e92fa0d090de127524e4dceb88d1630ad25763b9c.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "utils",
    "Handler": "arn-resolver.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "utilsServiceRoleFC839C56",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.458Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "utilsServiceRoleDefaultPolicyC5D717F1",
    "utilsServiceRoleFC839C56"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/utils/Resource",
    "aws:asset:path": "asset.23e8ba92ec920c9c82a8c81e92fa0d090de127524e4dceb88d1630ad25763b9c",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "utilsLogGroupE4CE2C2E": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "utilsF6FC768D"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.458Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/utils/LogGroup/Resource"
   }
  },
  "verifyNewDomainValidServiceRole9FFA56C5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.460Z"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/verifyNewDomainValid/ServiceRole/Resource"
   }
  },
  "verifyNewDomainValidServiceRoleDefaultPolicyAFA5E5F7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "EmailProcessQueue10E28519",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "emailattachments34C069DE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "storage8D9329BE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "emailattachments34C069DE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "storage8D9329BE",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "verifyNewDomainValidServiceRoleDefaultPolicyAFA5E5F7",
    "Roles": [
     {
      "Ref": "verifyNewDomainValidServiceRole9FFA56C5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/verifyNewDomainValid/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "verifyNewDomainValidD2240338": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "9b8a0919fcde62d5d9abc4c7e7625a3d425abdc11f3d57635524cd3b2da15954.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "GenerateEV",
      "PROCESSING_LAMBDA_ARN": "Send-Email",
      "QUEUE_URL": {
       "Ref": "EmailProcessQueue10E28519"
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "COGNITO_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::GetAtt": [
        "UserPoolClientDescribeCognitoUserPoolClient19F18FF0",
        "UserPoolClient.ClientSecret"
       ]
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "DBDelete",
      "DB_SELECT_FUNCTION_NAME": "DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "verifyNewDomainValid",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "verifyNewDomainValidServiceRole9FFA56C5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.460Z"
     }
    ],
    "Timeout": 60
   },
   "DependsOn": [
    "verifyNewDomainValidServiceRoleDefaultPolicyAFA5E5F7",
    "verifyNewDomainValidServiceRole9FFA56C5"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/verifyNewDomainValid/Resource",
    "aws:asset:path": "asset.9b8a0919fcde62d5d9abc4c7e7625a3d425abdc11f3d57635524cd3b2da15954",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "verifyNewDomainValidLogGroup8E633C98": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "verifyNewDomainValidD2240338"
       }
      ]
     ]
    },
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "DeploymentReason",
      "Value": "Changed"
     },
     {
      "Key": "LastDeployment",
      "Value": "2025-06-30T06:00:03.460Z"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/verifyNewDomainValid/LogGroup/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd22872D164C4C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "c099eb4e32cbf1c3da9c45a3b280efe2bed38d27d74aa72702b67d86d1b52354.zip"
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Timeout": 120
   },
   "DependsOn": [
    "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Resource",
    "aws:asset:path": "asset.c099eb4e32cbf1c3da9c45a3b280efe2bed38d27d74aa72702b67d86d1b52354",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd2287LogGroup449FB7C2": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AWS679f53fac002430cb0da5b7982bd22872D164C4C"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/LogGroup/Resource"
   }
  },
  "ApiGateway11E7F47B": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "ACS API Gateway for dev environment",
    "Name": "dev-ACS-API"
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Resource"
   }
  },
  "ApiGatewayDeploymentA26796E8351bafec6a35f1668a6c2a19ee4d027a": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "ACS API Gateway for dev environment",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "DependsOn": [
    "ApiGatewayapiaigenerateevOPTIONS3D4B4460",
    "ApiGatewayapiaigenerateevPOST26794C09",
    "ApiGatewayapiaigenerateev3ED15989",
    "ApiGatewayapiaillmresponseOPTIONSB64AC7D0",
    "ApiGatewayapiaillmresponsePOST6F569996",
    "ApiGatewayapiaillmresponse4AA272C6",
    "ApiGatewayapiaiOPTIONS2195AA2B",
    "ApiGatewayapiaiB2F740A9",
    "ApiGatewayapiauthauthorizeOPTIONSBE835974",
    "ApiGatewayapiauthauthorizePOST83BC3ADB",
    "ApiGatewayapiauthauthorize4495A9EB",
    "ApiGatewayapiauthcreatesessionOPTIONS12FEBF56",
    "ApiGatewayapiauthcreatesessionPOST78B9DE70",
    "ApiGatewayapiauthcreatesessionC9D7DC9C",
    "ApiGatewayapiauthloginOPTIONS1D6CCE16",
    "ApiGatewayapiauthloginPOST17E08A28",
    "ApiGatewayapiauthlogin8197054C",
    "ApiGatewayapiauthOPTIONS6C3BD7A8",
    "ApiGatewayapiauthC228EEA1",
    "ApiGatewayapicorsallowOPTIONSB46556FD",
    "ApiGatewayapicorsallowC9054E53",
    "ApiGatewayapicorsgetGETABD03DED",
    "ApiGatewayapicorsgetOPTIONSBD1CE642",
    "ApiGatewayapicorsget11D4CCFC",
    "ApiGatewayapicorsOPTIONS3696FB7B",
    "ApiGatewayapicors259CBC91",
    "ApiGatewayapidbbatchselectOPTIONS01897D99",
    "ApiGatewayapidbbatchselectPOST5FFF3E66",
    "ApiGatewayapidbbatchselect2AE4B5B4",
    "ApiGatewayapidbdeleteOPTIONS86A65932",
    "ApiGatewayapidbdeletePOST4FCD5D4F",
    "ApiGatewayapidbdelete3A0FCAB8",
    "ApiGatewayapidbOPTIONS210A3634",
    "ApiGatewayapidb8AC11C9F",
    "ApiGatewayapidbselectOPTIONSB2779854",
    "ApiGatewayapidbselectPOST9F6BB044",
    "ApiGatewayapidbselect8B813CB0",
    "ApiGatewayapidbupdateOPTIONSC58DC117",
    "ApiGatewayapidbupdatePOST247FDD32",
    "ApiGatewayapidbupdate3B60D9CB",
    "ApiGatewayapiemailgenerateOPTIONS6BAC8F2B",
    "ApiGatewayapiemailgeneratePOST075F9C21",
    "ApiGatewayapiemailgenerate2C9218EB",
    "ApiGatewayapiemailOPTIONS57075724",
    "ApiGatewayapiemailprocessqueueOPTIONS4780822C",
    "ApiGatewayapiemailprocessqueuePOSTA6D34CBA",
    "ApiGatewayapiemailprocessqueue7EF27B37",
    "ApiGatewayapiemail3D45AE45",
    "ApiGatewayapiemailsendOPTIONSAECA0C24",
    "ApiGatewayapiemailsendPOST7298B03B",
    "ApiGatewayapiemailsend411C398E",
    "ApiGatewayapiOPTIONSA7CF6F65",
    "ApiGatewayapiorganizationscrudOPTIONSEE822688",
    "ApiGatewayapiorganizationscrudPOSTDD1A5971",
    "ApiGatewayapiorganizationscrudBAC6FEA1",
    "ApiGatewayapiorganizationsmembersOPTIONSC2748E9B",
    "ApiGatewayapiorganizationsmembersPOST5659EA33",
    "ApiGatewayapiorganizationsmembers93EC0B7E",
    "ApiGatewayapiorganizationsOPTIONS130E7B8C",
    "ApiGatewayapiorganizations6264A445",
    "ApiGatewayapiparseeventOPTIONS9670419E",
    "ApiGatewayapiparseeventPOST07B83786",
    "ApiGatewayapiparseevent10D63FC9",
    "ApiGatewayapiratelimitaiOPTIONS37483AA4",
    "ApiGatewayapiratelimitaiPOST394A3E62",
    "ApiGatewayapiratelimitaiEBD274E4",
    "ApiGatewayapiratelimitawsOPTIONS5E836885",
    "ApiGatewayapiratelimitawsPOSTF6F1EC9C",
    "ApiGatewayapiratelimitaws89854A3B",
    "ApiGatewayapiratelimitOPTIONS61AC2C5F",
    "ApiGatewayapiratelimitF4921C8E",
    "ApiGatewayapiBD54C415",
    "ApiGatewayapisescheckdomainstatusOPTIONS4EE27E70",
    "ApiGatewayapisescheckdomainstatusPOSTBC2F81AC",
    "ApiGatewayapisescheckdomainstatus20BD42DD",
    "ApiGatewayapisescreatedkimrecordsOPTIONS08A2E1A3",
    "ApiGatewayapisescreatedkimrecordsPOST1F395634",
    "ApiGatewayapisescreatedkimrecords8A276C3C",
    "ApiGatewayapisescreateidentityOPTIONSBCD2D673",
    "ApiGatewayapisescreateidentityPOSTCF434FF1",
    "ApiGatewayapisescreateidentity8B7B6F58",
    "ApiGatewayapisesOPTIONS6E93D833",
    "ApiGatewayapises91DCF212",
    "ApiGatewayapisesverifydomainOPTIONS4FE3316C",
    "ApiGatewayapisesverifydomainPOST006D8780",
    "ApiGatewayapisesverifydomainC183E4F1",
    "ApiGatewayapitestOPTIONS4004C513",
    "ApiGatewayapitestA53AA846",
    "ApiGatewayapitestschedulerOPTIONS49DA224A",
    "ApiGatewayapitestschedulerPOST4C185994",
    "ApiGatewayapitestscheduler660AE243",
    "ApiGatewayapithreadsgetallGET06443B20",
    "ApiGatewayapithreadsgetallOPTIONS3D6D0015",
    "ApiGatewayapithreadsgetallB425566E",
    "ApiGatewayapithreadsgetattrsOPTIONSD52C5BDE",
    "ApiGatewayapithreadsgetattrsPOSTD24C6209",
    "ApiGatewayapithreadsgetattrs0F47B3E0",
    "ApiGatewayapithreadsgetbyidGETAD1EE89E",
    "ApiGatewayapithreadsgetbyidOPTIONSF2AAC177",
    "ApiGatewayapithreadsgetbyidBCFCE577",
    "ApiGatewayapithreadsOPTIONS073161E3",
    "ApiGatewayapithreadsA4959447",
    "ApiGatewayapiusersconversationsGET0D56F31C",
    "ApiGatewayapiusersconversationsOPTIONS86783C55",
    "ApiGatewayapiusersconversations11879819",
    "ApiGatewayapiusersdeleteDELETE9097F6A7",
    "ApiGatewayapiusersdeleteOPTIONS413E5559",
    "ApiGatewayapiusersdeleteC19794DF",
    "ApiGatewayapiusersOPTIONSA1E7ECC9",
    "ApiGatewayapiusersprocessnewOPTIONSF6A24980",
    "ApiGatewayapiusersprocessnewPOST0524CFBB",
    "ApiGatewayapiusersprocessnew856112EC",
    "ApiGatewayapiusers7B4BB47E",
    "ApiGatewayOPTIONSFAD6DF6F"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Deployment/Resource"
   }
  },
  "ApiGatewayDeploymentStagedev5A0070C9": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "ApiGatewayDeploymentA26796E8351bafec6a35f1668a6c2a19ee4d027a"
    },
    "MethodSettings": [
     {
      "DataTraceEnabled": true,
      "HttpMethod": "*",
      "LoggingLevel": "INFO",
      "ResourcePath": "/*"
     }
    ],
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    },
    "StageName": "dev"
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/DeploymentStage.dev/Resource"
   }
  },
  "ApiGatewayOPTIONSFAD6DF6F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "ApiGateway11E7F47B",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiBD54C415": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ApiGateway11E7F47B",
      "RootResourceId"
     ]
    },
    "PathPart": "api",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/Resource"
   }
  },
  "ApiGatewayapiOPTIONSA7CF6F65": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiauthC228EEA1": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "auth",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/Resource"
   }
  },
  "ApiGatewayapiauthOPTIONS6C3BD7A8": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiauthC228EEA1"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiauthlogin8197054C": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiauthC228EEA1"
    },
    "PathPart": "login",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/Resource"
   }
  },
  "ApiGatewayapiauthloginOPTIONS1D6CCE16": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiauthlogin8197054C"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiauthloginPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiauthlogin0D414F96": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "LoginUserAD11EC26",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/auth/login"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login"
   }
  },
  "ApiGatewayapiauthloginPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiauthlogin50ADCAC2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "LoginUserAD11EC26",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/auth/login"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login"
   }
  },
  "ApiGatewayapiauthloginPOST17E08A28": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "LoginUserAD11EC26",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiauthlogin8197054C"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/Resource"
   }
  },
  "ApiGatewayapiauthauthorize4495A9EB": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiauthC228EEA1"
    },
    "PathPart": "authorize",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/Resource"
   }
  },
  "ApiGatewayapiauthauthorizeOPTIONSBE835974": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiauthauthorize4495A9EB"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiauthauthorizePOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiauthauthorizeE9C4D8EE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AuthorizeD8507075",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/auth/authorize"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize"
   }
  },
  "ApiGatewayapiauthauthorizePOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiauthauthorize69C2918C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AuthorizeD8507075",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/auth/authorize"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize"
   }
  },
  "ApiGatewayapiauthauthorizePOST83BC3ADB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AuthorizeD8507075",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiauthauthorize4495A9EB"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/Resource"
   }
  },
  "ApiGatewayapiauthcreatesessionC9D7DC9C": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiauthC228EEA1"
    },
    "PathPart": "create-session",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/Resource"
   }
  },
  "ApiGatewayapiauthcreatesessionOPTIONS12FEBF56": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiauthcreatesessionC9D7DC9C"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiauthcreatesessionPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiauthcreatesession63C225D0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateNewSession969BBFEA",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/auth/create-session"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session"
   }
  },
  "ApiGatewayapiauthcreatesessionPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiauthcreatesessionEB338425": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateNewSession969BBFEA",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/auth/create-session"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session"
   }
  },
  "ApiGatewayapiauthcreatesessionPOST78B9DE70": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateNewSession969BBFEA",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiauthcreatesessionC9D7DC9C"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/Resource"
   }
  },
  "ApiGatewayapidb8AC11C9F": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "db",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/Resource"
   }
  },
  "ApiGatewayapidbOPTIONS210A3634": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidb8AC11C9F"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/OPTIONS/Resource"
   }
  },
  "ApiGatewayapidbselect8B813CB0": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapidb8AC11C9F"
    },
    "PathPart": "select",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/select/Resource"
   }
  },
  "ApiGatewayapidbselectOPTIONSB2779854": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbselect8B813CB0"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/select/OPTIONS/Resource"
   }
  },
  "ApiGatewayapidbselectPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbselect158E1DDD": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBSelectE0E36FBC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/db/select"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select"
   }
  },
  "ApiGatewayapidbselectPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbselect40245CFD": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBSelectE0E36FBC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/db/select"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select"
   }
  },
  "ApiGatewayapidbselectPOST9F6BB044": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DBSelectE0E36FBC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbselect8B813CB0"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/Resource"
   }
  },
  "ApiGatewayapidbupdate3B60D9CB": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapidb8AC11C9F"
    },
    "PathPart": "update",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/update/Resource"
   }
  },
  "ApiGatewayapidbupdateOPTIONSC58DC117": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbupdate3B60D9CB"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/update/OPTIONS/Resource"
   }
  },
  "ApiGatewayapidbupdatePOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbupdateCCC34459": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBUpdate593A351B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/db/update"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update"
   }
  },
  "ApiGatewayapidbupdatePOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbupdate200025D4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBUpdate593A351B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/db/update"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update"
   }
  },
  "ApiGatewayapidbupdatePOST247FDD32": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DBUpdate593A351B",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbupdate3B60D9CB"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/Resource"
   }
  },
  "ApiGatewayapidbdelete3A0FCAB8": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapidb8AC11C9F"
    },
    "PathPart": "delete",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/Resource"
   }
  },
  "ApiGatewayapidbdeleteOPTIONS86A65932": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbdelete3A0FCAB8"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/OPTIONS/Resource"
   }
  },
  "ApiGatewayapidbdeletePOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbdelete596CACF3": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBDelete6FEA0FAC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/db/delete"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete"
   }
  },
  "ApiGatewayapidbdeletePOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbdelete6AE406F3": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBDelete6FEA0FAC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/db/delete"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete"
   }
  },
  "ApiGatewayapidbdeletePOST4FCD5D4F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DBDelete6FEA0FAC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbdelete3A0FCAB8"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/Resource"
   }
  },
  "ApiGatewayapidbbatchselect2AE4B5B4": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapidb8AC11C9F"
    },
    "PathPart": "batch-select",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/Resource"
   }
  },
  "ApiGatewayapidbbatchselectOPTIONS01897D99": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbbatchselect2AE4B5B4"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/OPTIONS/Resource"
   }
  },
  "ApiGatewayapidbbatchselectPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbbatchselectFE6AE2C1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBBatchSelect27E57951",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/db/batch-select"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select"
   }
  },
  "ApiGatewayapidbbatchselectPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapidbbatchselectAC82FE62": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DBBatchSelect27E57951",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/db/batch-select"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select"
   }
  },
  "ApiGatewayapidbbatchselectPOST5FFF3E66": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DBBatchSelect27E57951",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapidbbatchselect2AE4B5B4"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/Resource"
   }
  },
  "ApiGatewayapiemail3D45AE45": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "email",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/Resource"
   }
  },
  "ApiGatewayapiemailOPTIONS57075724": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiemail3D45AE45"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiemailsend411C398E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiemail3D45AE45"
    },
    "PathPart": "send",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/send/Resource"
   }
  },
  "ApiGatewayapiemailsendOPTIONSAECA0C24": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiemailsend411C398E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/send/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiemailsendPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiemailsendFFBDEB6F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SendEmailF3CD3574",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/email/send"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send"
   }
  },
  "ApiGatewayapiemailsendPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiemailsendA7F63EE7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SendEmailF3CD3574",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/email/send"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send"
   }
  },
  "ApiGatewayapiemailsendPOST7298B03B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "SendEmailF3CD3574",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiemailsend411C398E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/Resource"
   }
  },
  "ApiGatewayapiemailgenerate2C9218EB": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiemail3D45AE45"
    },
    "PathPart": "generate",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/Resource"
   }
  },
  "ApiGatewayapiemailgenerateOPTIONS6BAC8F2B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiemailgenerate2C9218EB"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiemailgeneratePOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiemailgenerate79286B53": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GenerateEmail27EC3141",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/email/generate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate"
   }
  },
  "ApiGatewayapiemailgeneratePOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiemailgenerate14FDD2B5": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GenerateEmail27EC3141",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/email/generate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate"
   }
  },
  "ApiGatewayapiemailgeneratePOST075F9C21": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GenerateEmail27EC3141",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiemailgenerate2C9218EB"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/Resource"
   }
  },
  "ApiGatewayapiemailprocessqueue7EF27B37": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiemail3D45AE45"
    },
    "PathPart": "process-queue",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/Resource"
   }
  },
  "ApiGatewayapiemailprocessqueueOPTIONS4780822C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiemailprocessqueue7EF27B37"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiemailprocessqueuePOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiemailprocessqueueF559E835": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProcessSQSQueuedEmailsA1F4C8CD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/email/process-queue"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue"
   }
  },
  "ApiGatewayapiemailprocessqueuePOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiemailprocessqueue8301D3C6": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProcessSQSQueuedEmailsA1F4C8CD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/email/process-queue"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue"
   }
  },
  "ApiGatewayapiemailprocessqueuePOSTA6D34CBA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ProcessSQSQueuedEmailsA1F4C8CD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiemailprocessqueue7EF27B37"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/Resource"
   }
  },
  "ApiGatewayapithreadsA4959447": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "threads",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/Resource"
   }
  },
  "ApiGatewayapithreadsOPTIONS073161E3": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapithreadsA4959447"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/OPTIONS/Resource"
   }
  },
  "ApiGatewayapithreadsgetallB425566E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapithreadsA4959447"
    },
    "PathPart": "get-all",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/Resource"
   }
  },
  "ApiGatewayapithreadsgetallOPTIONS3D6D0015": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapithreadsgetallB425566E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/OPTIONS/Resource"
   }
  },
  "ApiGatewayapithreadsgetallGETApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1GETapithreadsgetallB12DC628": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RetrieveThreadInformation724354D2",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/GET/api/threads/get-all"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all"
   }
  },
  "ApiGatewayapithreadsgetallGETApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1GETapithreadsgetallB8A9AB96": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RetrieveThreadInformation724354D2",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/GET/api/threads/get-all"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all"
   }
  },
  "ApiGatewayapithreadsgetallGET06443B20": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RetrieveThreadInformation724354D2",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapithreadsgetallB425566E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/Resource"
   }
  },
  "ApiGatewayapithreadsgetbyidBCFCE577": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapithreadsA4959447"
    },
    "PathPart": "get-by-id",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/Resource"
   }
  },
  "ApiGatewayapithreadsgetbyidOPTIONSF2AAC177": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapithreadsgetbyidBCFCE577"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/OPTIONS/Resource"
   }
  },
  "ApiGatewayapithreadsgetbyidGETApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1GETapithreadsgetbyidB2486446": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RetrieveThreadInformation724354D2",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/GET/api/threads/get-by-id"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id"
   }
  },
  "ApiGatewayapithreadsgetbyidGETApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1GETapithreadsgetbyidBF7CBDF0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RetrieveThreadInformation724354D2",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/GET/api/threads/get-by-id"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id"
   }
  },
  "ApiGatewayapithreadsgetbyidGETAD1EE89E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RetrieveThreadInformation724354D2",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapithreadsgetbyidBCFCE577"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/GET/Resource"
   }
  },
  "ApiGatewayapithreadsgetattrs0F47B3E0": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapithreadsA4959447"
    },
    "PathPart": "get-attrs",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/Resource"
   }
  },
  "ApiGatewayapithreadsgetattrsOPTIONSD52C5BDE": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapithreadsgetattrs0F47B3E0"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/OPTIONS/Resource"
   }
  },
  "ApiGatewayapithreadsgetattrsPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapithreadsgetattrs8FCA55B1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "getThreadAttrs5DADDD09",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/threads/get-attrs"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs"
   }
  },
  "ApiGatewayapithreadsgetattrsPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapithreadsgetattrs24E63AEA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "getThreadAttrs5DADDD09",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/threads/get-attrs"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs"
   }
  },
  "ApiGatewayapithreadsgetattrsPOSTD24C6209": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "getThreadAttrs5DADDD09",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapithreadsgetattrs0F47B3E0"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/POST/Resource"
   }
  },
  "ApiGatewayapiusers7B4BB47E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "users",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/Resource"
   }
  },
  "ApiGatewayapiusersOPTIONSA1E7ECC9": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiusers7B4BB47E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiusersconversations11879819": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiusers7B4BB47E"
    },
    "PathPart": "conversations",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/Resource"
   }
  },
  "ApiGatewayapiusersconversationsOPTIONS86783C55": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiusersconversations11879819"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiusersconversationsGETApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1GETapiusersconversations8A78D74C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetUserConversationsD05A38FF",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/GET/api/users/conversations"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations"
   }
  },
  "ApiGatewayapiusersconversationsGETApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1GETapiusersconversations31782D73": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetUserConversationsD05A38FF",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/GET/api/users/conversations"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations"
   }
  },
  "ApiGatewayapiusersconversationsGET0D56F31C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetUserConversationsD05A38FF",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiusersconversations11879819"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/Resource"
   }
  },
  "ApiGatewayapiusersprocessnew856112EC": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiusers7B4BB47E"
    },
    "PathPart": "process-new",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/Resource"
   }
  },
  "ApiGatewayapiusersprocessnewOPTIONSF6A24980": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiusersprocessnew856112EC"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiusersprocessnewPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiusersprocessnew46A8F977": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProcessNewUserSupabaseBC5B358F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/users/process-new"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new"
   }
  },
  "ApiGatewayapiusersprocessnewPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiusersprocessnewA6494AD8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProcessNewUserSupabaseBC5B358F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/users/process-new"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new"
   }
  },
  "ApiGatewayapiusersprocessnewPOST0524CFBB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ProcessNewUserSupabaseBC5B358F",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiusersprocessnew856112EC"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/POST/Resource"
   }
  },
  "ApiGatewayapiusersdeleteC19794DF": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiusers7B4BB47E"
    },
    "PathPart": "delete",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/Resource"
   }
  },
  "ApiGatewayapiusersdeleteOPTIONS413E5559": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiusersdeleteC19794DF"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiusersdeleteDELETEApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1DELETEapiusersdelete02A2901B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserSupabaseD4FF7308",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/DELETE/api/users/delete"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete"
   }
  },
  "ApiGatewayapiusersdeleteDELETEApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1DELETEapiusersdelete719B26C0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserSupabaseD4FF7308",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/DELETE/api/users/delete"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete"
   }
  },
  "ApiGatewayapiusersdeleteDELETE9097F6A7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteUserSupabaseD4FF7308",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiusersdeleteC19794DF"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/Resource"
   }
  },
  "ApiGatewayapiorganizations6264A445": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "organizations",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/Resource"
   }
  },
  "ApiGatewayapiorganizationsOPTIONS130E7B8C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiorganizations6264A445"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiorganizationscrudBAC6FEA1": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiorganizations6264A445"
    },
    "PathPart": "crud",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/Resource"
   }
  },
  "ApiGatewayapiorganizationscrudOPTIONSEE822688": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiorganizationscrudBAC6FEA1"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiorganizationscrudPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiorganizationscrud6A7B050E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "OrganizationsCrud7ACB6109",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/organizations/crud"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud"
   }
  },
  "ApiGatewayapiorganizationscrudPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiorganizationscrud91EEE4DE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "OrganizationsCrud7ACB6109",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/organizations/crud"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud"
   }
  },
  "ApiGatewayapiorganizationscrudPOSTDD1A5971": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "OrganizationsCrud7ACB6109",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiorganizationscrudBAC6FEA1"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/Resource"
   }
  },
  "ApiGatewayapiorganizationsmembers93EC0B7E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiorganizations6264A445"
    },
    "PathPart": "members",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/Resource"
   }
  },
  "ApiGatewayapiorganizationsmembersOPTIONSC2748E9B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiorganizationsmembers93EC0B7E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiorganizationsmembersPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiorganizationsmembers9FFB0EFE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "OrganizationsMembersFAEEE244",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/organizations/members"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members"
   }
  },
  "ApiGatewayapiorganizationsmembersPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiorganizationsmembersEAD5B5E9": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "OrganizationsMembersFAEEE244",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/organizations/members"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members"
   }
  },
  "ApiGatewayapiorganizationsmembersPOST5659EA33": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "OrganizationsMembersFAEEE244",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiorganizationsmembers93EC0B7E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/Resource"
   }
  },
  "ApiGatewayapiaiB2F740A9": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "ai",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/Resource"
   }
  },
  "ApiGatewayapiaiOPTIONS2195AA2B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiaiB2F740A9"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiaillmresponse4AA272C6": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiaiB2F740A9"
    },
    "PathPart": "llm-response",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/Resource"
   }
  },
  "ApiGatewayapiaillmresponseOPTIONSB64AC7D0": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiaillmresponse4AA272C6"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiaillmresponsePOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiaillmresponse88DDF44B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "LCPLlmResponse21157393",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/ai/llm-response"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response"
   }
  },
  "ApiGatewayapiaillmresponsePOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiaillmresponse73299D24": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "LCPLlmResponse21157393",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/ai/llm-response"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response"
   }
  },
  "ApiGatewayapiaillmresponsePOST6F569996": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "LCPLlmResponse21157393",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiaillmresponse4AA272C6"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/POST/Resource"
   }
  },
  "ApiGatewayapiaigenerateev3ED15989": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiaiB2F740A9"
    },
    "PathPart": "generate-ev",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/Resource"
   }
  },
  "ApiGatewayapiaigenerateevOPTIONS3D4B4460": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiaigenerateev3ED15989"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiaigenerateevPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiaigenerateev7EF52CC8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GenerateEV72CCC71B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/ai/generate-ev"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev"
   }
  },
  "ApiGatewayapiaigenerateevPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiaigenerateev5BC63FCA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GenerateEV72CCC71B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/ai/generate-ev"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev"
   }
  },
  "ApiGatewayapiaigenerateevPOST26794C09": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GenerateEV72CCC71B",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiaigenerateev3ED15989"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/POST/Resource"
   }
  },
  "ApiGatewayapiratelimitF4921C8E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "rate-limit",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/Resource"
   }
  },
  "ApiGatewayapiratelimitOPTIONS61AC2C5F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiratelimitF4921C8E"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiratelimitaiEBD274E4": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiratelimitF4921C8E"
    },
    "PathPart": "ai",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/Resource"
   }
  },
  "ApiGatewayapiratelimitaiOPTIONS37483AA4": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiratelimitaiEBD274E4"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiratelimitaiPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiratelimitaiED9F16EE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RateLimitAIB2954753",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/rate-limit/ai"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai"
   }
  },
  "ApiGatewayapiratelimitaiPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiratelimitai099BD860": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RateLimitAIB2954753",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/rate-limit/ai"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai"
   }
  },
  "ApiGatewayapiratelimitaiPOST394A3E62": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RateLimitAIB2954753",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiratelimitaiEBD274E4"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/Resource"
   }
  },
  "ApiGatewayapiratelimitaws89854A3B": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiratelimitF4921C8E"
    },
    "PathPart": "aws",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/Resource"
   }
  },
  "ApiGatewayapiratelimitawsOPTIONS5E836885": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiratelimitaws89854A3B"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiratelimitawsPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiratelimitawsEB0B2B05": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RateLimitAWSF1FD42E0",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/rate-limit/aws"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws"
   }
  },
  "ApiGatewayapiratelimitawsPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiratelimitaws6CE3E0A7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RateLimitAWSF1FD42E0",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/rate-limit/aws"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws"
   }
  },
  "ApiGatewayapiratelimitawsPOSTF6F1EC9C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RateLimitAWSF1FD42E0",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiratelimitaws89854A3B"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/Resource"
   }
  },
  "ApiGatewayapises91DCF212": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "ses",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/Resource"
   }
  },
  "ApiGatewayapisesOPTIONS6E93D833": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapises91DCF212"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/OPTIONS/Resource"
   }
  },
  "ApiGatewayapisescreateidentity8B7B6F58": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapises91DCF212"
    },
    "PathPart": "create-identity",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/Resource"
   }
  },
  "ApiGatewayapisescreateidentityOPTIONSBCD2D673": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisescreateidentity8B7B6F58"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/OPTIONS/Resource"
   }
  },
  "ApiGatewayapisescreateidentityPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapisescreateidentityE452AC47": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateSESIdentity4DA2E2EF",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/ses/create-identity"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity"
   }
  },
  "ApiGatewayapisescreateidentityPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapisescreateidentityFC4B47C0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateSESIdentity4DA2E2EF",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/ses/create-identity"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity"
   }
  },
  "ApiGatewayapisescreateidentityPOSTCF434FF1": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateSESIdentity4DA2E2EF",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisescreateidentity8B7B6F58"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/Resource"
   }
  },
  "ApiGatewayapisescreatedkimrecords8A276C3C": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapises91DCF212"
    },
    "PathPart": "create-dkim-records",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/Resource"
   }
  },
  "ApiGatewayapisescreatedkimrecordsOPTIONS08A2E1A3": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisescreatedkimrecords8A276C3C"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/OPTIONS/Resource"
   }
  },
  "ApiGatewayapisescreatedkimrecordsPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapisescreatedkimrecords6716BE5D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateSESDkimRecordsF84541B9",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/ses/create-dkim-records"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records"
   }
  },
  "ApiGatewayapisescreatedkimrecordsPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapisescreatedkimrecordsC015CD54": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateSESDkimRecordsF84541B9",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/ses/create-dkim-records"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records"
   }
  },
  "ApiGatewayapisescreatedkimrecordsPOST1F395634": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateSESDkimRecordsF84541B9",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisescreatedkimrecords8A276C3C"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/POST/Resource"
   }
  },
  "ApiGatewayapisescheckdomainstatus20BD42DD": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapises91DCF212"
    },
    "PathPart": "check-domain-status",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/Resource"
   }
  },
  "ApiGatewayapisescheckdomainstatusOPTIONS4EE27E70": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisescheckdomainstatus20BD42DD"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/OPTIONS/Resource"
   }
  },
  "ApiGatewayapisescheckdomainstatusPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapisescheckdomainstatus2DABE567": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CheckDomainStatusF427753C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/ses/check-domain-status"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status"
   }
  },
  "ApiGatewayapisescheckdomainstatusPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapisescheckdomainstatus3D03E0CC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CheckDomainStatusF427753C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/ses/check-domain-status"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status"
   }
  },
  "ApiGatewayapisescheckdomainstatusPOSTBC2F81AC": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CheckDomainStatusF427753C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisescheckdomainstatus20BD42DD"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/POST/Resource"
   }
  },
  "ApiGatewayapisesverifydomainC183E4F1": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapises91DCF212"
    },
    "PathPart": "verify-domain",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/Resource"
   }
  },
  "ApiGatewayapisesverifydomainOPTIONS4FE3316C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisesverifydomainC183E4F1"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/OPTIONS/Resource"
   }
  },
  "ApiGatewayapisesverifydomainPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapisesverifydomain715A6C68": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "verifyNewDomainValidD2240338",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/ses/verify-domain"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain"
   }
  },
  "ApiGatewayapisesverifydomainPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapisesverifydomain73B9C120": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "verifyNewDomainValidD2240338",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/ses/verify-domain"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain"
   }
  },
  "ApiGatewayapisesverifydomainPOST006D8780": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "verifyNewDomainValidD2240338",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapisesverifydomainC183E4F1"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/Resource"
   }
  },
  "ApiGatewayapiparseevent10D63FC9": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "parse-event",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/Resource"
   }
  },
  "ApiGatewayapiparseeventOPTIONS9670419E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiparseevent10D63FC9"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/OPTIONS/Resource"
   }
  },
  "ApiGatewayapiparseeventPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapiparseevent2B1A1F1A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ParseEvent487500D4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/parse-event"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event"
   }
  },
  "ApiGatewayapiparseeventPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapiparseevent7175E48F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ParseEvent487500D4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/parse-event"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event"
   }
  },
  "ApiGatewayapiparseeventPOST07B83786": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ParseEvent487500D4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapiparseevent10D63FC9"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/Resource"
   }
  },
  "ApiGatewayapicors259CBC91": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "cors",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/Resource"
   }
  },
  "ApiGatewayapicorsOPTIONS3696FB7B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapicors259CBC91"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/OPTIONS/Resource"
   }
  },
  "ApiGatewayapicorsallowC9054E53": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapicors259CBC91"
    },
    "PathPart": "allow",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/allow/Resource"
   }
  },
  "ApiGatewayapicorsallowOPTIONSB46556FD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapicorsallowC9054E53"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/allow/OPTIONS/Resource"
   }
  },
  "ApiGatewayapicorsget11D4CCFC": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapicors259CBC91"
    },
    "PathPart": "get",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/Resource"
   }
  },
  "ApiGatewayapicorsgetOPTIONSBD1CE642": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapicorsget11D4CCFC"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/OPTIONS/Resource"
   }
  },
  "ApiGatewayapicorsgetGETApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1GETapicorsgetDC93246F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetCorsE4E2D580",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/GET/api/cors/get"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get"
   }
  },
  "ApiGatewayapicorsgetGETApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1GETapicorsget5100EF62": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetCorsE4E2D580",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/GET/api/cors/get"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get"
   }
  },
  "ApiGatewayapicorsgetGETABD03DED": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetCorsE4E2D580",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapicorsget11D4CCFC"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/Resource"
   }
  },
  "ApiGatewayapitestA53AA846": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapiBD54C415"
    },
    "PathPart": "test",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/test/Resource"
   }
  },
  "ApiGatewayapitestOPTIONS4004C513": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapitestA53AA846"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/test/OPTIONS/Resource"
   }
  },
  "ApiGatewayapitestscheduler660AE243": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiGatewayapitestA53AA846"
    },
    "PathPart": "scheduler",
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/Resource"
   }
  },
  "ApiGatewayapitestschedulerOPTIONS49DA224A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapitestscheduler660AE243"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/OPTIONS/Resource"
   }
  },
  "ApiGatewayapitestschedulerPOSTApiPermissionAcsd2PStackDevApiGatewayE6E6DCA1POSTapitestschedulerED84AC96": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "TestSchedulerA5F4DF07",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/",
       {
        "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
       },
       "/POST/api/test/scheduler"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler"
   }
  },
  "ApiGatewayapitestschedulerPOSTApiPermissionTestAcsd2PStackDevApiGatewayE6E6DCA1POSTapitestscheduler57F62374": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "TestSchedulerA5F4DF07",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-1:872515253712:",
       {
        "Ref": "ApiGateway11E7F47B"
       },
       "/test-invoke-stage/POST/api/test/scheduler"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler"
   }
  },
  "ApiGatewayapitestschedulerPOST4C185994": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "TestSchedulerA5F4DF07",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "200"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "400"
     },
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Origin": true
      },
      "StatusCode": "500"
     }
    ],
    "ResourceId": {
     "Ref": "ApiGatewayapitestscheduler660AE243"
    },
    "RestApiId": {
     "Ref": "ApiGateway11E7F47B"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/POST/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/+2dW2/bOBqGf8vocqB6e7jLnZu22WKT1hunV0ZQ0BKjsKVIhaScdQ3994FOjt1Jih3M7JbQPBdB5PeRefje159sA7Zfzl4+fzF7/ou498+y/Oszrdaz3TKI7Gsq7v3nXWYLo4Kd7T556RbW6tUuqYfDD6KUyUnya5ImXuqbpSrMp+qtEWst8+QkuFqmiVeFeW/mWgkvfXKyS2QplO5pkyY+CJMLl89DcGpdh+6cJk0q4f29dfnCapVt2/uVypxLU4TbYUYn72rl5Lm9ly4TXo4TDvqnqnpUf6MKFfx34nJbrq32+1WJLLO1CZcysxvptsnJy/bU0m6EHheUOBmEMklznZ7emLE46XhwqpU04aBWw6rrI35QwEIa6USQS5k5Gcb1iTrcvtP2vqucyEvVzzQUZzyrfkJbumq/JTuv29Ltkpv9cHW4tU59E0FZc2pzeeaE2c+sykqrTIXvQGtZZqvWpm7ZmdB6LbKvn5zupea4IP0+m1SLcp2L2W6pTKFlsOZdbbJ24rZEtcqH4frTFrWrrB8rU8rSuu1SfRuFoEpp6zDmwOoRaFucOVtXw82bYYqDKm+q7OFoWa+NDPud2Hw861aYXEs3TlCbdsZ+d2lrQ34hg8hFEMnJqj2lLcz14yj5NblurtOD3T6yqsMZvp/9YFk/LMQw/VuzUc6aUraGPawACAQCgf83SJ8HAoHAaUP6PBAIBE4b0ueBQCBw2pA+DwQCgdOG9HkgEAicNqTPA4FA4LQhfR4IBAKnDenzQCAQOG1InwcCgcBpQ/o8EAgEThvS54FAIHDakD4PBAKB04b0eSAQCJw2pM8DgUDgtCF9HggEAqcN6fNAIBA4bUifBwKBwGlD+jwQCAROG9LngUAgcNqQPg8EAoHThvR5IBAInDakzwOBQOC0IX0eCAQCpw3p80AgEDhtSJ8HAoHAaUP6PBAIBE4b0ueBQCBw2pA+DwQCgdOG9HkgEAicNqTPA4FA4LThD7t1mjirR6BtceZsXQ03H7lAbKrs4WhZr40M/vfXh+MLx+FFpblOT2/Mu2Hg9nghXam8V9Y0qRLlbLewWmXb1S7xQQTZ7scfXleWB+pq1/TbD0Fkt1f2stvKal+Vx+R2SX/sHk9Pi/ynZKyIRsaKaGSsiEbGimhkrIhGxopoZKyIRsaKaGSsiEbGimhkrIhGxopoZKyIRsaKaGSsiEbGimhkrIhGxopoZKyIRsaKaGSsiEbGimhkrIhGxopoZKyIRsaKaGSsiEbGimhkrIhGxopY5O5DBf3nBtK24KtdIryvS5m/3iYnu6RyymSqEnqeZbY24ycf+nPaO8y7jyMMHzNISmFEIfNuQCW7SY607dwN544rujik/8X5V3YxLunhPs1BcN4brYzcs+NUPQV/PC40BkosIzECSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AkosIzQCSiwjNAJKLCM0AvqTYvlkVrovOGzHb9J8a0Rp8/XsSqy1fC28XF2n/tVs97rOvsqw2iXr7uCDKOWwvI10Xlkj8+QkuFqmiTSZ21bDSpevPl/MP8zP3r5J0mStbfZ1Ua+1yuZZJr0fhnCytJuH4iROBqFMu/U62DdSyyA/rr/IrP1KxhuhvWz3E8dCutr1xUn7f33RmtTf+dnu37Ws2y+MvGv/H6zVySBNu7KFdMrmg6W/P2+jvForrcL2SpXS1uEH90+TXIr8XIYgXTdvm6m7/qDDpfjPpcyk2sjTfbyaJzfdb60bqEn9q8/Cexn8bN7+S7Ut/Gx3boszZ+tqtUv0cLhfe7sbRMQYxC7JY1ibVFSqEEHei+1sdyl9mFdqtUtcf3Tw4Mulz5yq9j23VW5ErcOpdX7h5I1WxW342J3g2web0Nref3SqUGbsKJ10IcOtzY+kf0qRS3cknTqZtw9qoX3fwZp2wkrb7cEUPojisEFoWxTKFOdyI3Vykrz/8O5ju04RxJUTmXxr2j4+dMRm6PT9RtM33djtN92udo/sVVTqodkIZR5O9/tSdxe3c1uoTOj3+XcXPXR0dHR0dHR0dPSfqXdPfh+exabL9ql099R3lIbnu3/qOXY3Szd0eim9rV3Wv43SvtOS9i8E+hcbHRpmuA2h6tkgKBNk4cTB03F78DKjDrfWqW/SHd96P957lLr7X22r8bVR+5z+X3J7Ke9q5doVd+9hPHV+mpTdki6lr6zxwztMPohQ+1ObP7yV0eOFcKKUYXxR01w3gxMXR6P80UFSikWxKNZUivWX7i39H53719UsljEIOkEn6ASdoMcQ0mi8I+gUi64QySM6Gu8IOkEn6ASdoEcwBkEn6ASdoFMsugJdgaATdIJO0Ak6QSfoFIuuEMEjOhrvCDpBJ+gEnaBHMAZBp1gRF4uuQFcg6ASdoBN0gv6zvSPoFIuuEMkjOhrvCDpBJ+gEnWLRFegKBJ2gE/S/fdApFl2BrkDQCXoEYxB0ihVxsegKdAWCTtAJOkEn6D/bO4JO0Ak6QSfoEYxB0CkWxZpGsWihtNC/RdApFl0h6q7Q/fpJP8T+509Wu6QS7uHnVSoRbhfChX2xoFAodAJ0/IHVrvE1TZrVPtjy83g987P5vT/ttPGk9Pjmqhu0/zsaLH3sjJ/xd512PwHd/sSVMkW7xI91qOrQpMbmcvbF/2Pz8vnsxYvZi1++eKWeudoEVcrZZf//N7QwpdO5uAEA"
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ApiGatewayEndpoint5AA8EC3A": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "ApiGateway11E7F47B"
      },
      ".execute-api.us-west-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
      },
      "/"
     ]
    ]
   }
  },
  "ApiGatewayUrl": {
   "Description": "Main API Gateway URL",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "ApiGateway11E7F47B"
      },
      ".execute-api.us-west-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "ApiGatewayDeploymentStagedev5A0070C9"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "Acsd2PStack-Dev-ApiGatewayUrl"
   }
  },
  "UserPoolId": {
   "Description": "Cognito User Pool ID",
   "Value": {
    "Ref": "UserPool6BA7E5F2"
   },
   "Export": {
    "Name": "Acsd2PStack-Dev-UserPoolId"
   }
  },
  "UserPoolClientId": {
   "Description": "Cognito User Pool Client ID",
   "Value": {
    "Ref": "UserPoolClient2F5918F7"
   },
   "Export": {
    "Name": "Acsd2PStack-Dev-UserPoolClientId"
   }
  },
  "EmailProcessQueueUrl": {
   "Description": "Email Process Queue URL",
   "Value": {
    "Ref": "EmailProcessQueue10E28519"
   },
   "Export": {
    "Name": "Acsd2PStack-Dev-EmailProcessQueueUrl"
   }
  },
  "LambdaFunctionCount": {
   "Description": "Number of Lambda functions deployed",
   "Value": "31",
   "Export": {
    "Name": "Acsd2PStack-Dev-LambdaFunctionCount"
   }
  },
  "DynamoDBTableCount": {
   "Description": "Number of DynamoDB tables deployed",
   "Value": "5",
   "Export": {
    "Name": "Acsd2PStack-Dev-DynamoDBTableCount"
   }
  },
  "S3BucketCount": {
   "Description": "Number of S3 buckets deployed",
   "Value": "2",
   "Export": {
    "Name": "Acsd2PStack-Dev-S3BucketCount"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}