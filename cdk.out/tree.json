{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.201.0"},"children":{"Acsd2PStack-Dev":{"id":"Acsd2PStack-Dev","path":"Acsd2PStack-Dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"UserPool":{"id":"UserPool","path":"Acsd2PStack-Dev/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.201.0","metadata":[{"userPoolName":"*","selfSignUpEnabled":true,"signInAliases":{"email":true},"standardAttributes":{},"passwordPolicy":{"minLength":"*","requireLowercase":true,"requireUppercase":true,"requireDigits":true,"requireSymbols":true},"accountRecovery":2,"removalPolicy":"retain"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"dev-UserPool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"Acsd2PStack-Dev/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.201.0","metadata":[{"userPool":"*","userPoolClientName":"*","generateSecret":true,"authFlows":{"adminUserPassword":true,"userPassword":true,"userSrp":true},"oAuth":{"flows":{"authorizationCodeGrant":true,"implicitCodeGrant":true},"scopes":"*","callbackUrls":"*"}}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile"],"callbackUrLs":["http://localhost:3000/callback","https://yourdomain.com/callback"],"clientName":"dev-UserPoolClient","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":true,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"DescribeCognitoUserPoolClient":{"id":"DescribeCognitoUserPoolClient","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.201.0"},"children":{"Provider":{"id":"Provider","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.201.0","metadata":[{"uuid":"*","lambdaPurpose":"*","memorySize":"*","timeout":"*","role":"*","logGroup":"*","functionName":"*","vpc":"*","vpcSubnets":"*","code":"*","handler":"*","runtime":"*"},{"addMetadata":["*",true]},{"addMetadata":["*","*"]}]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":["*","*","*"]},"children":{"Default":{"id":"Default","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[{"statements":"*"},{"addStatements":[{}]},{"attachToRole":["*"]},{"attachToRole":["*"]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"cognito-idp:DescribeUserPoolClient","Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}],"Version":"2012-10-17"},"policyName":"UserPoolClientDescribeCognitoUserPoolClientCustomResourcePolicy0204E3CD","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}},"UsersTable":{"id":"UsersTable","path":"Acsd2PStack-Dev/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.201.0","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"retain","pointInTimeRecovery":true}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"dev-Users"}}},"ScalingRole":{"id":"ScalingRole","path":"Acsd2PStack-Dev/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}}}},"ConversationsTable":{"id":"ConversationsTable","path":"Acsd2PStack-Dev/ConversationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.201.0","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"retain","pointInTimeRecovery":true,"sortKey":{"name":"*","type":"S"}}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ConversationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"},{"attributeName":"timestamp","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"dev-Conversations"}}},"ScalingRole":{"id":"ScalingRole","path":"Acsd2PStack-Dev/ConversationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}}}},"ThreadsTable":{"id":"ThreadsTable","path":"Acsd2PStack-Dev/ThreadsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.201.0","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"retain","pointInTimeRecovery":true,"sortKey":{"name":"*","type":"S"}}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ThreadsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"},{"attributeName":"timestamp","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"dev-Threads"}}},"ScalingRole":{"id":"ScalingRole","path":"Acsd2PStack-Dev/ThreadsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}}}},"OrganizationsTable":{"id":"OrganizationsTable","path":"Acsd2PStack-Dev/OrganizationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.201.0","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"retain","pointInTimeRecovery":true}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/OrganizationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"dev-Organizations"}}},"ScalingRole":{"id":"ScalingRole","path":"Acsd2PStack-Dev/OrganizationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}}}},"RateLimitingTable":{"id":"RateLimitingTable","path":"Acsd2PStack-Dev/RateLimitingTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.201.0","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"retain","pointInTimeRecovery":true,"sortKey":{"name":"*","type":"S"},"timeToLiveAttribute":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitingTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"key","attributeType":"S"},{"attributeName":"timestamp","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"key","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"dev-RateLimiting","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"Acsd2PStack-Dev/RateLimitingTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}}}},"StorageBucket":{"id":"StorageBucket","path":"Acsd2PStack-Dev/StorageBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.201.0","metadata":[{"bucketName":"*","versioned":true,"encryption":"S3_MANAGED","blockPublicAccess":"*","removalPolicy":"retain","autoDeleteObjects":false}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/StorageBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"dev-storage","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}}}},"EmailAttachmentsBucket":{"id":"EmailAttachmentsBucket","path":"Acsd2PStack-Dev/EmailAttachmentsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.201.0","metadata":[{"bucketName":"*","versioned":true,"encryption":"S3_MANAGED","blockPublicAccess":"*","removalPolicy":"retain","autoDeleteObjects":false}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/EmailAttachmentsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"dev-email-attachments","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}}}},"EmailProcessQueue":{"id":"EmailProcessQueue","path":"Acsd2PStack-Dev/EmailProcessQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.201.0","metadata":[{"queueName":"*","visibilityTimeout":"*","retentionPeriod":"*","removalPolicy":"retain"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/EmailProcessQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"dev-EmailProcessQueue","visibilityTimeout":300}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"memorySize":"*","timeout":"*","role":"*","logGroup":"*","functionName":"*","vpc":"*","vpcSubnets":"*","code":"*","handler":"*","runtime":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"c099eb4e32cbf1c3da9c45a3b280efe2bed38d27d74aa72702b67d86d1b52354.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","timeout":120}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AWS679f53fac002430cb0da5b7982bd22872D164C4C"}]]},"retentionInDays":731}}}}}}},"Allow-CorsFunction":{"id":"Allow-CorsFunction","path":"Acsd2PStack-Dev/Allow-CorsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Allow-CorsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Allow-CorsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-CorsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Allow-CorsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-CorsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AllowCorsFunctionServiceRoleDefaultPolicy2F40D9BA","roles":[{"Ref":"AllowCorsFunctionServiceRole4FA21473"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Allow-CorsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Allow-CorsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Allow-CorsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-CorsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"3145bf60f472090dadb252de57907ee5a7dcd713aa696bf918f82c033dc18ad3.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"}}},"functionName":"dev-Allow-Cors","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["AllowCorsFunctionServiceRole4FA21473","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Allow-CorsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-CorsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AllowCorsFunctionA1715761"}]]},"retentionInDays":731}}}}}}},"API-AuthorizerFunction":{"id":"API-AuthorizerFunction","path":"Acsd2PStack-Dev/API-AuthorizerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/API-AuthorizerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/API-AuthorizerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-AuthorizerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/API-AuthorizerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-AuthorizerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"APIAuthorizerFunctionServiceRoleDefaultPolicy3668462E","roles":[{"Ref":"APIAuthorizerFunctionServiceRole7B7B1D33"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/API-AuthorizerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/API-AuthorizerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/API-AuthorizerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-AuthorizerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"530e0033c49a79d5a5e4190b4020709bb3fdeadbc4c3065959a8484a1cbf7c50.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors"}},"functionName":"dev-API-Authorizer","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["APIAuthorizerFunctionServiceRole7B7B1D33","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/API-AuthorizerFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-AuthorizerFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"APIAuthorizerFunctionE9E30643"}]]},"retentionInDays":731}}}}}}},"AuthorizeFunction":{"id":"AuthorizeFunction","path":"Acsd2PStack-Dev/AuthorizeFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/AuthorizeFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/AuthorizeFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AuthorizeFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/AuthorizeFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AuthorizeFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AuthorizeFunctionServiceRoleDefaultPolicyB682E486","roles":[{"Ref":"AuthorizeFunctionServiceRoleD135CFF0"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/AuthorizeFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/AuthorizeFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/AuthorizeFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AuthorizeFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"719a3cd50a6dcfe528399dfb84a933f66e2da886ecab87e9719dc98c7f85324a.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer"}},"functionName":"dev-Authorize","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["AuthorizeFunctionServiceRoleD135CFF0","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/AuthorizeFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AuthorizeFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AuthorizeFunctionC3F570CF"}]]},"retentionInDays":731}}}}}}},"Check-Domain-StatusFunction":{"id":"Check-Domain-StatusFunction","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CheckDomainStatusFunctionServiceRoleDefaultPolicy0BC4AFEF","roles":[{"Ref":"CheckDomainStatusFunctionServiceRole56229AFA"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"fc11e697233a1660c9dc2ec691f85e254eb28bf74bccb7d730356a0cf452cb96.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize"}},"functionName":"dev-Check-Domain-Status","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CheckDomainStatusFunctionServiceRole56229AFA","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-StatusFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CheckDomainStatusFunction1093986F"}]]},"retentionInDays":731}}}}}}},"Create-SES-Dkim-RecordsFunction":{"id":"Create-SES-Dkim-RecordsFunction","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateSESDkimRecordsFunctionServiceRoleDefaultPolicy694682F1","roles":[{"Ref":"CreateSESDkimRecordsFunctionServiceRoleE73D39ED"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"650b56d3747d7b5fc84751a2194258f6536b1d303c6273def14a0b371f6925fd.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status"}},"functionName":"dev-Create-SES-Dkim-Records","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CreateSESDkimRecordsFunctionServiceRoleE73D39ED","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-RecordsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CreateSESDkimRecordsFunction96D74B56"}]]},"retentionInDays":731}}}}}}},"Create-SES-IdentityFunction":{"id":"Create-SES-IdentityFunction","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateSESIdentityFunctionServiceRoleDefaultPolicy06BB4480","roles":[{"Ref":"CreateSESIdentityFunctionServiceRoleCEDF34E3"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"4895a78d74bfaf839d2c858747ba587c84a8cddf6808b34779835d59feb8066d.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records"}},"functionName":"dev-Create-SES-Identity","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CreateSESIdentityFunctionServiceRoleCEDF34E3","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-IdentityFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CreateSESIdentityFunctionB7240D58"}]]},"retentionInDays":731}}}}}}},"CreateNewSessionFunction":{"id":"CreateNewSessionFunction","path":"Acsd2PStack-Dev/CreateNewSessionFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/CreateNewSessionFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/CreateNewSessionFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSessionFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/CreateNewSessionFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSessionFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateNewSessionFunctionServiceRoleDefaultPolicyF44201D0","roles":[{"Ref":"CreateNewSessionFunctionServiceRole30D23BD7"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/CreateNewSessionFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/CreateNewSessionFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/CreateNewSessionFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSessionFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"b5a5e1386ccf7ecc183b4609697bb9d87aa16334dcb9de908baf600b2d334b71.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity"}},"functionName":"dev-CreateNewSession","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CreateNewSessionFunctionServiceRole30D23BD7","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/CreateNewSessionFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSessionFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CreateNewSessionFunction3F952E8F"}]]},"retentionInDays":731}}}}}}},"DBBatchSelectFunction":{"id":"DBBatchSelectFunction","path":"Acsd2PStack-Dev/DBBatchSelectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBBatchSelectFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBBatchSelectFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelectFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBBatchSelectFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelectFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBBatchSelectFunctionServiceRoleDefaultPolicyFCE8E3EE","roles":[{"Ref":"DBBatchSelectFunctionServiceRoleA9CEBC4C"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBBatchSelectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBBatchSelectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBBatchSelectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"330e9df57cd16076983a749f4d2a2fca4c781574fd9a9d3d7ee8fdfc30e51ebe.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession"}},"functionName":"dev-DBBatchSelect","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBBatchSelectFunctionServiceRoleA9CEBC4C","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBBatchSelectFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelectFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBBatchSelectFunction4B2FD1A1"}]]},"retentionInDays":731}}}}}}},"DBDeleteFunction":{"id":"DBDeleteFunction","path":"Acsd2PStack-Dev/DBDeleteFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBDeleteFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBDeleteFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDeleteFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBDeleteFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDeleteFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBDeleteFunctionServiceRoleDefaultPolicyB8128F9B","roles":[{"Ref":"DBDeleteFunctionServiceRoleA97CC63E"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBDeleteFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBDeleteFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBDeleteFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDeleteFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"d1e11b2119d595de05590c59340353c8e1040a4fe981098563ed5752b534e5be.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect"}},"functionName":"dev-DBDelete","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBDeleteFunctionServiceRoleA97CC63E","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBDeleteFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDeleteFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBDeleteFunction9588707C"}]]},"retentionInDays":731}}}}}}},"DBSelectFunction":{"id":"DBSelectFunction","path":"Acsd2PStack-Dev/DBSelectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBSelectFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBSelectFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelectFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBSelectFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelectFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBSelectFunctionServiceRoleDefaultPolicyFE7BAB6B","roles":[{"Ref":"DBSelectFunctionServiceRoleB01B7079"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBSelectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBSelectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBSelectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"4dbb693cc9a76f9a61a46a023681a05f74018a1fddfcec1a98bcf0a3dd9f4a7c.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete"}},"functionName":"dev-DBSelect","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBSelectFunctionServiceRoleB01B7079","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBSelectFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelectFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBSelectFunction22A0CACB"}]]},"retentionInDays":731}}}}}}},"DBUpdateFunction":{"id":"DBUpdateFunction","path":"Acsd2PStack-Dev/DBUpdateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBUpdateFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBUpdateFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdateFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBUpdateFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdateFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBUpdateFunctionServiceRoleDefaultPolicyAF129649","roles":[{"Ref":"DBUpdateFunctionServiceRole3682A3C6"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBUpdateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBUpdateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBUpdateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"f337abbb6d9836e9e66a8c1202ba759cbdc7c6ec249a0d62a5601145a06c6755.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect"}},"functionName":"dev-DBUpdate","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBUpdateFunctionServiceRole3682A3C6","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBUpdateFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdateFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBUpdateFunctionA839F286"}]]},"retentionInDays":731}}}}}}},"DeleteUserSupabaseFunction":{"id":"DeleteUserSupabaseFunction","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DeleteUserSupabaseFunctionServiceRoleDefaultPolicy5269789C","roles":[{"Ref":"DeleteUserSupabaseFunctionServiceRoleA3E55199"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"df08010cee26be31a174b141db03eb40a576abfad6b1a0440bd1b8b5bf670330.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate"}},"functionName":"dev-DeleteUserSupabase","handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["DeleteUserSupabaseFunctionServiceRoleA3E55199","Arn"]},"runtime":"nodejs18.x","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabaseFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DeleteUserSupabaseFunctionC89CDFE6"}]]},"retentionInDays":731}}}}}}},"GenerateEmailFunction":{"id":"GenerateEmailFunction","path":"Acsd2PStack-Dev/GenerateEmailFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/GenerateEmailFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/GenerateEmailFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmailFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/GenerateEmailFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmailFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GenerateEmailFunctionServiceRoleDefaultPolicyA07CC635","roles":[{"Ref":"GenerateEmailFunctionServiceRoleC73070A2"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/GenerateEmailFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/GenerateEmailFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/GenerateEmailFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmailFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"9272dc705065e34aad34d35647ddbc42d81c60c19fe647b9660e5b9434538559.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase"}},"functionName":"dev-GenerateEmail","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GenerateEmailFunctionServiceRoleC73070A2","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/GenerateEmailFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmailFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GenerateEmailFunctionCF0EFEE5"}]]},"retentionInDays":731}}}}}}},"GenerateEVFunction":{"id":"GenerateEVFunction","path":"Acsd2PStack-Dev/GenerateEVFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/GenerateEVFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/GenerateEVFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEVFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/GenerateEVFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEVFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GenerateEVFunctionServiceRoleDefaultPolicyB607C62A","roles":[{"Ref":"GenerateEVFunctionServiceRoleB7FDFE4C"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/GenerateEVFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/GenerateEVFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/GenerateEVFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEVFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"7fd754f9c71e1ce35bb4503015b17ec83c6bdf9542e555730af83735a40fac04.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail"}},"functionName":"dev-GenerateEV","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GenerateEVFunctionServiceRoleB7FDFE4C","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/GenerateEVFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEVFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GenerateEVFunctionC42A9082"}]]},"retentionInDays":731}}}}}}},"Get-CorsFunction":{"id":"Get-CorsFunction","path":"Acsd2PStack-Dev/Get-CorsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Get-CorsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Get-CorsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-CorsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Get-CorsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-CorsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetCorsFunctionServiceRoleDefaultPolicy683958B9","roles":[{"Ref":"GetCorsFunctionServiceRoleD7CFF7B8"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Get-CorsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Get-CorsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Get-CorsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-CorsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"cb9875915c163f82a02d1325a3b3ab854a7f2f448a7654bbf22bb2a6f40a0203.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV"}},"functionName":"dev-Get-Cors","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GetCorsFunctionServiceRoleD7CFF7B8","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Get-CorsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-CorsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GetCorsFunction67994118"}]]},"retentionInDays":731}}}}}}},"getThreadAttrsFunction":{"id":"getThreadAttrsFunction","path":"Acsd2PStack-Dev/getThreadAttrsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/getThreadAttrsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/getThreadAttrsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/getThreadAttrsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"getThreadAttrsFunctionServiceRoleDefaultPolicy667812CA","roles":[{"Ref":"getThreadAttrsFunctionServiceRole31C95CB9"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/getThreadAttrsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/getThreadAttrsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/getThreadAttrsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"e58f06622cf92ee06cd57d7a0d7dd2bab338d7138e0343414f0bb006203db86d.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors"}},"functionName":"dev-getThreadAttrs","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["getThreadAttrsFunctionServiceRole31C95CB9","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/getThreadAttrsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"getThreadAttrsFunctionB6F2A7CB"}]]},"retentionInDays":731}}}}}}},"GetUserConversationsFunction":{"id":"GetUserConversationsFunction","path":"Acsd2PStack-Dev/GetUserConversationsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/GetUserConversationsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/GetUserConversationsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversationsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/GetUserConversationsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversationsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetUserConversationsFunctionServiceRoleDefaultPolicyD8215E28","roles":[{"Ref":"GetUserConversationsFunctionServiceRoleA11D6D5E"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/GetUserConversationsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/GetUserConversationsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/GetUserConversationsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversationsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"11378a1ffde73836fa84321b9429dc2880b6eea1dde60fb57fdcd34d19b2b896.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs"}},"functionName":"dev-GetUserConversations","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GetUserConversationsFunctionServiceRoleA11D6D5E","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/GetUserConversationsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversationsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GetUserConversationsFunction8BC8F605"}]]},"retentionInDays":731}}}}}}},"LCPLlmResponseFunction":{"id":"LCPLlmResponseFunction","path":"Acsd2PStack-Dev/LCPLlmResponseFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"LCPLlmResponseFunctionServiceRoleDefaultPolicy95C07D76","roles":[{"Ref":"LCPLlmResponseFunctionServiceRole82F1A00B"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"93329a1b5d09d4689f5ca7d71b8b6e369398b1007b39b26df00ac4b1a1b3352b.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations"}},"functionName":"dev-LCPLlmResponse","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["LCPLlmResponseFunctionServiceRole82F1A00B","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponseFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"LCPLlmResponseFunctionF4F11285"}]]},"retentionInDays":731}}}}}}},"LoginUserFunction":{"id":"LoginUserFunction","path":"Acsd2PStack-Dev/LoginUserFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/LoginUserFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/LoginUserFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUserFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/LoginUserFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUserFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"LoginUserFunctionServiceRoleDefaultPolicyB2F5FFBB","roles":[{"Ref":"LoginUserFunctionServiceRoleA8D22722"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/LoginUserFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/LoginUserFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/LoginUserFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUserFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"3a7eaf2517d8c536d641fabd37fecf8433a4a0b8361bc852628d22cf8b2f7e6b.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse"}},"functionName":"dev-LoginUser","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["LoginUserFunctionServiceRoleA8D22722","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/LoginUserFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUserFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"LoginUserFunction917F38A7"}]]},"retentionInDays":731}}}}}}},"Organizations-CrudFunction":{"id":"Organizations-CrudFunction","path":"Acsd2PStack-Dev/Organizations-CrudFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Organizations-CrudFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Organizations-CrudFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-CrudFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Organizations-CrudFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-CrudFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"OrganizationsCrudFunctionServiceRoleDefaultPolicy70220EEE","roles":[{"Ref":"OrganizationsCrudFunctionServiceRole38916DF7"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Organizations-CrudFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Organizations-CrudFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Organizations-CrudFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-CrudFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"79f0d1a742b3e17699028e9d6ea043933a9c25a12ae8bf9162b87cad66125470.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser"}},"functionName":"dev-Organizations-Crud","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["OrganizationsCrudFunctionServiceRole38916DF7","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Organizations-CrudFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-CrudFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"OrganizationsCrudFunctionB7E9984C"}]]},"retentionInDays":731}}}}}}},"Organizations-MembersFunction":{"id":"Organizations-MembersFunction","path":"Acsd2PStack-Dev/Organizations-MembersFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Organizations-MembersFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Organizations-MembersFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-MembersFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Organizations-MembersFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-MembersFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"OrganizationsMembersFunctionServiceRoleDefaultPolicyA1E17C10","roles":[{"Ref":"OrganizationsMembersFunctionServiceRole50384FF1"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Organizations-MembersFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Organizations-MembersFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Organizations-MembersFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-MembersFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"b9c9a01821101631834d5f35fd9cd224ab0e763b8320e97b9e704860af2822ed.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud"}},"functionName":"dev-Organizations-Members","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["OrganizationsMembersFunctionServiceRole50384FF1","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Organizations-MembersFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-MembersFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"OrganizationsMembersFunctionDE0053AA"}]]},"retentionInDays":731}}}}}}},"ParseEventFunction":{"id":"ParseEventFunction","path":"Acsd2PStack-Dev/ParseEventFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/ParseEventFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/ParseEventFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEventFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/ParseEventFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEventFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ParseEventFunctionServiceRoleDefaultPolicy57F7AC66","roles":[{"Ref":"ParseEventFunctionServiceRoleF8D3EAE8"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/ParseEventFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/ParseEventFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/ParseEventFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEventFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"da34e10f08cf6eb65ae8cc02780811bc593ac2e511af7bc7d63932e719e67817.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members"}},"functionName":"dev-ParseEvent","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["ParseEventFunctionServiceRoleF8D3EAE8","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/ParseEventFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEventFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ParseEventFunction3795DCE1"}]]},"retentionInDays":731}}}}}}},"Process-SQS-Queued-EmailsFunction":{"id":"Process-SQS-Queued-EmailsFunction","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ProcessSQSQueuedEmailsFunctionServiceRoleDefaultPolicy7D29642C","roles":[{"Ref":"ProcessSQSQueuedEmailsFunctionServiceRole3C42BF5C"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"6425e3e71aa7dcf9734a918cf4b200aecc5647d67d3928b9e0ae4ea78611af61.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent"}},"functionName":"dev-Process-SQS-Queued-Emails","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["ProcessSQSQueuedEmailsFunctionServiceRole3C42BF5C","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-EmailsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ProcessSQSQueuedEmailsFunction1F1D3827"}]]},"retentionInDays":731}}}}}}},"ProcessNewUserSupabaseFunction":{"id":"ProcessNewUserSupabaseFunction","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ProcessNewUserSupabaseFunctionServiceRoleDefaultPolicyB180236E","roles":[{"Ref":"ProcessNewUserSupabaseFunctionServiceRole1CBFCF48"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"1fda529581499fc50365c40a1738a2bac02d48ce561923ac9486016cae0eedb6.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails"}},"functionName":"dev-ProcessNewUserSupabase","handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["ProcessNewUserSupabaseFunctionServiceRole1CBFCF48","Arn"]},"runtime":"nodejs18.x","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabaseFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ProcessNewUserSupabaseFunction2982DD26"}]]},"retentionInDays":731}}}}}}},"RateLimitAIFunction":{"id":"RateLimitAIFunction","path":"Acsd2PStack-Dev/RateLimitAIFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/RateLimitAIFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/RateLimitAIFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAIFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/RateLimitAIFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAIFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"RateLimitAIFunctionServiceRoleDefaultPolicy34DA06AF","roles":[{"Ref":"RateLimitAIFunctionServiceRole78F58F90"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/RateLimitAIFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/RateLimitAIFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/RateLimitAIFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAIFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"cc890be28a8a8506367201a310e91637eb24a5046daa4bf5d71710f02acc57fb.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails","PROCESSNEWUSERSUPABASE_FUNCTION_NAME":"dev-ProcessNewUserSupabase"}},"functionName":"dev-RateLimitAI","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["RateLimitAIFunctionServiceRole78F58F90","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/RateLimitAIFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAIFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"RateLimitAIFunction2732CE5C"}]]},"retentionInDays":731}}}}}}},"RateLimitAWSFunction":{"id":"RateLimitAWSFunction","path":"Acsd2PStack-Dev/RateLimitAWSFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/RateLimitAWSFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/RateLimitAWSFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWSFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/RateLimitAWSFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWSFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"RateLimitAWSFunctionServiceRoleDefaultPolicyD99E6984","roles":[{"Ref":"RateLimitAWSFunctionServiceRole19796370"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/RateLimitAWSFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/RateLimitAWSFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/RateLimitAWSFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWSFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"980b4dccb82bb9b8e1ac6899d05a508fde98853738864dd4a8491548d1be05a4.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails","PROCESSNEWUSERSUPABASE_FUNCTION_NAME":"dev-ProcessNewUserSupabase","RATELIMITAI_FUNCTION_NAME":"dev-RateLimitAI"}},"functionName":"dev-RateLimitAWS","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["RateLimitAWSFunctionServiceRole19796370","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/RateLimitAWSFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWSFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"RateLimitAWSFunctionCAFEA2B5"}]]},"retentionInDays":731}}}}}}},"Retrieve-Thread-InformationFunction":{"id":"Retrieve-Thread-InformationFunction","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"RetrieveThreadInformationFunctionServiceRoleDefaultPolicy1C747499","roles":[{"Ref":"RetrieveThreadInformationFunctionServiceRoleF5AAEABF"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"bfb93a5f5b5bc564220730eb94471e283b359103bd277c34aac3d20d82ffab8f.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails","PROCESSNEWUSERSUPABASE_FUNCTION_NAME":"dev-ProcessNewUserSupabase","RATELIMITAI_FUNCTION_NAME":"dev-RateLimitAI","RATELIMITAWS_FUNCTION_NAME":"dev-RateLimitAWS"}},"functionName":"dev-Retrieve-Thread-Information","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["RetrieveThreadInformationFunctionServiceRoleF5AAEABF","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-InformationFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"RetrieveThreadInformationFunction0A415CE1"}]]},"retentionInDays":731}}}}}}},"Send-EmailFunction":{"id":"Send-EmailFunction","path":"Acsd2PStack-Dev/Send-EmailFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Send-EmailFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Send-EmailFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-EmailFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Send-EmailFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-EmailFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"SendEmailFunctionServiceRoleDefaultPolicy47BC508E","roles":[{"Ref":"SendEmailFunctionServiceRole21F8C72B"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Send-EmailFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Send-EmailFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Send-EmailFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-EmailFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"36d9bde8b10be5f523228b309e7f0a9b7fa86cfe968f59ea0248d5adb66aa039.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails","PROCESSNEWUSERSUPABASE_FUNCTION_NAME":"dev-ProcessNewUserSupabase","RATELIMITAI_FUNCTION_NAME":"dev-RateLimitAI","RATELIMITAWS_FUNCTION_NAME":"dev-RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"dev-Retrieve-Thread-Information"}},"functionName":"dev-Send-Email","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["SendEmailFunctionServiceRole21F8C72B","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Send-EmailFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-EmailFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SendEmailFunction95820EF7"}]]},"retentionInDays":731}}}}}}},"Test-SchedulerFunction":{"id":"Test-SchedulerFunction","path":"Acsd2PStack-Dev/Test-SchedulerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Test-SchedulerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Test-SchedulerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-SchedulerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Test-SchedulerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-SchedulerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"TestSchedulerFunctionServiceRoleDefaultPolicy76878BBC","roles":[{"Ref":"TestSchedulerFunctionServiceRole314F3B35"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Test-SchedulerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Test-SchedulerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Test-SchedulerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-SchedulerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"537c2cb33d17c7cc8239afab53055df9eb49d96f21d64f50c622219e3fd1ccb1.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails","PROCESSNEWUSERSUPABASE_FUNCTION_NAME":"dev-ProcessNewUserSupabase","RATELIMITAI_FUNCTION_NAME":"dev-RateLimitAI","RATELIMITAWS_FUNCTION_NAME":"dev-RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"dev-Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"dev-Send-Email"}},"functionName":"dev-Test-Scheduler","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["TestSchedulerFunctionServiceRole314F3B35","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Test-SchedulerFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-SchedulerFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"TestSchedulerFunction66A427F5"}]]},"retentionInDays":731}}}}}}},"utilsFunction":{"id":"utilsFunction","path":"Acsd2PStack-Dev/utilsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/utilsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/utilsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utilsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/utilsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utilsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"utilsFunctionServiceRoleDefaultPolicyD7886D90","roles":[{"Ref":"utilsFunctionServiceRole3E4DF516"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/utilsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/utilsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/utilsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utilsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"23e8ba92ec920c9c82a8c81e92fa0d090de127524e4dceb88d1630ad25763b9c.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails","PROCESSNEWUSERSUPABASE_FUNCTION_NAME":"dev-ProcessNewUserSupabase","RATELIMITAI_FUNCTION_NAME":"dev-RateLimitAI","RATELIMITAWS_FUNCTION_NAME":"dev-RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"dev-Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"dev-Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"dev-Test-Scheduler"}},"functionName":"dev-utils","handler":"arn-resolver.handler","memorySize":256,"role":{"Fn::GetAtt":["utilsFunctionServiceRole3E4DF516","Arn"]},"runtime":"nodejs18.x","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/utilsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utilsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"utilsFunctionA4457D67"}]]},"retentionInDays":731}}}}}}},"verifyNewDomainValidFunction":{"id":"verifyNewDomainValidFunction","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::GetAtt":["OrganizationsTable01047E98","Arn"]},{"Fn::GetAtt":["RateLimitingTable259308DF","Arn"]},{"Fn::GetAtt":["ThreadsTable1D5C607C","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailAttachmentsBucket56FB991A","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageBucket19DB2FF8","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"verifyNewDomainValidFunctionServiceRoleDefaultPolicyB97EAC1B","roles":[{"Ref":"verifyNewDomainValidFunctionServiceRole7BF586F3"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"9b8a0919fcde62d5d9abc4c7e7625a3d425abdc11f3d57635524cd3b2da15954.zip"},"environment":{"variables":{"STAGE":"dev","AWS_ACCOUNT_ID":"872515253712","CDK_AWS_REGION":"us-west-1","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"dev-DBSelect","GENERATE_EV_LAMBDA_ARN":"dev-GenerateEV","PROCESSING_LAMBDA_ARN":"dev-Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"THREADS_TABLE":{"Ref":"ThreadsTable1D5C607C"},"ORGANIZATIONS_TABLE":{"Ref":"OrganizationsTable01047E98"},"RATE_LIMITING_TABLE":{"Ref":"RateLimitingTable259308DF"},"STORAGE_BUCKET":{"Ref":"StorageBucket19DB2FF8"},"EMAIL_ATTACHMENTS_BUCKET":{"Ref":"EmailAttachmentsBucket56FB991A"},"ALLOW_CORS_FUNCTION_NAME":"dev-Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"dev-API-Authorizer","AUTHORIZE_FUNCTION_NAME":"dev-Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"dev-Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"dev-Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"dev-Create-SES-Identity","CREATENEWSESSION_FUNCTION_NAME":"dev-CreateNewSession","DBBATCHSELECT_FUNCTION_NAME":"dev-DBBatchSelect","DBDELETE_FUNCTION_NAME":"dev-DBDelete","DBSELECT_FUNCTION_NAME":"dev-DBSelect","DBUPDATE_FUNCTION_NAME":"dev-DBUpdate","DELETEUSERSUPABASE_FUNCTION_NAME":"dev-DeleteUserSupabase","GENERATEEMAIL_FUNCTION_NAME":"dev-GenerateEmail","GENERATEEV_FUNCTION_NAME":"dev-GenerateEV","GET_CORS_FUNCTION_NAME":"dev-Get-Cors","GETTHREADATTRS_FUNCTION_NAME":"dev-getThreadAttrs","GETUSERCONVERSATIONS_FUNCTION_NAME":"dev-GetUserConversations","LCPLLMRESPONSE_FUNCTION_NAME":"dev-LCPLlmResponse","LOGINUSER_FUNCTION_NAME":"dev-LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"dev-Organizations-Crud","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"dev-Organizations-Members","PARSEEVENT_FUNCTION_NAME":"dev-ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"dev-Process-SQS-Queued-Emails","PROCESSNEWUSERSUPABASE_FUNCTION_NAME":"dev-ProcessNewUserSupabase","RATELIMITAI_FUNCTION_NAME":"dev-RateLimitAI","RATELIMITAWS_FUNCTION_NAME":"dev-RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"dev-Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"dev-Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"dev-Test-Scheduler","UTILS_FUNCTION_NAME":"dev-utils"}},"functionName":"dev-verifyNewDomainValid","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["verifyNewDomainValidFunctionServiceRole7BF586F3","Arn"]},"runtime":"python3.11","timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValidFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"verifyNewDomainValidFunction9AA58C80"}]]},"retentionInDays":731}}}}}}},"ApiGateway":{"id":"ApiGateway","path":"Acsd2PStack-Dev/ApiGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.201.0","metadata":[{"restApiName":"*","description":"*","defaultCorsPreflightOptions":{"allowOrigins":"*","allowMethods":"*","allowHeaders":"*"}}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"ACS API Gateway for dev environment","name":"dev-ApiGateway"}}},"Deployment":{"id":"Deployment","path":"Acsd2PStack-Dev/ApiGateway/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.201.0","metadata":[{"description":"*","api":"*","retainDeployments":"*"},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"ACS API Gateway for dev environment","restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"Acsd2PStack-Dev/ApiGateway/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.201.0","metadata":[{"deployment":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ApiGatewayDeploymentA26796E8ed3ca13dda91acadc4a85771196e6e22"},"restApiId":{"Ref":"ApiGateway11E7F47B"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"Acsd2PStack-Dev/ApiGateway/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"Default":{"id":"Default","path":"Acsd2PStack-Dev/ApiGateway/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.201.0","metadata":["*"]},"children":{"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["ApiGateway11E7F47B","RootResourceId"]},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"api":{"id":"api","path":"Acsd2PStack-Dev/ApiGateway/Default/api","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ApiGateway11E7F47B","RootResourceId"]},"pathPart":"api","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiBD54C415"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"auth":{"id":"auth","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"auth","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiauthC228EEA1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"login":{"id":"login","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiauthC228EEA1"},"pathPart":"login","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiauthlogin8197054C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginUserFunction917F38A7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/auth/login"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginUserFunction917F38A7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/auth/login"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LoginUserFunction917F38A7","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiauthlogin8197054C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"authorize":{"id":"authorize","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiauthC228EEA1"},"pathPart":"authorize","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiauthauthorize4495A9EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthorizeFunctionC3F570CF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/auth/authorize"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthorizeFunctionC3F570CF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/auth/authorize"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthorizeFunctionC3F570CF","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiauthauthorize4495A9EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"create-session":{"id":"create-session","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiauthC228EEA1"},"pathPart":"create-session","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiauthcreatesessionC9D7DC9C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateNewSessionFunction3F952E8F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/auth/create-session"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateNewSessionFunction3F952E8F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/auth/create-session"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateNewSessionFunction3F952E8F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiauthcreatesessionC9D7DC9C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"users":{"id":"users","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"users","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"delete":{"id":"delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"pathPart":"delete","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiusersdeleteC19794DF"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"DELETE":{"id":"DELETE","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteUserSupabaseFunctionC89CDFE6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/DELETE/api/users/delete"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteUserSupabaseFunctionC89CDFE6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/DELETE/api/users/delete"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DeleteUserSupabaseFunctionC89CDFE6","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiusersdeleteC19794DF"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"process":{"id":"process","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"pathPart":"process","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiusersprocess5161F8F8"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessNewUserSupabaseFunction2982DD26","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/users/process"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessNewUserSupabaseFunction2982DD26","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/users/process"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ProcessNewUserSupabaseFunction2982DD26","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiusersprocess5161F8F8"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"conversations":{"id":"conversations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"pathPart":"conversations","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiusersconversations11879819"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"GET":{"id":"GET","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetUserConversationsFunction8BC8F605","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/GET/api/users/conversations"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetUserConversationsFunction8BC8F605","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/GET/api/users/conversations"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetUserConversationsFunction8BC8F605","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiusersconversations11879819"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"db":{"id":"db","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"db","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapidb8AC11C9F"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"select":{"id":"select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"select","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapidbselect8B813CB0"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBSelectFunction22A0CACB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/db/select"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBSelectFunction22A0CACB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/select"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBSelectFunction22A0CACB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapidbselect8B813CB0"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"batch-select":{"id":"batch-select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"batch-select","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapidbbatchselect2AE4B5B4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBBatchSelectFunction4B2FD1A1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/db/batch-select"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBBatchSelectFunction4B2FD1A1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/batch-select"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBBatchSelectFunction4B2FD1A1","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapidbbatchselect2AE4B5B4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"update":{"id":"update","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"update","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapidbupdate3B60D9CB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBUpdateFunctionA839F286","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/db/update"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBUpdateFunctionA839F286","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/update"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBUpdateFunctionA839F286","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapidbupdate3B60D9CB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"delete":{"id":"delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"delete","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapidbdelete3A0FCAB8"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBDeleteFunction9588707C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/db/delete"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBDeleteFunction9588707C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/delete"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBDeleteFunction9588707C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapidbdelete3A0FCAB8"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"email":{"id":"email","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"email","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiemail3D45AE45"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"generate":{"id":"generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiemail3D45AE45"},"pathPart":"generate","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiemailgenerate2C9218EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEmailFunctionCF0EFEE5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/email/generate"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEmailFunctionCF0EFEE5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/email/generate"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateEmailFunctionCF0EFEE5","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiemailgenerate2C9218EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"send":{"id":"send","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiemail3D45AE45"},"pathPart":"send","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiemailsend411C398E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SendEmailFunction95820EF7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/email/send"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SendEmailFunction95820EF7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/email/send"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SendEmailFunction95820EF7","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiemailsend411C398E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"process-queue":{"id":"process-queue","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiemail3D45AE45"},"pathPart":"process-queue","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiemailprocessqueue7EF27B37"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessSQSQueuedEmailsFunction1F1D3827","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/email/process-queue"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessSQSQueuedEmailsFunction1F1D3827","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/email/process-queue"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ProcessSQSQueuedEmailsFunction1F1D3827","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiemailprocessqueue7EF27B37"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"ev":{"id":"ev","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"ev","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiev998F6514"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"generate":{"id":"generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiev998F6514"},"pathPart":"generate","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapievgenerate8E068908"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ev.generate":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ev.generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ev.generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEVFunctionC42A9082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/ev/generate"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ev.generate":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ev.generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ev.generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEVFunctionC42A9082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ev/generate"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ev/generate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateEVFunctionC42A9082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapievgenerate8E068908"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"llm":{"id":"llm","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"llm","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapillmCA8DD34B"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"response":{"id":"response","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapillmCA8DD34B"},"pathPart":"response","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapillmresponse7E47346C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.llm.response":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.llm.response","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.llm.response","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LCPLlmResponseFunctionF4F11285","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/llm/response"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.llm.response":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.llm.response","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.llm.response","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LCPLlmResponseFunctionF4F11285","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/llm/response"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/llm/response/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LCPLlmResponseFunctionF4F11285","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapillmresponse7E47346C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"threads":{"id":"threads","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"threads","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsA4959447"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"get-all":{"id":"get-all","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapithreadsA4959447"},"pathPart":"get-all","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsgetallB425566E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"GET":{"id":"GET","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["getThreadAttrsFunctionB6F2A7CB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/GET/api/threads/get-all"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["getThreadAttrsFunctionB6F2A7CB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/GET/api/threads/get-all"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["getThreadAttrsFunctionB6F2A7CB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapithreadsgetallB425566E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"retrieve":{"id":"retrieve","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapithreadsA4959447"},"pathPart":"retrieve","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsretrieve00E477BA"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.retrieve":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.retrieve","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.retrieve","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetrieveThreadInformationFunction0A415CE1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/threads/retrieve"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.retrieve":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.retrieve","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.retrieve","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetrieveThreadInformationFunction0A415CE1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/threads/retrieve"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/retrieve/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RetrieveThreadInformationFunction0A415CE1","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapithreadsretrieve00E477BA"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"organizations":{"id":"organizations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"organizations","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizations6264A445"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"crud":{"id":"crud","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiorganizations6264A445"},"pathPart":"crud","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizationscrudBAC6FEA1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsCrudFunctionB7E9984C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/organizations/crud"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsCrudFunctionB7E9984C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/organizations/crud"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrganizationsCrudFunctionB7E9984C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiorganizationscrudBAC6FEA1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"members":{"id":"members","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiorganizations6264A445"},"pathPart":"members","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizationsmembers93EC0B7E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsMembersFunctionDE0053AA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/organizations/members"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsMembersFunctionDE0053AA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/organizations/members"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrganizationsMembersFunctionDE0053AA","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiorganizationsmembers93EC0B7E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"ses":{"id":"ses","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"ses","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapises91DCF212"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"create-identity":{"id":"create-identity","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"create-identity","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapisescreateidentity8B7B6F58"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESIdentityFunctionB7240D58","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/ses/create-identity"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESIdentityFunctionB7240D58","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/create-identity"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateSESIdentityFunctionB7240D58","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapisescreateidentity8B7B6F58"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"create-dkim":{"id":"create-dkim","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"create-dkim","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapisescreatedkim69EE4032"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESDkimRecordsFunction96D74B56","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/ses/create-dkim"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESDkimRecordsFunction96D74B56","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/create-dkim"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateSESDkimRecordsFunction96D74B56","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapisescreatedkim69EE4032"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"check-domain":{"id":"check-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"check-domain","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapisescheckdomain58C2CF7D"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CheckDomainStatusFunction1093986F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/ses/check-domain"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CheckDomainStatusFunction1093986F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/check-domain"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CheckDomainStatusFunction1093986F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapisescheckdomain58C2CF7D"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"verify-domain":{"id":"verify-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"verify-domain","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapisesverifydomainC183E4F1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["verifyNewDomainValidFunction9AA58C80","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/ses/verify-domain"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["verifyNewDomainValidFunction9AA58C80","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/verify-domain"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["verifyNewDomainValidFunction9AA58C80","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapisesverifydomainC183E4F1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"rate-limit":{"id":"rate-limit","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"rate-limit","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitF4921C8E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"ai":{"id":"ai","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiratelimitF4921C8E"},"pathPart":"ai","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitaiEBD274E4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAIFunction2732CE5C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/rate-limit/ai"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAIFunction2732CE5C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/rate-limit/ai"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RateLimitAIFunction2732CE5C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiratelimitaiEBD274E4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"aws":{"id":"aws","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiratelimitF4921C8E"},"pathPart":"aws","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitaws89854A3B"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAWSFunctionCAFEA2B5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/rate-limit/aws"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAWSFunctionCAFEA2B5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/rate-limit/aws"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RateLimitAWSFunctionCAFEA2B5","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiratelimitaws89854A3B"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"cors":{"id":"cors","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"cors","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapicors259CBC91"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"get":{"id":"get","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapicors259CBC91"},"pathPart":"get","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapicorsget11D4CCFC"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"GET":{"id":"GET","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCorsFunction67994118","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/GET/api/cors/get"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCorsFunction67994118","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/GET/api/cors/get"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetCorsFunction67994118","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapicorsget11D4CCFC"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"authorizer":{"id":"authorizer","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"authorizer","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiauthorizerA3663BC5"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.authorizer":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.authorizer","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.authorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["APIAuthorizerFunctionE9E30643","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/authorizer"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.authorizer":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.authorizer","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.authorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["APIAuthorizerFunctionE9E30643","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/authorizer"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/authorizer/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["APIAuthorizerFunctionE9E30643","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiauthorizerA3663BC5"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"parse-event":{"id":"parse-event","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"parse-event","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapiparseevent10D63FC9"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ParseEventFunction3795DCE1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/parse-event"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ParseEventFunction3795DCE1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/parse-event"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ParseEventFunction3795DCE1","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapiparseevent10D63FC9"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"test-scheduler":{"id":"test-scheduler","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"test-scheduler","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiGatewayapitestscheduler2B265C1B"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*","requestValidator":"*","requestModels":"*","requestParameters":"*","methodResponses":"*"}}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test-scheduler":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test-scheduler","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test-scheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TestSchedulerFunction66A427F5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStageprod1C6D5CD6"},"/POST/api/test-scheduler"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test-scheduler":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test-scheduler","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test-scheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TestSchedulerFunction66A427F5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/test-scheduler"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test-scheduler/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TestSchedulerFunction66A427F5","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ApiGatewayapitestscheduler2B265C1B"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"Acsd2PStack-Dev/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"UserPoolId":{"id":"UserPoolId","path":"Acsd2PStack-Dev/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"Acsd2PStack-Dev/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"EmailProcessQueueUrl":{"id":"EmailProcessQueueUrl","path":"Acsd2PStack-Dev/EmailProcessQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"UsersTableName":{"id":"UsersTableName","path":"Acsd2PStack-Dev/UsersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"ConversationsTableName":{"id":"ConversationsTableName","path":"Acsd2PStack-Dev/ConversationsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"ThreadsTableName":{"id":"ThreadsTableName","path":"Acsd2PStack-Dev/ThreadsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"OrganizationsTableName":{"id":"OrganizationsTableName","path":"Acsd2PStack-Dev/OrganizationsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"RateLimitingTableName":{"id":"RateLimitingTableName","path":"Acsd2PStack-Dev/RateLimitingTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"StorageBucketName":{"id":"StorageBucketName","path":"Acsd2PStack-Dev/StorageBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"EmailAttachmentsBucketName":{"id":"EmailAttachmentsBucketName","path":"Acsd2PStack-Dev/EmailAttachmentsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"Acsd2PStack-Dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"Acsd2PStack-Dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Acsd2PStack-Dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Acsd2PStack-Dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}