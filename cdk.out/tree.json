{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.201.0"},"children":{"Acsd2PStack-Dev":{"id":"Acsd2PStack-Dev","path":"Acsd2PStack-Dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"UserPool":{"id":"UserPool","path":"Acsd2PStack-Dev/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.201.0","metadata":[{"userPoolName":"*","selfSignUpEnabled":true,"signInAliases":{"email":true},"standardAttributes":{},"passwordPolicy":{"minLength":"*","requireLowercase":true,"requireUppercase":true,"requireDigits":true,"requireSymbols":true},"accountRecovery":2,"removalPolicy":"retain"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"dev-UserPool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"Acsd2PStack-Dev/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.201.0","metadata":[{"userPool":"*","userPoolClientName":"*","generateSecret":true,"authFlows":{"adminUserPassword":true,"userPassword":true,"userSrp":true},"oAuth":{"flows":{"authorizationCodeGrant":true,"implicitCodeGrant":true},"scopes":"*","callbackUrls":"*"}}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile"],"callbackUrLs":["http://localhost:3000/callback","https://yourdomain.com/callback"],"clientName":"dev-UserPoolClient","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":true,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"DescribeCognitoUserPoolClient":{"id":"DescribeCognitoUserPoolClient","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.201.0"},"children":{"Provider":{"id":"Provider","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.201.0","metadata":[{"uuid":"*","lambdaPurpose":"*","memorySize":"*","timeout":"*","role":"*","logGroup":"*","functionName":"*","vpc":"*","vpcSubnets":"*","code":"*","handler":"*","runtime":"*"},{"addMetadata":["*",true]},{"addMetadata":["*","*"]}]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":["*","*","*"]},"children":{"Default":{"id":"Default","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[{"statements":"*"},{"addStatements":[{}]},{"attachToRole":["*"]},{"attachToRole":["*"]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/UserPoolClient/DescribeCognitoUserPoolClient/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"cognito-idp:DescribeUserPoolClient","Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}],"Version":"2012-10-17"},"policyName":"UserPoolClientDescribeCognitoUserPoolClientCustomResourcePolicy0204E3CD","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}},"UsersImported":{"id":"UsersImported","path":"Acsd2PStack-Dev/UsersImported","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.201.0","metadata":[]}},"ConversationsImported":{"id":"ConversationsImported","path":"Acsd2PStack-Dev/ConversationsImported","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.201.0","metadata":[]}},"ThreadsImported":{"id":"ThreadsImported","path":"Acsd2PStack-Dev/ThreadsImported","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.201.0","metadata":[]}},"OrganizationsImported":{"id":"OrganizationsImported","path":"Acsd2PStack-Dev/OrganizationsImported","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.201.0","metadata":[]}},"RateLimitingImported":{"id":"RateLimitingImported","path":"Acsd2PStack-Dev/RateLimitingImported","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.201.0","metadata":[]}},"storage":{"id":"storage","path":"Acsd2PStack-Dev/storage","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.201.0","metadata":[{"bucketName":"*","versioned":true,"encryption":"S3_MANAGED","blockPublicAccess":"*","removalPolicy":"retain","autoDeleteObjects":false}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/storage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"dev-storage","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}}}},"email-attachments":{"id":"email-attachments","path":"Acsd2PStack-Dev/email-attachments","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.201.0","metadata":[{"bucketName":"*","versioned":true,"encryption":"S3_MANAGED","blockPublicAccess":"*","removalPolicy":"retain","autoDeleteObjects":false}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/email-attachments/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"dev-email-attachments","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}}}},"EmailProcessDLQ":{"id":"EmailProcessDLQ","path":"Acsd2PStack-Dev/EmailProcessDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.201.0","metadata":[{"queueName":"*","retentionPeriod":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/EmailProcessDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"dev-EmailProcessDLQ"}}}}},"EmailProcessQueue":{"id":"EmailProcessQueue","path":"Acsd2PStack-Dev/EmailProcessQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.201.0","metadata":[{"queueName":"*","visibilityTimeout":"*","retentionPeriod":"*","deadLetterQueue":{"queue":"*","maxReceiveCount":"*"},"removalPolicy":"retain"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/EmailProcessQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"dev-EmailProcessQueue","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["EmailProcessDLQ5A016F61","Arn"]},"maxReceiveCount":3},"visibilityTimeout":300}}}}},"Allow-Cors":{"id":"Allow-Cors","path":"Acsd2PStack-Dev/Allow-Cors","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Allow-Cors/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Allow-Cors/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-Cors/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.325Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Allow-Cors/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-Cors/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AllowCorsServiceRoleDefaultPolicy91D90412","roles":[{"Ref":"AllowCorsServiceRoleB3402641"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Allow-Cors/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Allow-Cors/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Allow-Cors/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-Cors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"3145bf60f472090dadb252de57907ee5a7dcd713aa696bf918f82c033dc18ad3.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Allow-Cors","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["AllowCorsServiceRoleB3402641","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.325Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Allow-Cors/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Allow-Cors/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AllowCors38326BB7"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.325Z"}]}}}}}}},"API-Authorizer":{"id":"API-Authorizer","path":"Acsd2PStack-Dev/API-Authorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/API-Authorizer/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/API-Authorizer/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-Authorizer/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.333Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/API-Authorizer/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-Authorizer/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"APIAuthorizerServiceRoleDefaultPolicyA7126BC6","roles":[{"Ref":"APIAuthorizerServiceRole2482D84B"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/API-Authorizer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/API-Authorizer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/API-Authorizer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-Authorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"530e0033c49a79d5a5e4190b4020709bb3fdeadbc4c3065959a8484a1cbf7c50.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"API-Authorizer","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["APIAuthorizerServiceRole2482D84B","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.333Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/API-Authorizer/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/API-Authorizer/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"APIAuthorizer3DA3485D"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.333Z"}]}}}}}}},"Authorize":{"id":"Authorize","path":"Acsd2PStack-Dev/Authorize","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Authorize/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Authorize/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Authorize/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.338Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Authorize/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Authorize/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AuthorizeServiceRoleDefaultPolicyC880FB24","roles":[{"Ref":"AuthorizeServiceRole397C1B2B"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Authorize/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Authorize/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Authorize/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Authorize/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"719a3cd50a6dcfe528399dfb84a933f66e2da886ecab87e9719dc98c7f85324a.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Authorize","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["AuthorizeServiceRole397C1B2B","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.338Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Authorize/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Authorize/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AuthorizeD8507075"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.338Z"}]}}}}}}},"Check-Domain-Status":{"id":"Check-Domain-Status","path":"Acsd2PStack-Dev/Check-Domain-Status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Check-Domain-Status/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Check-Domain-Status/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-Status/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.342Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Check-Domain-Status/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-Status/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CheckDomainStatusServiceRoleDefaultPolicy6279B8AE","roles":[{"Ref":"CheckDomainStatusServiceRole55503012"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Check-Domain-Status/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Check-Domain-Status/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Check-Domain-Status/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-Status/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"fc11e697233a1660c9dc2ec691f85e254eb28bf74bccb7d730356a0cf452cb96.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Check-Domain-Status","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CheckDomainStatusServiceRole55503012","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.342Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Check-Domain-Status/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Check-Domain-Status/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CheckDomainStatusF427753C"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.342Z"}]}}}}}}},"Create-SES-Dkim-Records":{"id":"Create-SES-Dkim-Records","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.346Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateSESDkimRecordsServiceRoleDefaultPolicy8C13311B","roles":[{"Ref":"CreateSESDkimRecordsServiceRole79BFACF5"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"650b56d3747d7b5fc84751a2194258f6536b1d303c6273def14a0b371f6925fd.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Create-SES-Dkim-Records","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CreateSESDkimRecordsServiceRole79BFACF5","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.346Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Dkim-Records/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CreateSESDkimRecordsF84541B9"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.346Z"}]}}}}}}},"Create-SES-Identity":{"id":"Create-SES-Identity","path":"Acsd2PStack-Dev/Create-SES-Identity","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Create-SES-Identity/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Create-SES-Identity/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Identity/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.355Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Create-SES-Identity/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Identity/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateSESIdentityServiceRoleDefaultPolicy361BD245","roles":[{"Ref":"CreateSESIdentityServiceRole886194D4"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Create-SES-Identity/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Create-SES-Identity/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Create-SES-Identity/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Identity/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"4895a78d74bfaf839d2c858747ba587c84a8cddf6808b34779835d59feb8066d.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Create-SES-Identity","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CreateSESIdentityServiceRole886194D4","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.355Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Create-SES-Identity/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Create-SES-Identity/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CreateSESIdentity4DA2E2EF"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.355Z"}]}}}}}}},"CreateNewSession":{"id":"CreateNewSession","path":"Acsd2PStack-Dev/CreateNewSession","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/CreateNewSession/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/CreateNewSession/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSession/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.360Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/CreateNewSession/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSession/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateNewSessionServiceRoleDefaultPolicy2C812C40","roles":[{"Ref":"CreateNewSessionServiceRole68BEA7B4"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/CreateNewSession/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/CreateNewSession/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/CreateNewSession/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSession/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"b5a5e1386ccf7ecc183b4609697bb9d87aa16334dcb9de908baf600b2d334b71.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"CreateNewSession","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["CreateNewSessionServiceRole68BEA7B4","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.360Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/CreateNewSession/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/CreateNewSession/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CreateNewSession969BBFEA"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.360Z"}]}}}}}}},"DBBatchSelect":{"id":"DBBatchSelect","path":"Acsd2PStack-Dev/DBBatchSelect","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBBatchSelect/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBBatchSelect/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelect/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.364Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBBatchSelect/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelect/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBBatchSelectServiceRoleDefaultPolicyA65DE8D5","roles":[{"Ref":"DBBatchSelectServiceRole52ED1AE5"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBBatchSelect/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBBatchSelect/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBBatchSelect/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelect/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"330e9df57cd16076983a749f4d2a2fca4c781574fd9a9d3d7ee8fdfc30e51ebe.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"DBBatchSelect","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBBatchSelectServiceRole52ED1AE5","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.364Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBBatchSelect/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBBatchSelect/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBBatchSelect27E57951"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.364Z"}]}}}}}}},"DBDelete":{"id":"DBDelete","path":"Acsd2PStack-Dev/DBDelete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBDelete/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBDelete/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDelete/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.369Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBDelete/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDelete/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBDeleteServiceRoleDefaultPolicy9AE369A4","roles":[{"Ref":"DBDeleteServiceRole585C5822"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBDelete/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBDelete/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBDelete/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDelete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"d1e11b2119d595de05590c59340353c8e1040a4fe981098563ed5752b534e5be.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"DBDelete","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBDeleteServiceRole585C5822","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.369Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBDelete/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBDelete/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBDelete6FEA0FAC"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.369Z"}]}}}}}}},"DBSelect":{"id":"DBSelect","path":"Acsd2PStack-Dev/DBSelect","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBSelect/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBSelect/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelect/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.373Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBSelect/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelect/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBSelectServiceRoleDefaultPolicy94A10E8F","roles":[{"Ref":"DBSelectServiceRole6D554165"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBSelect/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBSelect/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBSelect/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelect/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"4dbb693cc9a76f9a61a46a023681a05f74018a1fddfcec1a98bcf0a3dd9f4a7c.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"DBSelect","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBSelectServiceRole6D554165","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.373Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBSelect/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBSelect/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBSelectE0E36FBC"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.373Z"}]}}}}}}},"DBUpdate":{"id":"DBUpdate","path":"Acsd2PStack-Dev/DBUpdate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DBUpdate/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DBUpdate/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdate/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.377Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DBUpdate/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdate/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DBUpdateServiceRoleDefaultPolicyCBD6FD8E","roles":[{"Ref":"DBUpdateServiceRole27E63D0B"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DBUpdate/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DBUpdate/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DBUpdate/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"f337abbb6d9836e9e66a8c1202ba759cbdc7c6ec249a0d62a5601145a06c6755.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"DBUpdate","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["DBUpdateServiceRole27E63D0B","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.377Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DBUpdate/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DBUpdate/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DBUpdate593A351B"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.377Z"}]}}}}}}},"DeleteUserSupabase":{"id":"DeleteUserSupabase","path":"Acsd2PStack-Dev/DeleteUserSupabase","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/DeleteUserSupabase/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/DeleteUserSupabase/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabase/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.382Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/DeleteUserSupabase/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabase/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"DeleteUserSupabaseServiceRoleDefaultPolicy63FC43D8","roles":[{"Ref":"DeleteUserSupabaseServiceRoleA2373C49"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/DeleteUserSupabase/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/DeleteUserSupabase/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/DeleteUserSupabase/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabase/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"df08010cee26be31a174b141db03eb40a576abfad6b1a0440bd1b8b5bf670330.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"DeleteUserSupabase","handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["DeleteUserSupabaseServiceRoleA2373C49","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.382Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/DeleteUserSupabase/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/DeleteUserSupabase/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"DeleteUserSupabaseD4FF7308"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.382Z"}]}}}}}}},"GenerateEmail":{"id":"GenerateEmail","path":"Acsd2PStack-Dev/GenerateEmail","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/GenerateEmail/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/GenerateEmail/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmail/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.386Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/GenerateEmail/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmail/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GenerateEmailServiceRoleDefaultPolicyB5241152","roles":[{"Ref":"GenerateEmailServiceRole0096CC1A"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/GenerateEmail/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/GenerateEmail/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/GenerateEmail/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmail/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"9272dc705065e34aad34d35647ddbc42d81c60c19fe647b9660e5b9434538559.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"GenerateEmail","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GenerateEmailServiceRole0096CC1A","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.386Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/GenerateEmail/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEmail/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GenerateEmail27EC3141"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.386Z"}]}}}}}}},"GenerateEV":{"id":"GenerateEV","path":"Acsd2PStack-Dev/GenerateEV","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/GenerateEV/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/GenerateEV/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEV/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.392Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/GenerateEV/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEV/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GenerateEVServiceRoleDefaultPolicyF807BC2C","roles":[{"Ref":"GenerateEVServiceRoleBAF34D8B"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/GenerateEV/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/GenerateEV/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/GenerateEV/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEV/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"7fd754f9c71e1ce35bb4503015b17ec83c6bdf9542e555730af83735a40fac04.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"GenerateEV","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GenerateEVServiceRoleBAF34D8B","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.392Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/GenerateEV/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GenerateEV/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GenerateEV72CCC71B"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.392Z"}]}}}}}}},"Get-Cors":{"id":"Get-Cors","path":"Acsd2PStack-Dev/Get-Cors","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Get-Cors/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Get-Cors/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-Cors/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.396Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Get-Cors/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-Cors/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetCorsServiceRoleDefaultPolicyDDCC3B73","roles":[{"Ref":"GetCorsServiceRole23F04719"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Get-Cors/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Get-Cors/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Get-Cors/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-Cors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"cb9875915c163f82a02d1325a3b3ab854a7f2f448a7654bbf22bb2a6f40a0203.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Get-Cors","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GetCorsServiceRole23F04719","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.396Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Get-Cors/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Get-Cors/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GetCorsE4E2D580"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.396Z"}]}}}}}}},"getThreadAttrs":{"id":"getThreadAttrs","path":"Acsd2PStack-Dev/getThreadAttrs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/getThreadAttrs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/getThreadAttrs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.401Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/getThreadAttrs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"getThreadAttrsServiceRoleDefaultPolicy7E4B89E2","roles":[{"Ref":"getThreadAttrsServiceRole304BF294"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/getThreadAttrs/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/getThreadAttrs/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/getThreadAttrs/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"e58f06622cf92ee06cd57d7a0d7dd2bab338d7138e0343414f0bb006203db86d.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"getThreadAttrs","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["getThreadAttrsServiceRole304BF294","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.401Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/getThreadAttrs/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/getThreadAttrs/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"getThreadAttrs5DADDD09"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.401Z"}]}}}}}}},"GetUserConversations":{"id":"GetUserConversations","path":"Acsd2PStack-Dev/GetUserConversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/GetUserConversations/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/GetUserConversations/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversations/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.404Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/GetUserConversations/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversations/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetUserConversationsServiceRoleDefaultPolicyFB453B9E","roles":[{"Ref":"GetUserConversationsServiceRole6E5732CB"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/GetUserConversations/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/GetUserConversations/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/GetUserConversations/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"11378a1ffde73836fa84321b9429dc2880b6eea1dde60fb57fdcd34d19b2b896.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"GetUserConversations","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["GetUserConversationsServiceRole6E5732CB","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.404Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/GetUserConversations/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/GetUserConversations/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GetUserConversationsD05A38FF"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.404Z"}]}}}}}}},"LCPLlmResponse":{"id":"LCPLlmResponse","path":"Acsd2PStack-Dev/LCPLlmResponse","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/LCPLlmResponse/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/LCPLlmResponse/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponse/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.412Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/LCPLlmResponse/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponse/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"LCPLlmResponseServiceRoleDefaultPolicy5103FF90","roles":[{"Ref":"LCPLlmResponseServiceRoleED62E2B9"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/LCPLlmResponse/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/LCPLlmResponse/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/LCPLlmResponse/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponse/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"93329a1b5d09d4689f5ca7d71b8b6e369398b1007b39b26df00ac4b1a1b3352b.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"LCPLlmResponse","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["LCPLlmResponseServiceRoleED62E2B9","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.412Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/LCPLlmResponse/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LCPLlmResponse/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"LCPLlmResponse21157393"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.412Z"}]}}}}}}},"LoginUser":{"id":"LoginUser","path":"Acsd2PStack-Dev/LoginUser","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/LoginUser/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/LoginUser/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUser/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.416Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/LoginUser/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUser/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"LoginUserServiceRoleDefaultPolicyAB11DEB0","roles":[{"Ref":"LoginUserServiceRole423AD860"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/LoginUser/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/LoginUser/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/LoginUser/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUser/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"3a7eaf2517d8c536d641fabd37fecf8433a4a0b8361bc852628d22cf8b2f7e6b.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"LoginUser","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["LoginUserServiceRole423AD860","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.416Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/LoginUser/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/LoginUser/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"LoginUserAD11EC26"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.416Z"}]}}}}}}},"Organizations-Crud":{"id":"Organizations-Crud","path":"Acsd2PStack-Dev/Organizations-Crud","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Organizations-Crud/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Organizations-Crud/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Crud/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.420Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Organizations-Crud/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Crud/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"OrganizationsCrudServiceRoleDefaultPolicy32F22F54","roles":[{"Ref":"OrganizationsCrudServiceRoleB7D4F296"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Organizations-Crud/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Organizations-Crud/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Organizations-Crud/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Crud/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"79f0d1a742b3e17699028e9d6ea043933a9c25a12ae8bf9162b87cad66125470.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Organizations-Crud","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["OrganizationsCrudServiceRoleB7D4F296","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.420Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Organizations-Crud/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Crud/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"OrganizationsCrud7ACB6109"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.420Z"}]}}}}}}},"Organizations-Members":{"id":"Organizations-Members","path":"Acsd2PStack-Dev/Organizations-Members","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Organizations-Members/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Organizations-Members/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Members/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.423Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Organizations-Members/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Members/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"OrganizationsMembersServiceRoleDefaultPolicy15F0DCF4","roles":[{"Ref":"OrganizationsMembersServiceRole7B651C6C"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Organizations-Members/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Organizations-Members/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Organizations-Members/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Members/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"b9c9a01821101631834d5f35fd9cd224ab0e763b8320e97b9e704860af2822ed.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Organizations-Members","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["OrganizationsMembersServiceRole7B651C6C","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.423Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Organizations-Members/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Organizations-Members/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"OrganizationsMembersFAEEE244"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.423Z"}]}}}}}}},"ParseEvent":{"id":"ParseEvent","path":"Acsd2PStack-Dev/ParseEvent","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/ParseEvent/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/ParseEvent/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEvent/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.426Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/ParseEvent/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEvent/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ParseEventServiceRoleDefaultPolicyF2F8B67F","roles":[{"Ref":"ParseEventServiceRole53F2EE86"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/ParseEvent/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/ParseEvent/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/ParseEvent/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEvent/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"da34e10f08cf6eb65ae8cc02780811bc593ac2e511af7bc7d63932e719e67817.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"ParseEvent","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["ParseEventServiceRole53F2EE86","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.426Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/ParseEvent/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ParseEvent/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ParseEvent487500D4"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.426Z"}]}}}}}}},"Process-SQS-Queued-Emails":{"id":"Process-SQS-Queued-Emails","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.433Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ProcessSQSQueuedEmailsServiceRoleDefaultPolicy06E420C7","roles":[{"Ref":"ProcessSQSQueuedEmailsServiceRoleB5F19AC6"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"6425e3e71aa7dcf9734a918cf4b200aecc5647d67d3928b9e0ae4ea78611af61.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Process-SQS-Queued-Emails","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["ProcessSQSQueuedEmailsServiceRoleB5F19AC6","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.433Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Process-SQS-Queued-Emails/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ProcessSQSQueuedEmailsA1F4C8CD"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.433Z"}]}}}}}}},"ProcessNewUserSupabase":{"id":"ProcessNewUserSupabase","path":"Acsd2PStack-Dev/ProcessNewUserSupabase","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.436Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ProcessNewUserSupabaseServiceRoleDefaultPolicy2B1E8C1A","roles":[{"Ref":"ProcessNewUserSupabaseServiceRole548C2ED2"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"1fda529581499fc50365c40a1738a2bac02d48ce561923ac9486016cae0eedb6.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"ProcessNewUserSupabase","handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["ProcessNewUserSupabaseServiceRole548C2ED2","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.436Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ProcessNewUserSupabase/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ProcessNewUserSupabaseBC5B358F"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.436Z"}]}}}}}}},"RateLimitAI":{"id":"RateLimitAI","path":"Acsd2PStack-Dev/RateLimitAI","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/RateLimitAI/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/RateLimitAI/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAI/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.440Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/RateLimitAI/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAI/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"RateLimitAIServiceRoleDefaultPolicyAA9CDF3D","roles":[{"Ref":"RateLimitAIServiceRole80785149"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/RateLimitAI/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/RateLimitAI/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/RateLimitAI/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"cc890be28a8a8506367201a310e91637eb24a5046daa4bf5d71710f02acc57fb.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"RateLimitAI","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["RateLimitAIServiceRole80785149","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.440Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/RateLimitAI/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAI/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"RateLimitAIB2954753"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.440Z"}]}}}}}}},"RateLimitAWS":{"id":"RateLimitAWS","path":"Acsd2PStack-Dev/RateLimitAWS","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/RateLimitAWS/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/RateLimitAWS/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWS/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.444Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/RateLimitAWS/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWS/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"RateLimitAWSServiceRoleDefaultPolicy8BE43E23","roles":[{"Ref":"RateLimitAWSServiceRole0CC2489B"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/RateLimitAWS/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/RateLimitAWS/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/RateLimitAWS/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"980b4dccb82bb9b8e1ac6899d05a508fde98853738864dd4a8491548d1be05a4.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"RateLimitAWS","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["RateLimitAWSServiceRole0CC2489B","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.444Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/RateLimitAWS/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/RateLimitAWS/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"RateLimitAWSF1FD42E0"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.444Z"}]}}}}}}},"Retrieve-Thread-Information":{"id":"Retrieve-Thread-Information","path":"Acsd2PStack-Dev/Retrieve-Thread-Information","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.448Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"RetrieveThreadInformationServiceRoleDefaultPolicy0287A74C","roles":[{"Ref":"RetrieveThreadInformationServiceRole8DA946AB"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"bfb93a5f5b5bc564220730eb94471e283b359103bd277c34aac3d20d82ffab8f.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Retrieve-Thread-Information","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["RetrieveThreadInformationServiceRole8DA946AB","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.448Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Retrieve-Thread-Information/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"RetrieveThreadInformation724354D2"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.448Z"}]}}}}}}},"Send-Email":{"id":"Send-Email","path":"Acsd2PStack-Dev/Send-Email","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Send-Email/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Send-Email/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-Email/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.452Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Send-Email/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-Email/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"SendEmailServiceRoleDefaultPolicy9C77718E","roles":[{"Ref":"SendEmailServiceRole71BD9BE6"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Send-Email/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Send-Email/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Send-Email/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-Email/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"36d9bde8b10be5f523228b309e7f0a9b7fa86cfe968f59ea0248d5adb66aa039.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Send-Email","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["SendEmailServiceRole71BD9BE6","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.452Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Send-Email/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Send-Email/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SendEmailF3CD3574"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.452Z"}]}}}}}}},"Test-Scheduler":{"id":"Test-Scheduler","path":"Acsd2PStack-Dev/Test-Scheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/Test-Scheduler/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/Test-Scheduler/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-Scheduler/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.455Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/Test-Scheduler/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-Scheduler/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"TestSchedulerServiceRoleDefaultPolicy830BF7F4","roles":[{"Ref":"TestSchedulerServiceRoleAF89168E"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/Test-Scheduler/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/Test-Scheduler/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/Test-Scheduler/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-Scheduler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"f5339963bde1aec253714a5487caaa9dd4123a6d1d57485c33f3276ff499b081.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"Test-Scheduler","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["TestSchedulerServiceRoleAF89168E","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.455Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/Test-Scheduler/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/Test-Scheduler/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"TestSchedulerA5F4DF07"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.455Z"}]}}}}}}},"utils":{"id":"utils","path":"Acsd2PStack-Dev/utils","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/utils/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/utils/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utils/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.458Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/utils/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utils/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"utilsServiceRoleDefaultPolicyC5D717F1","roles":[{"Ref":"utilsServiceRoleFC839C56"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/utils/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/utils/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/utils/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utils/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"23e8ba92ec920c9c82a8c81e92fa0d090de127524e4dceb88d1630ad25763b9c.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"utils","handler":"arn-resolver.handler","memorySize":256,"role":{"Fn::GetAtt":["utilsServiceRoleFC839C56","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.458Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/utils/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/utils/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"utilsF6FC768D"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.458Z"}]}}}}}}},"verifyNewDomainValid":{"id":"verifyNewDomainValid","path":"Acsd2PStack-Dev/verifyNewDomainValid","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"functionName":"*","runtime":"*","handler":"*","code":"*","memorySize":"*","timeout":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/verifyNewDomainValid/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/verifyNewDomainValid/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValid/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AdministratorAccess"]]}],"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.460Z"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Acsd2PStack-Dev/verifyNewDomainValid/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValid/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:InitiateAuth","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations","arn:aws:dynamodb:us-west-1:872515253712:table/dev-RateLimiting","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads","arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EmailProcessQueue10E28519","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},{"Fn::GetAtt":["storage8D9329BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["emailattachments34C069DE","Arn"]},"/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["storage8D9329BE","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"verifyNewDomainValidServiceRoleDefaultPolicyAFA5E5F7","roles":[{"Ref":"verifyNewDomainValidServiceRole9FFA56C5"}]}}}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/verifyNewDomainValid/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/verifyNewDomainValid/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/verifyNewDomainValid/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValid/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"9b8a0919fcde62d5d9abc4c7e7625a3d425abdc11f3d57635524cd3b2da15954.zip"},"environment":{"variables":{"STAGE":"dev","AUTH_BP":"xkirxcJV3gCa38","BUCKET_NAME":"xkirxcJV3gCa38","DB_SELECT_LAMBDA":"DBSelect","GENERATE_EV_LAMBDA_ARN":"GenerateEV","PROCESSING_LAMBDA_ARN":"Send-Email","QUEUE_URL":{"Ref":"EmailProcessQueue10E28519"},"SCHEDULER_ROLE_ARN":"arn:aws:iam::872515253712:role/SQS-SES-Handler","TAI_KEY":"2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7","BEDROCK_MODEL_ARN":"arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"COGNITO_CLIENT_SECRET":{"Fn::GetAtt":["UserPoolClientDescribeCognitoUserPoolClient19F18FF0","UserPoolClient.ClientSecret"]},"RATE_LIMIT_AI":"100","RATE_LIMIT_AWS":"1000","RECAPTCHA_SECRET_KEY":"6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo","ALLOW_CORS_FUNCTION_NAME":"Allow-Cors","API_AUTHORIZER_FUNCTION_NAME":"API-Authorizer","AUTHORIZE_FUNCTION_NAME":"Authorize","CHECK_DOMAIN_STATUS_FUNCTION_NAME":"Check-Domain-Status","CREATE_SES_DKIM_RECORDS_FUNCTION_NAME":"Create-SES-Dkim-Records","CREATE_SES_IDENTITY_FUNCTION_NAME":"Create-SES-Identity","CREATE_NEW_SESSION_FUNCTION_NAME":"CreateNewSession","DB_BATCH_SELECT_FUNCTION_NAME":"DBBatchSelect","DB_DELETE_FUNCTION_NAME":"DBDelete","DB_SELECT_FUNCTION_NAME":"DBSelect","DB_UPDATE_FUNCTION_NAME":"DBUpdate","DELETE_USER_SUPABASE_FUNCTION_NAME":"DeleteUserSupabase","GENERATE_EMAIL_FUNCTION_NAME":"GenerateEmail","GET_CORS_FUNCTION_NAME":"Get-Cors","GET_THREAD_ATTRS_FUNCTION_NAME":"getThreadAttrs","GET_USER_CONVERSATIONS_FUNCTION_NAME":"GetUserConversations","LCP_LLM_RESPONSE_FUNCTION_NAME":"LCPLlmResponse","LOGIN_USER_FUNCTION_NAME":"LoginUser","ORGANIZATIONS_CRUD_FUNCTION_NAME":"Organizations-Crud","ORGANIZATIONS_INVITES_FUNCTION_NAME":"Organizations-Invites","ORGANIZATIONS_MEMBERS_FUNCTION_NAME":"Organizations-Members","PARSE_EVENT_FUNCTION_NAME":"ParseEvent","PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME":"Process-SQS-Queued-Emails","PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME":"ProcessNewUserSupabase","RATE_LIMIT_AI_FUNCTION_NAME":"RateLimitAI","RATE_LIMIT_AWS_FUNCTION_NAME":"RateLimitAWS","RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME":"Retrieve-Thread-Information","SEND_EMAIL_FUNCTION_NAME":"Send-Email","TEST_SCHEDULER_FUNCTION_NAME":"Test-Scheduler","VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME":"verifyNewDomainValid","CDK_AWS_REGION":"us-west-1","AWS_ACCOUNT_ID":"872515253712"}},"functionName":"verifyNewDomainValid","handler":"lambda_function.handler","memorySize":256,"role":{"Fn::GetAtt":["verifyNewDomainValidServiceRole9FFA56C5","Arn"]},"runtime":"python3.11","tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.460Z"}],"timeout":60}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/verifyNewDomainValid/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/verifyNewDomainValid/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"verifyNewDomainValidD2240338"}]]},"retentionInDays":731,"tags":[{"key":"DeploymentReason","value":"Changed"},{"key":"LastDeployment","value":"2025-06-30T06:00:03.460Z"}]}}}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[{"memorySize":"*","timeout":"*","role":"*","logGroup":"*","functionName":"*","vpc":"*","vpcSubnets":"*","code":"*","handler":"*","runtime":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-872515253712-us-west-1","s3Key":"c099eb4e32cbf1c3da9c45a3b280efe2bed38d27d74aa72702b67d86d1b52354.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","timeout":120}}},"LogGroup":{"id":"LogGroup","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/AWS679f53fac002430cb0da5b7982bd2287/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AWS679f53fac002430cb0da5b7982bd22872D164C4C"}]]},"retentionInDays":731}}}}}}},"ApiGateway":{"id":"ApiGateway","path":"Acsd2PStack-Dev/ApiGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.201.0","metadata":[{"restApiName":"*","description":"*","defaultCorsPreflightOptions":{"allowOrigins":"*","allowMethods":"*","allowHeaders":"*","allowCredentials":true},"deployOptions":{"stageName":"*","loggingLevel":"INFO","dataTraceEnabled":true}}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"ACS API Gateway for dev environment","name":"dev-ACS-API"}}},"Deployment":{"id":"Deployment","path":"Acsd2PStack-Dev/ApiGateway/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.201.0","metadata":[{"description":"*","api":"*","retainDeployments":"*"},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"ACS API Gateway for dev environment","restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"DeploymentStage.dev":{"id":"DeploymentStage.dev","path":"Acsd2PStack-Dev/ApiGateway/DeploymentStage.dev","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.201.0","metadata":[{"deployment":"*","stageName":"*","loggingLevel":"INFO","dataTraceEnabled":true}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/DeploymentStage.dev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ApiGatewayDeploymentA26796E8351bafec6a35f1668a6c2a19ee4d027a"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":true,"loggingLevel":"INFO"}],"restApiId":{"Ref":"ApiGateway11E7F47B"},"stageName":"dev"}}}}},"Endpoint":{"id":"Endpoint","path":"Acsd2PStack-Dev/ApiGateway/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"Default":{"id":"Default","path":"Acsd2PStack-Dev/ApiGateway/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.201.0","metadata":["*"]},"children":{"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Fn::GetAtt":["ApiGateway11E7F47B","RootResourceId"]},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"api":{"id":"api","path":"Acsd2PStack-Dev/ApiGateway/Default/api","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ApiGateway11E7F47B","RootResourceId"]},"pathPart":"api","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiBD54C415"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"auth":{"id":"auth","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"auth","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiauthC228EEA1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"login":{"id":"login","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiauthC228EEA1"},"pathPart":"login","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiauthlogin8197054C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginUserAD11EC26","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/auth/login"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginUserAD11EC26","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/auth/login"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/login/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LoginUserAD11EC26","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiauthlogin8197054C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"authorize":{"id":"authorize","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiauthC228EEA1"},"pathPart":"authorize","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiauthauthorize4495A9EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthorizeD8507075","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/auth/authorize"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.authorize","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthorizeD8507075","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/auth/authorize"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/authorize/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthorizeD8507075","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiauthauthorize4495A9EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"create-session":{"id":"create-session","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiauthC228EEA1"},"pathPart":"create-session","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiauthcreatesessionC9D7DC9C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateNewSession969BBFEA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/auth/create-session"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.auth.create-session","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateNewSession969BBFEA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/auth/create-session"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/auth/create-session/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateNewSession969BBFEA","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiauthcreatesessionC9D7DC9C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"db":{"id":"db","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"db","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapidb8AC11C9F"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"select":{"id":"select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"select","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapidbselect8B813CB0"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBSelectE0E36FBC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/db/select"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBSelectE0E36FBC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/select"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/select/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBSelectE0E36FBC","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapidbselect8B813CB0"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"update":{"id":"update","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"update","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapidbupdate3B60D9CB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBUpdate593A351B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/db/update"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.update","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBUpdate593A351B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/update"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/update/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBUpdate593A351B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapidbupdate3B60D9CB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"delete":{"id":"delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"delete","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapidbdelete3A0FCAB8"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBDelete6FEA0FAC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/db/delete"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBDelete6FEA0FAC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/delete"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/delete/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBDelete6FEA0FAC","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapidbdelete3A0FCAB8"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"batch-select":{"id":"batch-select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapidb8AC11C9F"},"pathPart":"batch-select","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapidbbatchselect2AE4B5B4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBBatchSelect27E57951","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/db/batch-select"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.db.batch-select","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DBBatchSelect27E57951","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/db/batch-select"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/db/batch-select/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DBBatchSelect27E57951","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapidbbatchselect2AE4B5B4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"email":{"id":"email","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"email","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiemail3D45AE45"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"send":{"id":"send","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiemail3D45AE45"},"pathPart":"send","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiemailsend411C398E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SendEmailF3CD3574","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/email/send"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.send","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SendEmailF3CD3574","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/email/send"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/send/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SendEmailF3CD3574","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiemailsend411C398E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"generate":{"id":"generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiemail3D45AE45"},"pathPart":"generate","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiemailgenerate2C9218EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEmail27EC3141","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/email/generate"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEmail27EC3141","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/email/generate"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/generate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateEmail27EC3141","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiemailgenerate2C9218EB"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"process-queue":{"id":"process-queue","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiemail3D45AE45"},"pathPart":"process-queue","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiemailprocessqueue7EF27B37"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessSQSQueuedEmailsA1F4C8CD","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/email/process-queue"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.email.process-queue","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessSQSQueuedEmailsA1F4C8CD","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/email/process-queue"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/email/process-queue/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ProcessSQSQueuedEmailsA1F4C8CD","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiemailprocessqueue7EF27B37"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"threads":{"id":"threads","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"threads","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsA4959447"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"get-all":{"id":"get-all","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapithreadsA4959447"},"pathPart":"get-all","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsgetallB425566E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"GET":{"id":"GET","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetrieveThreadInformation724354D2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/GET/api/threads/get-all"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-all","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetrieveThreadInformation724354D2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/GET/api/threads/get-all"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-all/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RetrieveThreadInformation724354D2","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsgetallB425566E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"get-by-id":{"id":"get-by-id","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapithreadsA4959447"},"pathPart":"get-by-id","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsgetbyidBCFCE577"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"GET":{"id":"GET","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetrieveThreadInformation724354D2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/GET/api/threads/get-by-id"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.threads.get-by-id","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetrieveThreadInformation724354D2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/GET/api/threads/get-by-id"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-by-id/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RetrieveThreadInformation724354D2","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsgetbyidBCFCE577"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"get-attrs":{"id":"get-attrs","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapithreadsA4959447"},"pathPart":"get-attrs","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsgetattrs0F47B3E0"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["getThreadAttrs5DADDD09","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/threads/get-attrs"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.threads.get-attrs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["getThreadAttrs5DADDD09","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/threads/get-attrs"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/threads/get-attrs/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["getThreadAttrs5DADDD09","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapithreadsgetattrs0F47B3E0"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"users":{"id":"users","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"users","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"conversations":{"id":"conversations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"pathPart":"conversations","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiusersconversations11879819"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"GET":{"id":"GET","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetUserConversationsD05A38FF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/GET/api/users/conversations"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.users.conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetUserConversationsD05A38FF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/GET/api/users/conversations"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/conversations/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetUserConversationsD05A38FF","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiusersconversations11879819"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"process-new":{"id":"process-new","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"pathPart":"process-new","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiusersprocessnew856112EC"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessNewUserSupabaseBC5B358F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/users/process-new"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.users.process-new","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessNewUserSupabaseBC5B358F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/users/process-new"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/process-new/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ProcessNewUserSupabaseBC5B358F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiusersprocessnew856112EC"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"delete":{"id":"delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiusers7B4BB47E"},"pathPart":"delete","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiusersdeleteC19794DF"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"DELETE":{"id":"DELETE","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteUserSupabaseD4FF7308","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/DELETE/api/users/delete"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.DELETE..api.users.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteUserSupabaseD4FF7308","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/DELETE/api/users/delete"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/users/delete/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DeleteUserSupabaseD4FF7308","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiusersdeleteC19794DF"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"organizations":{"id":"organizations","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"organizations","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizations6264A445"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"crud":{"id":"crud","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiorganizations6264A445"},"pathPart":"crud","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizationscrudBAC6FEA1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsCrud7ACB6109","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/organizations/crud"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.crud","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsCrud7ACB6109","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/organizations/crud"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/crud/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrganizationsCrud7ACB6109","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizationscrudBAC6FEA1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"members":{"id":"members","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiorganizations6264A445"},"pathPart":"members","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizationsmembers93EC0B7E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsMembersFAEEE244","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/organizations/members"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.organizations.members","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrganizationsMembersFAEEE244","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/organizations/members"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/organizations/members/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrganizationsMembersFAEEE244","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiorganizationsmembers93EC0B7E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"ai":{"id":"ai","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"ai","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiaiB2F740A9"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"llm-response":{"id":"llm-response","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiaiB2F740A9"},"pathPart":"llm-response","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiaillmresponse4AA272C6"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LCPLlmResponse21157393","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/ai/llm-response"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.llm-response","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LCPLlmResponse21157393","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ai/llm-response"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/llm-response/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LCPLlmResponse21157393","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiaillmresponse4AA272C6"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"generate-ev":{"id":"generate-ev","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiaiB2F740A9"},"pathPart":"generate-ev","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiaigenerateev3ED15989"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEV72CCC71B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/ai/generate-ev"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ai.generate-ev","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateEV72CCC71B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ai/generate-ev"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ai/generate-ev/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateEV72CCC71B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiaigenerateev3ED15989"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"rate-limit":{"id":"rate-limit","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"rate-limit","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitF4921C8E"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"ai":{"id":"ai","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiratelimitF4921C8E"},"pathPart":"ai","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitaiEBD274E4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAIB2954753","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/rate-limit/ai"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.ai","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAIB2954753","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/rate-limit/ai"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/ai/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RateLimitAIB2954753","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitaiEBD274E4"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"aws":{"id":"aws","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiratelimitF4921C8E"},"pathPart":"aws","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitaws89854A3B"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAWSF1FD42E0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/rate-limit/aws"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.rate-limit.aws","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RateLimitAWSF1FD42E0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/rate-limit/aws"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/rate-limit/aws/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RateLimitAWSF1FD42E0","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiratelimitaws89854A3B"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"ses":{"id":"ses","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"ses","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapises91DCF212"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"create-identity":{"id":"create-identity","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"create-identity","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapisescreateidentity8B7B6F58"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESIdentity4DA2E2EF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/ses/create-identity"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-identity","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESIdentity4DA2E2EF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/create-identity"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-identity/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateSESIdentity4DA2E2EF","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapisescreateidentity8B7B6F58"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"create-dkim-records":{"id":"create-dkim-records","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"create-dkim-records","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapisescreatedkimrecords8A276C3C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESDkimRecordsF84541B9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/ses/create-dkim-records"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.create-dkim-records","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateSESDkimRecordsF84541B9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/create-dkim-records"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/create-dkim-records/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateSESDkimRecordsF84541B9","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapisescreatedkimrecords8A276C3C"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"check-domain-status":{"id":"check-domain-status","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"check-domain-status","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapisescheckdomainstatus20BD42DD"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CheckDomainStatusF427753C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/ses/check-domain-status"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.check-domain-status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CheckDomainStatusF427753C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/check-domain-status"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/check-domain-status/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CheckDomainStatusF427753C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapisescheckdomainstatus20BD42DD"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"verify-domain":{"id":"verify-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapises91DCF212"},"pathPart":"verify-domain","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapisesverifydomainC183E4F1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["verifyNewDomainValidD2240338","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/ses/verify-domain"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.ses.verify-domain","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["verifyNewDomainValidD2240338","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/ses/verify-domain"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/ses/verify-domain/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["verifyNewDomainValidD2240338","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapisesverifydomainC183E4F1"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"parse-event":{"id":"parse-event","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"parse-event","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapiparseevent10D63FC9"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ParseEvent487500D4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/parse-event"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.parse-event","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ParseEvent487500D4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/parse-event"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/parse-event/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ParseEvent487500D4","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapiparseevent10D63FC9"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"cors":{"id":"cors","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"cors","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapicors259CBC91"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"allow":{"id":"allow","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/allow","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/allow/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapicors259CBC91"},"pathPart":"allow","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/allow/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/allow/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapicorsallowC9054E53"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}},"get":{"id":"get","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapicors259CBC91"},"pathPart":"get","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapicorsget11D4CCFC"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"GET":{"id":"GET","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCorsE4E2D580","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/GET/api/cors/get"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.GET..api.cors.get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCorsE4E2D580","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/GET/api/cors/get"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/cors/get/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetCorsE4E2D580","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapicorsget11D4CCFC"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}},"test":{"id":"test","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapiBD54C415"},"pathPart":"test","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapitestA53AA846"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"scheduler":{"id":"scheduler","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.201.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiGatewayapitestA53AA846"},"pathPart":"scheduler","restApiId":{"Ref":"ApiGateway11E7F47B"}}}},"OPTIONS":{"id":"OPTIONS","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ApiGatewayapitestscheduler660AE243"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}},"POST":{"id":"POST","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.201.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"},{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler":{"id":"ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/POST/ApiPermission.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TestSchedulerA5F4DF07","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/",{"Ref":"ApiGatewayDeploymentStagedev5A0070C9"},"/POST/api/test/scheduler"]]}}}},"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler":{"id":"ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/POST/ApiPermission.Test.Acsd2PStackDevApiGatewayE6E6DCA1.POST..api.test.scheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TestSchedulerA5F4DF07","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-west-1:872515253712:",{"Ref":"ApiGateway11E7F47B"},"/test-invoke-stage/POST/api/test/scheduler"]]}}}},"Resource":{"id":"Resource","path":"Acsd2PStack-Dev/ApiGateway/Default/api/test/scheduler/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TestSchedulerA5F4DF07","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"{\"body\":\"$input.body\",\"headers\":\"$input.params().header\",\"queryParams\":\"$input.params().querystring\",\"pathParams\":\"$input.params().path\"}"}},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ApiGatewayapitestscheduler660AE243"},"restApiId":{"Ref":"ApiGateway11E7F47B"}}}}}}}}}}}}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"Acsd2PStack-Dev/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"UserPoolId":{"id":"UserPoolId","path":"Acsd2PStack-Dev/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"Acsd2PStack-Dev/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"EmailProcessQueueUrl":{"id":"EmailProcessQueueUrl","path":"Acsd2PStack-Dev/EmailProcessQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"LambdaFunctionCount":{"id":"LambdaFunctionCount","path":"Acsd2PStack-Dev/LambdaFunctionCount","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"DynamoDBTableCount":{"id":"DynamoDBTableCount","path":"Acsd2PStack-Dev/DynamoDBTableCount","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"S3BucketCount":{"id":"S3BucketCount","path":"Acsd2PStack-Dev/S3BucketCount","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"Acsd2PStack-Dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"Acsd2PStack-Dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Acsd2PStack-Dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Acsd2PStack-Dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}