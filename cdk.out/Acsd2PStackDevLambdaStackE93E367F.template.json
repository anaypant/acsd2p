{
 "Description": "Lambda functions for dev environment",
 "Resources": {
  "APIAuthorizerServiceRole2482D84B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/API-Authorizer/ServiceRole/Resource"
   }
  },
  "APIAuthorizerServiceRoleDefaultPolicyA7126BC6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "APIAuthorizerServiceRoleDefaultPolicyA7126BC6",
    "Roles": [
     {
      "Ref": "APIAuthorizerServiceRole2482D84B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/API-Authorizer/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "APIAuthorizer3DA3485D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "530e0033c49a79d5a5e4190b4020709bb3fdeadbc4c3065959a8484a1cbf7c50.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-API-Authorizer",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "APIAuthorizerServiceRole2482D84B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "APIAuthorizerServiceRoleDefaultPolicyA7126BC6",
    "APIAuthorizerServiceRole2482D84B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/API-Authorizer/Resource",
    "aws:asset:path": "asset.530e0033c49a79d5a5e4190b4020709bb3fdeadbc4c3065959a8484a1cbf7c50",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "APIAuthorizerLogGroup5A673AB9": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "APIAuthorizer3DA3485D"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/API-Authorizer/LogGroup/Resource"
   }
  },
  "AuthorizeServiceRole397C1B2B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Authorize/ServiceRole/Resource"
   }
  },
  "AuthorizeServiceRoleDefaultPolicyC880FB24": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AuthorizeServiceRoleDefaultPolicyC880FB24",
    "Roles": [
     {
      "Ref": "AuthorizeServiceRole397C1B2B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Authorize/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AuthorizeD8507075": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "719a3cd50a6dcfe528399dfb84a933f66e2da886ecab87e9719dc98c7f85324a.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Authorize",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "AuthorizeServiceRole397C1B2B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "AuthorizeServiceRoleDefaultPolicyC880FB24",
    "AuthorizeServiceRole397C1B2B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Authorize/Resource",
    "aws:asset:path": "asset.719a3cd50a6dcfe528399dfb84a933f66e2da886ecab87e9719dc98c7f85324a",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AuthorizeLogGroupCAFBD4A3": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AuthorizeD8507075"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Authorize/LogGroup/Resource"
   }
  },
  "CheckDomainStatusServiceRole55503012": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Check-Domain-Status/ServiceRole/Resource"
   }
  },
  "CheckDomainStatusServiceRoleDefaultPolicy6279B8AE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CheckDomainStatusServiceRoleDefaultPolicy6279B8AE",
    "Roles": [
     {
      "Ref": "CheckDomainStatusServiceRole55503012"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Check-Domain-Status/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CheckDomainStatusF427753C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "fc11e697233a1660c9dc2ec691f85e254eb28bf74bccb7d730356a0cf452cb96.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Check-Domain-Status",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CheckDomainStatusServiceRole55503012",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "CheckDomainStatusServiceRoleDefaultPolicy6279B8AE",
    "CheckDomainStatusServiceRole55503012"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Check-Domain-Status/Resource",
    "aws:asset:path": "asset.fc11e697233a1660c9dc2ec691f85e254eb28bf74bccb7d730356a0cf452cb96",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CheckDomainStatusLogGroup48AD12AA": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CheckDomainStatusF427753C"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Check-Domain-Status/LogGroup/Resource"
   }
  },
  "CreateSESDkimRecordsServiceRole79BFACF5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Dkim-Records/ServiceRole/Resource"
   }
  },
  "CreateSESDkimRecordsServiceRoleDefaultPolicy8C13311B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateSESDkimRecordsServiceRoleDefaultPolicy8C13311B",
    "Roles": [
     {
      "Ref": "CreateSESDkimRecordsServiceRole79BFACF5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Dkim-Records/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateSESDkimRecordsF84541B9": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "650b56d3747d7b5fc84751a2194258f6536b1d303c6273def14a0b371f6925fd.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Create-SES-Dkim-Records",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CreateSESDkimRecordsServiceRole79BFACF5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "CreateSESDkimRecordsServiceRoleDefaultPolicy8C13311B",
    "CreateSESDkimRecordsServiceRole79BFACF5"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Dkim-Records/Resource",
    "aws:asset:path": "asset.650b56d3747d7b5fc84751a2194258f6536b1d303c6273def14a0b371f6925fd",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateSESDkimRecordsLogGroup2720B6FE": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CreateSESDkimRecordsF84541B9"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Dkim-Records/LogGroup/Resource"
   }
  },
  "CreateSESIdentityServiceRole886194D4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Identity/ServiceRole/Resource"
   }
  },
  "CreateSESIdentityServiceRoleDefaultPolicy361BD245": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateSESIdentityServiceRoleDefaultPolicy361BD245",
    "Roles": [
     {
      "Ref": "CreateSESIdentityServiceRole886194D4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Identity/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateSESIdentity4DA2E2EF": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "4895a78d74bfaf839d2c858747ba587c84a8cddf6808b34779835d59feb8066d.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Create-SES-Identity",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CreateSESIdentityServiceRole886194D4",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "CreateSESIdentityServiceRoleDefaultPolicy361BD245",
    "CreateSESIdentityServiceRole886194D4"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Identity/Resource",
    "aws:asset:path": "asset.4895a78d74bfaf839d2c858747ba587c84a8cddf6808b34779835d59feb8066d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateSESIdentityLogGroup6E42F9A1": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CreateSESIdentity4DA2E2EF"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Create-SES-Identity/LogGroup/Resource"
   }
  },
  "CreateNewSessionServiceRole68BEA7B4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/CreateNewSession/ServiceRole/Resource"
   }
  },
  "CreateNewSessionServiceRoleDefaultPolicy2C812C40": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateNewSessionServiceRoleDefaultPolicy2C812C40",
    "Roles": [
     {
      "Ref": "CreateNewSessionServiceRole68BEA7B4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/CreateNewSession/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateNewSession969BBFEA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "b5a5e1386ccf7ecc183b4609697bb9d87aa16334dcb9de908baf600b2d334b71.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-CreateNewSession",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CreateNewSessionServiceRole68BEA7B4",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "CreateNewSessionServiceRoleDefaultPolicy2C812C40",
    "CreateNewSessionServiceRole68BEA7B4"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/CreateNewSession/Resource",
    "aws:asset:path": "asset.b5a5e1386ccf7ecc183b4609697bb9d87aa16334dcb9de908baf600b2d334b71",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateNewSessionLogGroupEA6204E0": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "CreateNewSession969BBFEA"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/CreateNewSession/LogGroup/Resource"
   }
  },
  "DBBatchSelectServiceRole52ED1AE5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBBatchSelect/ServiceRole/Resource"
   }
  },
  "DBBatchSelectServiceRoleDefaultPolicyA65DE8D5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBBatchSelectServiceRoleDefaultPolicyA65DE8D5",
    "Roles": [
     {
      "Ref": "DBBatchSelectServiceRole52ED1AE5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBBatchSelect/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBBatchSelect27E57951": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "330e9df57cd16076983a749f4d2a2fca4c781574fd9a9d3d7ee8fdfc30e51ebe.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-DBBatchSelect",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBBatchSelectServiceRole52ED1AE5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "DBBatchSelectServiceRoleDefaultPolicyA65DE8D5",
    "DBBatchSelectServiceRole52ED1AE5"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBBatchSelect/Resource",
    "aws:asset:path": "asset.330e9df57cd16076983a749f4d2a2fca4c781574fd9a9d3d7ee8fdfc30e51ebe",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBBatchSelectLogGroupA3D6B6FF": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBBatchSelect27E57951"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBBatchSelect/LogGroup/Resource"
   }
  },
  "DBDeleteServiceRole585C5822": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBDelete/ServiceRole/Resource"
   }
  },
  "DBDeleteServiceRoleDefaultPolicy9AE369A4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBDeleteServiceRoleDefaultPolicy9AE369A4",
    "Roles": [
     {
      "Ref": "DBDeleteServiceRole585C5822"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBDelete/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBDelete6FEA0FAC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "d1e11b2119d595de05590c59340353c8e1040a4fe981098563ed5752b534e5be.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-DBDelete",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBDeleteServiceRole585C5822",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "DBDeleteServiceRoleDefaultPolicy9AE369A4",
    "DBDeleteServiceRole585C5822"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBDelete/Resource",
    "aws:asset:path": "asset.d1e11b2119d595de05590c59340353c8e1040a4fe981098563ed5752b534e5be",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBDeleteLogGroup0F250869": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBDelete6FEA0FAC"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBDelete/LogGroup/Resource"
   }
  },
  "DBSelectServiceRole6D554165": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBSelect/ServiceRole/Resource"
   }
  },
  "DBSelectServiceRoleDefaultPolicy94A10E8F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBSelectServiceRoleDefaultPolicy94A10E8F",
    "Roles": [
     {
      "Ref": "DBSelectServiceRole6D554165"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBSelect/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBSelectE0E36FBC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "4dbb693cc9a76f9a61a46a023681a05f74018a1fddfcec1a98bcf0a3dd9f4a7c.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-DBSelect",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBSelectServiceRole6D554165",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "DBSelectServiceRoleDefaultPolicy94A10E8F",
    "DBSelectServiceRole6D554165"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBSelect/Resource",
    "aws:asset:path": "asset.4dbb693cc9a76f9a61a46a023681a05f74018a1fddfcec1a98bcf0a3dd9f4a7c",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBSelectLogGroup80E13F79": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBSelectE0E36FBC"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBSelect/LogGroup/Resource"
   }
  },
  "DBUpdateServiceRole27E63D0B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBUpdate/ServiceRole/Resource"
   }
  },
  "DBUpdateServiceRoleDefaultPolicyCBD6FD8E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DBUpdateServiceRoleDefaultPolicyCBD6FD8E",
    "Roles": [
     {
      "Ref": "DBUpdateServiceRole27E63D0B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBUpdate/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DBUpdate593A351B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "f337abbb6d9836e9e66a8c1202ba759cbdc7c6ec249a0d62a5601145a06c6755.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-DBUpdate",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DBUpdateServiceRole27E63D0B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "DBUpdateServiceRoleDefaultPolicyCBD6FD8E",
    "DBUpdateServiceRole27E63D0B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBUpdate/Resource",
    "aws:asset:path": "asset.f337abbb6d9836e9e66a8c1202ba759cbdc7c6ec249a0d62a5601145a06c6755",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DBUpdateLogGroup69D25CCF": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DBUpdate593A351B"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DBUpdate/LogGroup/Resource"
   }
  },
  "DeleteUserSupabaseServiceRoleA2373C49": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DeleteUserSupabase/ServiceRole/Resource"
   }
  },
  "DeleteUserSupabaseServiceRoleDefaultPolicy63FC43D8": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DeleteUserSupabaseServiceRoleDefaultPolicy63FC43D8",
    "Roles": [
     {
      "Ref": "DeleteUserSupabaseServiceRoleA2373C49"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DeleteUserSupabase/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DeleteUserSupabaseD4FF7308": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "df08010cee26be31a174b141db03eb40a576abfad6b1a0440bd1b8b5bf670330.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-DeleteUserSupabase",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DeleteUserSupabaseServiceRoleA2373C49",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 60
   },
   "DependsOn": [
    "DeleteUserSupabaseServiceRoleDefaultPolicy63FC43D8",
    "DeleteUserSupabaseServiceRoleA2373C49"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DeleteUserSupabase/Resource",
    "aws:asset:path": "asset.df08010cee26be31a174b141db03eb40a576abfad6b1a0440bd1b8b5bf670330",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DeleteUserSupabaseLogGroup7472AC15": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DeleteUserSupabaseD4FF7308"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/DeleteUserSupabase/LogGroup/Resource"
   }
  },
  "GenerateEmailServiceRole0096CC1A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEmail/ServiceRole/Resource"
   }
  },
  "GenerateEmailServiceRoleDefaultPolicyB5241152": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GenerateEmailServiceRoleDefaultPolicyB5241152",
    "Roles": [
     {
      "Ref": "GenerateEmailServiceRole0096CC1A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEmail/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GenerateEmail27EC3141": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "9272dc705065e34aad34d35647ddbc42d81c60c19fe647b9660e5b9434538559.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-GenerateEmail",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GenerateEmailServiceRole0096CC1A",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "GenerateEmailServiceRoleDefaultPolicyB5241152",
    "GenerateEmailServiceRole0096CC1A"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEmail/Resource",
    "aws:asset:path": "asset.9272dc705065e34aad34d35647ddbc42d81c60c19fe647b9660e5b9434538559",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GenerateEmailLogGroup79B8C5E8": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GenerateEmail27EC3141"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEmail/LogGroup/Resource"
   }
  },
  "GenerateEVServiceRoleBAF34D8B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEV/ServiceRole/Resource"
   }
  },
  "GenerateEVServiceRoleDefaultPolicyF807BC2C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GenerateEVServiceRoleDefaultPolicyF807BC2C",
    "Roles": [
     {
      "Ref": "GenerateEVServiceRoleBAF34D8B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEV/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GenerateEV72CCC71B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "7fd754f9c71e1ce35bb4503015b17ec83c6bdf9542e555730af83735a40fac04.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-GenerateEV",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GenerateEVServiceRoleBAF34D8B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "GenerateEVServiceRoleDefaultPolicyF807BC2C",
    "GenerateEVServiceRoleBAF34D8B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEV/Resource",
    "aws:asset:path": "asset.7fd754f9c71e1ce35bb4503015b17ec83c6bdf9542e555730af83735a40fac04",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GenerateEVLogGroupDD7CB946": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GenerateEV72CCC71B"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GenerateEV/LogGroup/Resource"
   }
  },
  "GetCorsServiceRole23F04719": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Get-Cors/ServiceRole/Resource"
   }
  },
  "GetCorsServiceRoleDefaultPolicyDDCC3B73": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetCorsServiceRoleDefaultPolicyDDCC3B73",
    "Roles": [
     {
      "Ref": "GetCorsServiceRole23F04719"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Get-Cors/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetCorsE4E2D580": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "cb9875915c163f82a02d1325a3b3ab854a7f2f448a7654bbf22bb2a6f40a0203.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Get-Cors",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GetCorsServiceRole23F04719",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "GetCorsServiceRoleDefaultPolicyDDCC3B73",
    "GetCorsServiceRole23F04719"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Get-Cors/Resource",
    "aws:asset:path": "asset.cb9875915c163f82a02d1325a3b3ab854a7f2f448a7654bbf22bb2a6f40a0203",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetCorsLogGroup5AE2158A": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GetCorsE4E2D580"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Get-Cors/LogGroup/Resource"
   }
  },
  "getThreadAttrsServiceRole304BF294": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/getThreadAttrs/ServiceRole/Resource"
   }
  },
  "getThreadAttrsServiceRoleDefaultPolicy7E4B89E2": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "getThreadAttrsServiceRoleDefaultPolicy7E4B89E2",
    "Roles": [
     {
      "Ref": "getThreadAttrsServiceRole304BF294"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/getThreadAttrs/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "getThreadAttrs5DADDD09": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "e58f06622cf92ee06cd57d7a0d7dd2bab338d7138e0343414f0bb006203db86d.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-getThreadAttrs",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "getThreadAttrsServiceRole304BF294",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "getThreadAttrsServiceRoleDefaultPolicy7E4B89E2",
    "getThreadAttrsServiceRole304BF294"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/getThreadAttrs/Resource",
    "aws:asset:path": "asset.e58f06622cf92ee06cd57d7a0d7dd2bab338d7138e0343414f0bb006203db86d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "getThreadAttrsLogGroupF48E1AEA": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "getThreadAttrs5DADDD09"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/getThreadAttrs/LogGroup/Resource"
   }
  },
  "GetUserConversationsServiceRole6E5732CB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GetUserConversations/ServiceRole/Resource"
   }
  },
  "GetUserConversationsServiceRoleDefaultPolicyFB453B9E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetUserConversationsServiceRoleDefaultPolicyFB453B9E",
    "Roles": [
     {
      "Ref": "GetUserConversationsServiceRole6E5732CB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GetUserConversations/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetUserConversationsD05A38FF": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "11378a1ffde73836fa84321b9429dc2880b6eea1dde60fb57fdcd34d19b2b896.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-GetUserConversations",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "GetUserConversationsServiceRole6E5732CB",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "GetUserConversationsServiceRoleDefaultPolicyFB453B9E",
    "GetUserConversationsServiceRole6E5732CB"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GetUserConversations/Resource",
    "aws:asset:path": "asset.11378a1ffde73836fa84321b9429dc2880b6eea1dde60fb57fdcd34d19b2b896",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetUserConversationsLogGroup340AF329": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "GetUserConversationsD05A38FF"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/GetUserConversations/LogGroup/Resource"
   }
  },
  "LCPLlmResponseServiceRoleED62E2B9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LCPLlmResponse/ServiceRole/Resource"
   }
  },
  "LCPLlmResponseServiceRoleDefaultPolicy5103FF90": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LCPLlmResponseServiceRoleDefaultPolicy5103FF90",
    "Roles": [
     {
      "Ref": "LCPLlmResponseServiceRoleED62E2B9"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LCPLlmResponse/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LCPLlmResponse21157393": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "93329a1b5d09d4689f5ca7d71b8b6e369398b1007b39b26df00ac4b1a1b3352b.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-LCPLlmResponse",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "LCPLlmResponseServiceRoleED62E2B9",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "LCPLlmResponseServiceRoleDefaultPolicy5103FF90",
    "LCPLlmResponseServiceRoleED62E2B9"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LCPLlmResponse/Resource",
    "aws:asset:path": "asset.93329a1b5d09d4689f5ca7d71b8b6e369398b1007b39b26df00ac4b1a1b3352b",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "LCPLlmResponseLogGroupC2CE33A3": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "LCPLlmResponse21157393"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LCPLlmResponse/LogGroup/Resource"
   }
  },
  "LoginUserServiceRole423AD860": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LoginUser/ServiceRole/Resource"
   }
  },
  "LoginUserServiceRoleDefaultPolicyAB11DEB0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LoginUserServiceRoleDefaultPolicyAB11DEB0",
    "Roles": [
     {
      "Ref": "LoginUserServiceRole423AD860"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LoginUser/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LoginUserAD11EC26": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "3a7eaf2517d8c536d641fabd37fecf8433a4a0b8361bc852628d22cf8b2f7e6b.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-LoginUser",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "LoginUserServiceRole423AD860",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "LoginUserServiceRoleDefaultPolicyAB11DEB0",
    "LoginUserServiceRole423AD860"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LoginUser/Resource",
    "aws:asset:path": "asset.3a7eaf2517d8c536d641fabd37fecf8433a4a0b8361bc852628d22cf8b2f7e6b",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "LoginUserLogGroup8890D78D": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "LoginUserAD11EC26"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/LoginUser/LogGroup/Resource"
   }
  },
  "OrganizationsCrudServiceRoleB7D4F296": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Crud/ServiceRole/Resource"
   }
  },
  "OrganizationsCrudServiceRoleDefaultPolicy32F22F54": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrganizationsCrudServiceRoleDefaultPolicy32F22F54",
    "Roles": [
     {
      "Ref": "OrganizationsCrudServiceRoleB7D4F296"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Crud/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OrganizationsCrud7ACB6109": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "79f0d1a742b3e17699028e9d6ea043933a9c25a12ae8bf9162b87cad66125470.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Organizations-Crud",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "OrganizationsCrudServiceRoleB7D4F296",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "OrganizationsCrudServiceRoleDefaultPolicy32F22F54",
    "OrganizationsCrudServiceRoleB7D4F296"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Crud/Resource",
    "aws:asset:path": "asset.79f0d1a742b3e17699028e9d6ea043933a9c25a12ae8bf9162b87cad66125470",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrganizationsCrudLogGroupDFACF237": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "OrganizationsCrud7ACB6109"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Crud/LogGroup/Resource"
   }
  },
  "OrganizationsMembersServiceRole7B651C6C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Members/ServiceRole/Resource"
   }
  },
  "OrganizationsMembersServiceRoleDefaultPolicy15F0DCF4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrganizationsMembersServiceRoleDefaultPolicy15F0DCF4",
    "Roles": [
     {
      "Ref": "OrganizationsMembersServiceRole7B651C6C"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Members/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OrganizationsMembersFAEEE244": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "b9c9a01821101631834d5f35fd9cd224ab0e763b8320e97b9e704860af2822ed.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Organizations-Members",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "OrganizationsMembersServiceRole7B651C6C",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "OrganizationsMembersServiceRoleDefaultPolicy15F0DCF4",
    "OrganizationsMembersServiceRole7B651C6C"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Members/Resource",
    "aws:asset:path": "asset.b9c9a01821101631834d5f35fd9cd224ab0e763b8320e97b9e704860af2822ed",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrganizationsMembersLogGroup55EC0D20": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "OrganizationsMembersFAEEE244"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Organizations-Members/LogGroup/Resource"
   }
  },
  "ParseEventServiceRole53F2EE86": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ParseEvent/ServiceRole/Resource"
   }
  },
  "ParseEventServiceRoleDefaultPolicyF2F8B67F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ParseEventServiceRoleDefaultPolicyF2F8B67F",
    "Roles": [
     {
      "Ref": "ParseEventServiceRole53F2EE86"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ParseEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ParseEvent487500D4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "da34e10f08cf6eb65ae8cc02780811bc593ac2e511af7bc7d63932e719e67817.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-ParseEvent",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "ParseEventServiceRole53F2EE86",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "ParseEventServiceRoleDefaultPolicyF2F8B67F",
    "ParseEventServiceRole53F2EE86"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ParseEvent/Resource",
    "aws:asset:path": "asset.da34e10f08cf6eb65ae8cc02780811bc593ac2e511af7bc7d63932e719e67817",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ParseEventLogGroupCC643B4F": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ParseEvent487500D4"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ParseEvent/LogGroup/Resource"
   }
  },
  "ProcessSQSQueuedEmailsServiceRoleB5F19AC6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Process-SQS-Queued-Emails/ServiceRole/Resource"
   }
  },
  "ProcessSQSQueuedEmailsServiceRoleDefaultPolicy06E420C7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ProcessSQSQueuedEmailsServiceRoleDefaultPolicy06E420C7",
    "Roles": [
     {
      "Ref": "ProcessSQSQueuedEmailsServiceRoleB5F19AC6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Process-SQS-Queued-Emails/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ProcessSQSQueuedEmailsA1F4C8CD": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "6425e3e71aa7dcf9734a918cf4b200aecc5647d67d3928b9e0ae4ea78611af61.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Process-SQS-Queued-Emails",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "ProcessSQSQueuedEmailsServiceRoleB5F19AC6",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "ProcessSQSQueuedEmailsServiceRoleDefaultPolicy06E420C7",
    "ProcessSQSQueuedEmailsServiceRoleB5F19AC6"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Process-SQS-Queued-Emails/Resource",
    "aws:asset:path": "asset.6425e3e71aa7dcf9734a918cf4b200aecc5647d67d3928b9e0ae4ea78611af61",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ProcessSQSQueuedEmailsLogGroup257D688F": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ProcessSQSQueuedEmailsA1F4C8CD"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Process-SQS-Queued-Emails/LogGroup/Resource"
   }
  },
  "ProcessNewUserSupabaseServiceRole548C2ED2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ProcessNewUserSupabase/ServiceRole/Resource"
   }
  },
  "ProcessNewUserSupabaseServiceRoleDefaultPolicy2B1E8C1A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ProcessNewUserSupabaseServiceRoleDefaultPolicy2B1E8C1A",
    "Roles": [
     {
      "Ref": "ProcessNewUserSupabaseServiceRole548C2ED2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ProcessNewUserSupabase/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ProcessNewUserSupabaseBC5B358F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "1fda529581499fc50365c40a1738a2bac02d48ce561923ac9486016cae0eedb6.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-ProcessNewUserSupabase",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "ProcessNewUserSupabaseServiceRole548C2ED2",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 60
   },
   "DependsOn": [
    "ProcessNewUserSupabaseServiceRoleDefaultPolicy2B1E8C1A",
    "ProcessNewUserSupabaseServiceRole548C2ED2"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ProcessNewUserSupabase/Resource",
    "aws:asset:path": "asset.1fda529581499fc50365c40a1738a2bac02d48ce561923ac9486016cae0eedb6",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ProcessNewUserSupabaseLogGroupDC97039D": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ProcessNewUserSupabaseBC5B358F"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/ProcessNewUserSupabase/LogGroup/Resource"
   }
  },
  "RateLimitAIServiceRole80785149": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAI/ServiceRole/Resource"
   }
  },
  "RateLimitAIServiceRoleDefaultPolicyAA9CDF3D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RateLimitAIServiceRoleDefaultPolicyAA9CDF3D",
    "Roles": [
     {
      "Ref": "RateLimitAIServiceRole80785149"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAI/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RateLimitAIB2954753": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "cc890be28a8a8506367201a310e91637eb24a5046daa4bf5d71710f02acc57fb.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-RateLimitAI",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "RateLimitAIServiceRole80785149",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "RateLimitAIServiceRoleDefaultPolicyAA9CDF3D",
    "RateLimitAIServiceRole80785149"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAI/Resource",
    "aws:asset:path": "asset.cc890be28a8a8506367201a310e91637eb24a5046daa4bf5d71710f02acc57fb",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RateLimitAILogGroup8AED4452": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "RateLimitAIB2954753"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAI/LogGroup/Resource"
   }
  },
  "RateLimitAWSServiceRole0CC2489B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAWS/ServiceRole/Resource"
   }
  },
  "RateLimitAWSServiceRoleDefaultPolicy8BE43E23": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RateLimitAWSServiceRoleDefaultPolicy8BE43E23",
    "Roles": [
     {
      "Ref": "RateLimitAWSServiceRole0CC2489B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAWS/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RateLimitAWSF1FD42E0": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "980b4dccb82bb9b8e1ac6899d05a508fde98853738864dd4a8491548d1be05a4.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-RateLimitAWS",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "RateLimitAWSServiceRole0CC2489B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "RateLimitAWSServiceRoleDefaultPolicy8BE43E23",
    "RateLimitAWSServiceRole0CC2489B"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAWS/Resource",
    "aws:asset:path": "asset.980b4dccb82bb9b8e1ac6899d05a508fde98853738864dd4a8491548d1be05a4",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RateLimitAWSLogGroupF1570DDB": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "RateLimitAWSF1FD42E0"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/RateLimitAWS/LogGroup/Resource"
   }
  },
  "RetrieveThreadInformationServiceRole8DA946AB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Retrieve-Thread-Information/ServiceRole/Resource"
   }
  },
  "RetrieveThreadInformationServiceRoleDefaultPolicy0287A74C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RetrieveThreadInformationServiceRoleDefaultPolicy0287A74C",
    "Roles": [
     {
      "Ref": "RetrieveThreadInformationServiceRole8DA946AB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Retrieve-Thread-Information/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RetrieveThreadInformation724354D2": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "bfb93a5f5b5bc564220730eb94471e283b359103bd277c34aac3d20d82ffab8f.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Retrieve-Thread-Information",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "RetrieveThreadInformationServiceRole8DA946AB",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "RetrieveThreadInformationServiceRoleDefaultPolicy0287A74C",
    "RetrieveThreadInformationServiceRole8DA946AB"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Retrieve-Thread-Information/Resource",
    "aws:asset:path": "asset.bfb93a5f5b5bc564220730eb94471e283b359103bd277c34aac3d20d82ffab8f",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RetrieveThreadInformationLogGroupF595353E": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "RetrieveThreadInformation724354D2"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Retrieve-Thread-Information/LogGroup/Resource"
   }
  },
  "SendEmailServiceRole71BD9BE6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Send-Email/ServiceRole/Resource"
   }
  },
  "SendEmailServiceRoleDefaultPolicy9C77718E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SendEmailServiceRoleDefaultPolicy9C77718E",
    "Roles": [
     {
      "Ref": "SendEmailServiceRole71BD9BE6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Send-Email/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "SendEmailF3CD3574": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "36d9bde8b10be5f523228b309e7f0a9b7fa86cfe968f59ea0248d5adb66aa039.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-Send-Email",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "SendEmailServiceRole71BD9BE6",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "SendEmailServiceRoleDefaultPolicy9C77718E",
    "SendEmailServiceRole71BD9BE6"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Send-Email/Resource",
    "aws:asset:path": "asset.36d9bde8b10be5f523228b309e7f0a9b7fa86cfe968f59ea0248d5adb66aa039",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "SendEmailLogGroup725E6C6D": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "SendEmailF3CD3574"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/Send-Email/LogGroup/Resource"
   }
  },
  "utilsServiceRoleFC839C56": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/utils/ServiceRole/Resource"
   }
  },
  "utilsServiceRoleDefaultPolicyC5D717F1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "utilsServiceRoleDefaultPolicyC5D717F1",
    "Roles": [
     {
      "Ref": "utilsServiceRoleFC839C56"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/utils/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "utilsF6FC768D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "23e8ba92ec920c9c82a8c81e92fa0d090de127524e4dceb88d1630ad25763b9c.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-utils",
    "Handler": "arn-resolver.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "utilsServiceRoleFC839C56",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 60
   },
   "DependsOn": [
    "utilsServiceRoleDefaultPolicyC5D717F1",
    "utilsServiceRoleFC839C56"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/utils/Resource",
    "aws:asset:path": "asset.23e8ba92ec920c9c82a8c81e92fa0d090de127524e4dceb88d1630ad25763b9c",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "utilsLogGroupE4CE2C2E": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "utilsF6FC768D"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/utils/LogGroup/Resource"
   }
  },
  "verifyNewDomainValidServiceRole9FFA56C5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AdministratorAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/verifyNewDomainValid/ServiceRole/Resource"
   }
  },
  "verifyNewDomainValidServiceRoleDefaultPolicyAFA5E5F7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:InitiateAuth",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPool1830B1FDArnC8D48E5F"
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Conversations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-EVDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Invocations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMDataCollection",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-LLMReportData",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationInvites",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-OrganizationMembers",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Organizations",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AI",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-RL_AWS",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Sessions",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Threads",
        "arn:aws:dynamodb:us-west-1:872515253712:table/dev-Users",
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:ChangeMessageVisibility",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:ReceiveMessage",
        "sqs:SendMessage"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:sqs:us-west-1:872515253712:dev-EmailProcess"
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::dev-acs-cloudfront-logs",
        "arn:aws:s3:::dev-acs-cloudfront-logs/*",
        "arn:aws:s3:::dev-acs-frontend-staging",
        "arn:aws:s3:::dev-acs-frontend-staging/*",
        "arn:aws:s3:::dev-acs-frontent",
        "arn:aws:s3:::dev-acs-frontent/*",
        "arn:aws:s3:::dev-acs-generic-llm-templates",
        "arn:aws:s3:::dev-acs-generic-llm-templates/*",
        "arn:aws:s3:::dev-acs-lambda-funcs",
        "arn:aws:s3:::dev-acs-lambda-funcs/*",
        "arn:aws:s3:::dev-acs-lgw-emails",
        "arn:aws:s3:::dev-acs-lgw-emails/*",
        "arn:aws:s3:::dev-acs-test-emails",
        "arn:aws:s3:::dev-acs-test-emails/*",
        "arn:aws:s3:::dev-emails-old",
        "arn:aws:s3:::dev-emails-old/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "verifyNewDomainValidServiceRoleDefaultPolicyAFA5E5F7",
    "Roles": [
     {
      "Ref": "verifyNewDomainValidServiceRole9FFA56C5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/verifyNewDomainValid/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "verifyNewDomainValidD2240338": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-872515253712-us-west-1",
     "S3Key": "9b8a0919fcde62d5d9abc4c7e7625a3d425abdc11f3d57635524cd3b2da15954.zip"
    },
    "Environment": {
     "Variables": {
      "STAGE": "dev",
      "AUTH_BP": "xkirxcJV3gCa38",
      "BUCKET_NAME": "xkirxcJV3gCa38",
      "DB_SELECT_LAMBDA": "dev-DBSelect",
      "GENERATE_EV_LAMBDA_ARN": "dev-GenerateEV",
      "PROCESSING_LAMBDA_ARN": "dev-Send-Email",
      "QUEUE_URL": {
       "Fn::Join": [
        "",
        [
         "https://sqs.us-west-1.",
         {
          "Ref": "AWS::URLSuffix"
         },
         "/872515253712/dev-EmailProcess"
        ]
       ]
      },
      "SCHEDULER_ROLE_ARN": "arn:aws:iam::872515253712:role/SQS-SES-Handler",
      "TAI_KEY": "2e1a1e910693ae18c09ad0585a7645e0f4595e90ec35bb366b6f5520221b6ca7",
      "BEDROCK_MODEL_ARN": "arn:aws:bedrock:us-west-2::model/amazon.nova-premier-v1:0",
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPool1830B1FD32BEED4E"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputRefACSUserPoolClientEF8B1F7F0CEFF34F"
      },
      "COGNITO_CLIENT_SECRET": {
       "Fn::ImportValue": "Acsd2PStackDevSharedStack22490131:ExportsOutputFnGetAttACSUserPoolClientDescribeCognitoUserPoolClient105B7A62UserPoolClientClientSecret467ACD6E"
      },
      "RATE_LIMIT_AI": "100",
      "RATE_LIMIT_AWS": "1000",
      "RECAPTCHA_SECRET_KEY": "6LcdgD8rAAAAAMBJ_aCebuY5e_F-IfZjL-oAs9lo",
      "ALLOW_CORS_FUNCTION_NAME": "dev-Allow-Cors",
      "API_AUTHORIZER_FUNCTION_NAME": "dev-API-Authorizer",
      "AUTHORIZE_FUNCTION_NAME": "dev-Authorize",
      "CHECK_DOMAIN_STATUS_FUNCTION_NAME": "dev-Check-Domain-Status",
      "CREATE_SES_DKIM_RECORDS_FUNCTION_NAME": "dev-Create-SES-Dkim-Records",
      "CREATE_SES_IDENTITY_FUNCTION_NAME": "dev-Create-SES-Identity",
      "CREATE_NEW_SESSION_FUNCTION_NAME": "dev-CreateNewSession",
      "DB_BATCH_SELECT_FUNCTION_NAME": "dev-DBBatchSelect",
      "DB_DELETE_FUNCTION_NAME": "dev-DBDelete",
      "DB_SELECT_FUNCTION_NAME": "dev-DBSelect",
      "DB_UPDATE_FUNCTION_NAME": "dev-DBUpdate",
      "DELETE_USER_SUPABASE_FUNCTION_NAME": "dev-DeleteUserSupabase",
      "GENERATE_EMAIL_FUNCTION_NAME": "dev-GenerateEmail",
      "GET_CORS_FUNCTION_NAME": "dev-Get-Cors",
      "GET_THREAD_ATTRS_FUNCTION_NAME": "dev-getThreadAttrs",
      "GET_USER_CONVERSATIONS_FUNCTION_NAME": "dev-GetUserConversations",
      "LCP_LLM_RESPONSE_FUNCTION_NAME": "dev-LCPLlmResponse",
      "LOGIN_USER_FUNCTION_NAME": "dev-LoginUser",
      "ORGANIZATIONS_CRUD_FUNCTION_NAME": "dev-Organizations-Crud",
      "ORGANIZATIONS_INVITES_FUNCTION_NAME": "dev-Organizations-Invites",
      "ORGANIZATIONS_MEMBERS_FUNCTION_NAME": "dev-Organizations-Members",
      "PARSE_EVENT_FUNCTION_NAME": "dev-ParseEvent",
      "PROCESS_SQS_QUEUED_EMAILS_FUNCTION_NAME": "dev-Process-SQS-Queued-Emails",
      "PROCESS_NEW_USER_SUPABASE_FUNCTION_NAME": "dev-ProcessNewUserSupabase",
      "RATE_LIMIT_AI_FUNCTION_NAME": "dev-RateLimitAI",
      "RATE_LIMIT_AWS_FUNCTION_NAME": "dev-RateLimitAWS",
      "RETRIEVE_THREAD_INFORMATION_FUNCTION_NAME": "dev-Retrieve-Thread-Information",
      "SEND_EMAIL_FUNCTION_NAME": "dev-Send-Email",
      "TEST_SCHEDULER_FUNCTION_NAME": "dev-Test-Scheduler",
      "VERIFY_NEW_DOMAIN_VALID_FUNCTION_NAME": "dev-verifyNewDomainValid",
      "CDK_AWS_REGION": "us-west-1",
      "AWS_ACCOUNT_ID": "872515253712"
     }
    },
    "FunctionName": "dev-verifyNewDomainValid",
    "Handler": "lambda_function.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "verifyNewDomainValidServiceRole9FFA56C5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Timeout": 60
   },
   "DependsOn": [
    "verifyNewDomainValidServiceRoleDefaultPolicyAFA5E5F7",
    "verifyNewDomainValidServiceRole9FFA56C5"
   ],
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/verifyNewDomainValid/Resource",
    "aws:asset:path": "asset.9b8a0919fcde62d5d9abc4c7e7625a3d425abdc11f3d57635524cd3b2da15954",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "verifyNewDomainValidLogGroup8E633C98": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "verifyNewDomainValidD2240338"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/verifyNewDomainValid/LogGroup/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/+3dTWvbWBQG4N9SLYuiSdJddskwHQZmSkm6M6GotuqqsaVgyS0Z4/8+2LEzLYXSxdC59/Asgu33kT/IOXqX0nl1fnpWnT6rPw8n09ndyaJ9V21uxnp6V9afh7ebRb18N6urzct1Nx3bvptsiveHp6/qZVNcFM+Lslitu7F9evWh7maLZnV4Ne1nR1g2y371cNP+fQx2b+rX4/7VttwU9Wz2W/epXfXdsunG4mKyP+p5cQshhPDnoZ6HEMLYqOchhDA26nkIIYyNeh5CCGOjnocQwtio5yGEMDbqeQghjI16HkIIY6OehxDC2KjnIYQwNup5CCGMjXoeQghjo56HEMLYqOchhDA26nkIIYyNeh5CCGOjnocQwtio5yGEMDbqeQghjI16HkIIY6OehxDC2KjnIYQwNup5CCGMjXoeQghjo56HEMLYqOchhDA26nkIIYyNeh5CCAPjbfnr++7loem3ZVsvq811v2gmm6IehvWymV09FBeb4n7VdtP2vl5cTqf9uhsPxf54zO4Nl/tPODR8say7et7MXveLdto2Q3Ex2XyVPVyuDscef99fX+oPHP+mf338Sf++56DjWE8//NEt2q55sqd/xXfx+59LKf0RVR2JDILSvFR1JDIISvNS1ZHIICjNS1VHIoOgNC9VHYkMgtK8VHUkMghK81LVkcggKM1LVUcig6A0L1UdiQyC0rxUdSQyCErzUtWRyCAozUtVRyKDoDQvVR2JDILSvFR1JDIISvNS1ZHIICjNS1VHIoOgNC9VHYkMgtK8VHUkMghK81LVkcggKM1LVUcig6A0L1UdiQyC0rxUdSQyCErzUtWRyCAozUtVRyKDoDQvVR2JDILSvFR1JDIISvNS1ZHIICjNS1VHIoOgNB/d38Z6VwnlY7y/wfXxxHvT7+Sb8/HbeDa7Geux2d0je/jqa8Xi/zG2zOIwsWUWh4ktszhMbJnFYWLLLA4TW2ZxmNgyi8PEllkcJrbM4jCxZRaHiS2zOExsmcVhYsssDhNbZnGY2DKLw8SWWRwmtsziMLFlFoeJLbM4TGyZxWFiyywOE1tmcZjYMovDxJZZHCa2zOIwsWUWh4ktszhMbJnFUeL9hRQfr6G4LYcXb+thaMahutw9lMOL6mo9vWvGq3poJrflop8P1ebPfv77ql/fTzbF4vD0Vb1sDpdlFQr/o3C/m8dt227L62bo16tps7/Y50/+uy33p8TNWM/bbr4tu37WVB+HXz6dn1ZnZ9XZs49D256s1t3YLpvq+vHxH4+otGjlegEA"
   },
   "Metadata": {
    "aws:cdk:path": "Acsd2PStack-Dev/LambdaStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ExportsOutputFnGetAttDBBatchSelect27E57951ArnD911502F": {
   "Value": {
    "Fn::GetAtt": [
     "DBBatchSelect27E57951",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttDBBatchSelect27E57951ArnD911502F"
   }
  },
  "ExportsOutputFnGetAttDBUpdate593A351BArnFCB98861": {
   "Value": {
    "Fn::GetAtt": [
     "DBUpdate593A351B",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttDBUpdate593A351BArnFCB98861"
   }
  },
  "ExportsOutputFnGetAttDBDelete6FEA0FACArn842348D4": {
   "Value": {
    "Fn::GetAtt": [
     "DBDelete6FEA0FAC",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttDBDelete6FEA0FACArn842348D4"
   }
  },
  "ExportsOutputFnGetAttDBSelectE0E36FBCArnC7BA508B": {
   "Value": {
    "Fn::GetAtt": [
     "DBSelectE0E36FBC",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttDBSelectE0E36FBCArnC7BA508B"
   }
  },
  "ExportsOutputFnGetAttLCPLlmResponse21157393ArnD0CEE2CC": {
   "Value": {
    "Fn::GetAtt": [
     "LCPLlmResponse21157393",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttLCPLlmResponse21157393ArnD0CEE2CC"
   }
  },
  "ExportsOutputFnGetAttGenerateEV72CCC71BArnD6FA9B23": {
   "Value": {
    "Fn::GetAtt": [
     "GenerateEV72CCC71B",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttGenerateEV72CCC71BArnD6FA9B23"
   }
  },
  "ExportsOutputFnGetAttgetThreadAttrs5DADDD09Arn566B85B2": {
   "Value": {
    "Fn::GetAtt": [
     "getThreadAttrs5DADDD09",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttgetThreadAttrs5DADDD09Arn566B85B2"
   }
  },
  "ExportsOutputFnGetAttSendEmailF3CD3574Arn7DEB583D": {
   "Value": {
    "Fn::GetAtt": [
     "SendEmailF3CD3574",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttSendEmailF3CD3574Arn7DEB583D"
   }
  },
  "ExportsOutputFnGetAttOrganizationsCrud7ACB6109ArnCA3AC979": {
   "Value": {
    "Fn::GetAtt": [
     "OrganizationsCrud7ACB6109",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttOrganizationsCrud7ACB6109ArnCA3AC979"
   }
  },
  "ExportsOutputFnGetAttProcessNewUserSupabaseBC5B358FArn882280C2": {
   "Value": {
    "Fn::GetAtt": [
     "ProcessNewUserSupabaseBC5B358F",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttProcessNewUserSupabaseBC5B358FArn882280C2"
   }
  },
  "ExportsOutputFnGetAttDeleteUserSupabaseD4FF7308ArnC8E79765": {
   "Value": {
    "Fn::GetAtt": [
     "DeleteUserSupabaseD4FF7308",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttDeleteUserSupabaseD4FF7308ArnC8E79765"
   }
  },
  "ExportsOutputFnGetAttLoginUserAD11EC26Arn4B8FAE6A": {
   "Value": {
    "Fn::GetAtt": [
     "LoginUserAD11EC26",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttLoginUserAD11EC26Arn4B8FAE6A"
   }
  },
  "ExportsOutputFnGetAttCheckDomainStatusF427753CArnACAB6FBF": {
   "Value": {
    "Fn::GetAtt": [
     "CheckDomainStatusF427753C",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttCheckDomainStatusF427753CArnACAB6FBF"
   }
  },
  "ExportsOutputFnGetAttCreateSESDkimRecordsF84541B9ArnBA3E8541": {
   "Value": {
    "Fn::GetAtt": [
     "CreateSESDkimRecordsF84541B9",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttCreateSESDkimRecordsF84541B9ArnBA3E8541"
   }
  },
  "ExportsOutputFnGetAttverifyNewDomainValidD2240338Arn11BC4CB2": {
   "Value": {
    "Fn::GetAtt": [
     "verifyNewDomainValidD2240338",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttverifyNewDomainValidD2240338Arn11BC4CB2"
   }
  },
  "ExportsOutputFnGetAttCreateSESIdentity4DA2E2EFArnF21600D8": {
   "Value": {
    "Fn::GetAtt": [
     "CreateSESIdentity4DA2E2EF",
     "Arn"
    ]
   },
   "Export": {
    "Name": "Acsd2PStackDevLambdaStackE93E367F:ExportsOutputFnGetAttCreateSESIdentity4DA2E2EFArnF21600D8"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}